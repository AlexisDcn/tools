var RE=Object.defineProperty;var kE=(t,e,n)=>e in t?RE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Be=(t,e,n)=>kE(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const $e={},Ns=[],Tn=()=>{},PE=()=>!1,dl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Zu=t=>t.startsWith("onUpdate:"),ct=Object.assign,eh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},xE=Object.prototype.hasOwnProperty,Ne=(t,e)=>xE.call(t,e),ae=Array.isArray,Ds=t=>So(t)==="[object Map]",ii=t=>So(t)==="[object Set]",gf=t=>So(t)==="[object Date]",me=t=>typeof t=="function",Je=t=>typeof t=="string",Pn=t=>typeof t=="symbol",je=t=>t!==null&&typeof t=="object",Rm=t=>(je(t)||me(t))&&me(t.then)&&me(t.catch),km=Object.prototype.toString,So=t=>km.call(t),NE=t=>So(t).slice(8,-1),Pm=t=>So(t)==="[object Object]",th=t=>Je(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,zi=Xu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},DE=/-(\w)/g,sn=fl(t=>t.replace(DE,(e,n)=>n?n.toUpperCase():"")),OE=/\B([A-Z])/g,as=fl(t=>t.replace(OE,"-$1").toLowerCase()),pl=fl(t=>t.charAt(0).toUpperCase()+t.slice(1)),fc=fl(t=>t?`on${pl(t)}`:""),Er=(t,e)=>!Object.is(t,e),ya=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},xm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Da=t=>{const e=parseFloat(t);return isNaN(e)?t:e},VE=t=>{const e=Je(t)?Number(t):NaN;return isNaN(e)?t:e};let mf;const gl=()=>mf||(mf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function oi(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Je(r)?UE(r):oi(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Je(t)||je(t))return t}const ME=/;(?![^(]*\))/g,LE=/:([^]+)/,FE=/\/\*[^]*?\*\//g;function UE(t){const e={};return t.replace(FE,"").split(ME).forEach(n=>{if(n){const r=n.split(LE);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function He(t){let e="";if(Je(t))e=t;else if(ae(t))for(let n=0;n<t.length;n++){const r=He(t[n]);r&&(e+=r+" ")}else if(je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const BE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$E=Xu(BE);function Nm(t){return!!t||t===""}function jE(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Zr(t[r],e[r]);return n}function Zr(t,e){if(t===e)return!0;let n=gf(t),r=gf(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Pn(t),r=Pn(e),n||r)return t===e;if(n=ae(t),r=ae(e),n||r)return n&&r?jE(t,e):!1;if(n=je(t),r=je(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Zr(t[o],e[o]))return!1}}return String(t)===String(e)}function nh(t,e){return t.findIndex(n=>Zr(n,e))}const Dm=t=>!!(t&&t.__v_isRef===!0),Ee=t=>Je(t)?t:t==null?"":ae(t)||je(t)&&(t.toString===km||!me(t.toString))?Dm(t)?Ee(t.value):JSON.stringify(t,Om,2):String(t),Om=(t,e)=>Dm(e)?Om(t,e.value):Ds(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[pc(r,i)+" =>"]=s,n),{})}:ii(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>pc(n))}:Pn(e)?pc(e):je(e)&&!ae(e)&&!Pm(e)?String(e):e,pc=(t,e="")=>{var n;return Pn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kt;class Vm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Kt,!e&&Kt&&(this.index=(Kt.scopes||(Kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Kt;try{return Kt=this,e()}finally{Kt=n}}}on(){Kt=this}off(){Kt=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function qE(t){return new Vm(t)}function zE(){return Kt}let ze;const gc=new WeakSet;class Mm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Kt&&Kt.active&&Kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gc.has(this)&&(gc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_f(this),Um(this);const e=ze,n=ln;ze=this,ln=!0;try{return this.fn()}finally{Bm(this),ze=e,ln=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ih(e);this.deps=this.depsTail=void 0,_f(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){lu(this)&&this.run()}get dirty(){return lu(this)}}let Lm=0,Hi,Ki;function Fm(t,e=!1){if(t.flags|=8,e){t.next=Ki,Ki=t;return}t.next=Hi,Hi=t}function rh(){Lm++}function sh(){if(--Lm>0)return;if(Ki){let e=Ki;for(Ki=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Hi;){let e=Hi;for(Hi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Um(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Bm(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),ih(r),HE(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function lu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&($m(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function $m(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===oo))return;t.globalVersion=oo;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!lu(t)){t.flags&=-3;return}const n=ze,r=ln;ze=t,ln=!0;try{Um(t);const s=t.fn(t._value);(e.version===0||Er(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{ze=n,ln=r,Bm(t),t.flags&=-3}}function ih(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ih(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function HE(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ln=!0;const jm=[];function Vr(){jm.push(ln),ln=!1}function Mr(){const t=jm.pop();ln=t===void 0?!0:t}function _f(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ze;ze=void 0;try{e()}finally{ze=n}}}let oo=0;class KE{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class oh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ze||!ln||ze===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ze)n=this.activeLink=new KE(ze,this),ze.deps?(n.prevDep=ze.depsTail,ze.depsTail.nextDep=n,ze.depsTail=n):ze.deps=ze.depsTail=n,qm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ze.depsTail,n.nextDep=void 0,ze.depsTail.nextDep=n,ze.depsTail=n,ze.deps===n&&(ze.deps=r)}return n}trigger(e){this.version++,oo++,this.notify(e)}notify(e){rh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{sh()}}}function qm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)qm(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const cu=new WeakMap,Xr=Symbol(""),uu=Symbol(""),ao=Symbol("");function St(t,e,n){if(ln&&ze){let r=cu.get(t);r||cu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new oh),s.map=r,s.key=n),s.track()}}function Bn(t,e,n,r,s,i){const o=cu.get(t);if(!o){oo++;return}const a=c=>{c&&c.trigger()};if(rh(),e==="clear")o.forEach(a);else{const c=ae(t),u=c&&th(n);if(c&&n==="length"){const h=Number(r);o.forEach((f,g)=>{(g==="length"||g===ao||!Pn(g)&&g>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(ao)),e){case"add":c?u&&a(o.get("length")):(a(o.get(Xr)),Ds(t)&&a(o.get(uu)));break;case"delete":c||(a(o.get(Xr)),Ds(t)&&a(o.get(uu)));break;case"set":Ds(t)&&a(o.get(Xr));break}}sh()}function vs(t){const e=ke(t);return e===t?e:(St(e,"iterate",ao),tn(t)?e:e.map(Ct))}function ml(t){return St(t=ke(t),"iterate",ao),t}const GE={__proto__:null,[Symbol.iterator](){return mc(this,Symbol.iterator,Ct)},concat(...t){return vs(this).concat(...t.map(e=>ae(e)?vs(e):e))},entries(){return mc(this,"entries",t=>(t[1]=Ct(t[1]),t))},every(t,e){return Mn(this,"every",t,e,void 0,arguments)},filter(t,e){return Mn(this,"filter",t,e,n=>n.map(Ct),arguments)},find(t,e){return Mn(this,"find",t,e,Ct,arguments)},findIndex(t,e){return Mn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Mn(this,"findLast",t,e,Ct,arguments)},findLastIndex(t,e){return Mn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Mn(this,"forEach",t,e,void 0,arguments)},includes(...t){return _c(this,"includes",t)},indexOf(...t){return _c(this,"indexOf",t)},join(t){return vs(this).join(t)},lastIndexOf(...t){return _c(this,"lastIndexOf",t)},map(t,e){return Mn(this,"map",t,e,void 0,arguments)},pop(){return ki(this,"pop")},push(...t){return ki(this,"push",t)},reduce(t,...e){return yf(this,"reduce",t,e)},reduceRight(t,...e){return yf(this,"reduceRight",t,e)},shift(){return ki(this,"shift")},some(t,e){return Mn(this,"some",t,e,void 0,arguments)},splice(...t){return ki(this,"splice",t)},toReversed(){return vs(this).toReversed()},toSorted(t){return vs(this).toSorted(t)},toSpliced(...t){return vs(this).toSpliced(...t)},unshift(...t){return ki(this,"unshift",t)},values(){return mc(this,"values",Ct)}};function mc(t,e,n){const r=ml(t),s=r[e]();return r!==t&&!tn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const WE=Array.prototype;function Mn(t,e,n,r,s,i){const o=ml(t),a=o!==t&&!tn(t),c=o[e];if(c!==WE[e]){const f=c.apply(t,i);return a?Ct(f):f}let u=n;o!==t&&(a?u=function(f,g){return n.call(this,Ct(f),g,t)}:n.length>2&&(u=function(f,g){return n.call(this,f,g,t)}));const h=c.call(o,u,r);return a&&s?s(h):h}function yf(t,e,n,r){const s=ml(t);let i=n;return s!==t&&(tn(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,Ct(a),c,t)}),s[e](i,...r)}function _c(t,e,n){const r=ke(t);St(r,"iterate",ao);const s=r[e](...n);return(s===-1||s===!1)&&ch(n[0])?(n[0]=ke(n[0]),r[e](...n)):s}function ki(t,e,n=[]){Vr(),rh();const r=ke(t)[e].apply(t,n);return sh(),Mr(),r}const QE=Xu("__proto__,__v_isRef,__isVue"),zm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Pn));function JE(t){Pn(t)||(t=String(t));const e=ke(this);return St(e,"has",t),e.hasOwnProperty(t)}class Hm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?oT:Qm:i?Wm:Gm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ae(e);if(!s){let c;if(o&&(c=GE[n]))return c;if(n==="hasOwnProperty")return JE}const a=Reflect.get(e,n,kt(e)?e:r);return(Pn(n)?zm.has(n):QE(n))||(s||St(e,"get",n),i)?a:kt(a)?o&&th(n)?a:a.value:je(a)?s?Ym(a):Co(a):a}}class Km extends Hm{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=es(i);if(!tn(r)&&!es(r)&&(i=ke(i),r=ke(r)),!ae(e)&&kt(i)&&!kt(r))return c?!1:(i.value=r,!0)}const o=ae(e)&&th(n)?Number(n)<e.length:Ne(e,n),a=Reflect.set(e,n,r,kt(e)?e:s);return e===ke(s)&&(o?Er(r,i)&&Bn(e,"set",n,r):Bn(e,"add",n,r)),a}deleteProperty(e,n){const r=Ne(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Bn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Pn(n)||!zm.has(n))&&St(e,"has",n),r}ownKeys(e){return St(e,"iterate",ae(e)?"length":Xr),Reflect.ownKeys(e)}}class YE extends Hm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const XE=new Km,ZE=new YE,eT=new Km(!0);const hu=t=>t,ra=t=>Reflect.getPrototypeOf(t);function tT(t,e,n){return function(...r){const s=this.__v_raw,i=ke(s),o=Ds(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?hu:e?du:Ct;return!e&&St(i,"iterate",c?uu:Xr),{next(){const{value:f,done:g}=u.next();return g?{value:f,done:g}:{value:a?[h(f[0]),h(f[1])]:h(f),done:g}},[Symbol.iterator](){return this}}}}function sa(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function nT(t,e){const n={get(s){const i=this.__v_raw,o=ke(i),a=ke(s);t||(Er(s,a)&&St(o,"get",s),St(o,"get",a));const{has:c}=ra(o),u=e?hu:t?du:Ct;if(c.call(o,s))return u(i.get(s));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&St(ke(s),"iterate",Xr),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=ke(i),a=ke(s);return t||(Er(s,a)&&St(o,"has",s),St(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=ke(a),u=e?hu:t?du:Ct;return!t&&St(c,"iterate",Xr),a.forEach((h,f)=>s.call(i,u(h),u(f),o))}};return ct(n,t?{add:sa("add"),set:sa("set"),delete:sa("delete"),clear:sa("clear")}:{add(s){!e&&!tn(s)&&!es(s)&&(s=ke(s));const i=ke(this);return ra(i).has.call(i,s)||(i.add(s),Bn(i,"add",s,s)),this},set(s,i){!e&&!tn(i)&&!es(i)&&(i=ke(i));const o=ke(this),{has:a,get:c}=ra(o);let u=a.call(o,s);u||(s=ke(s),u=a.call(o,s));const h=c.call(o,s);return o.set(s,i),u?Er(i,h)&&Bn(o,"set",s,i):Bn(o,"add",s,i),this},delete(s){const i=ke(this),{has:o,get:a}=ra(i);let c=o.call(i,s);c||(s=ke(s),c=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return c&&Bn(i,"delete",s,void 0),u},clear(){const s=ke(this),i=s.size!==0,o=s.clear();return i&&Bn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=tT(s,t,e)}),n}function ah(t,e){const n=nT(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ne(n,s)&&s in r?n:r,s,i)}const rT={get:ah(!1,!1)},sT={get:ah(!1,!0)},iT={get:ah(!0,!1)};const Gm=new WeakMap,Wm=new WeakMap,Qm=new WeakMap,oT=new WeakMap;function aT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lT(t){return t.__v_skip||!Object.isExtensible(t)?0:aT(NE(t))}function Co(t){return es(t)?t:lh(t,!1,XE,rT,Gm)}function Jm(t){return lh(t,!1,eT,sT,Wm)}function Ym(t){return lh(t,!0,ZE,iT,Qm)}function lh(t,e,n,r,s){if(!je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=lT(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function Os(t){return es(t)?Os(t.__v_raw):!!(t&&t.__v_isReactive)}function es(t){return!!(t&&t.__v_isReadonly)}function tn(t){return!!(t&&t.__v_isShallow)}function ch(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function cT(t){return!Ne(t,"__v_skip")&&Object.isExtensible(t)&&xm(t,"__v_skip",!0),t}const Ct=t=>je(t)?Co(t):t,du=t=>je(t)?Ym(t):t;function kt(t){return t?t.__v_isRef===!0:!1}function he(t){return Xm(t,!1)}function uT(t){return Xm(t,!0)}function Xm(t,e){return kt(t)?t:new hT(t,e)}class hT{constructor(e,n){this.dep=new oh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ke(e),this._value=n?e:Ct(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||tn(e)||es(e);e=r?e:ke(e),Er(e,n)&&(this._rawValue=e,this._value=r?e:Ct(e),this.dep.trigger())}}function Vs(t){return kt(t)?t.value:t}const dT={get:(t,e,n)=>e==="__v_raw"?t:Vs(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return kt(s)&&!kt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Zm(t){return Os(t)?t:new Proxy(t,dT)}class fT{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new oh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=oo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ze!==this)return Fm(this,!0),!0}get value(){const e=this.dep.track();return $m(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function pT(t,e,n=!1){let r,s;return me(t)?r=t:(r=t.get,s=t.set),new fT(r,s,n)}const ia={},Oa=new WeakMap;let Wr;function gT(t,e=!1,n=Wr){if(n){let r=Oa.get(n);r||Oa.set(n,r=[]),r.push(t)}}function mT(t,e,n=$e){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,u=O=>s?O:tn(O)||s===!1||s===0?$n(O,1):$n(O);let h,f,g,_,A=!1,k=!1;if(kt(t)?(f=()=>t.value,A=tn(t)):Os(t)?(f=()=>u(t),A=!0):ae(t)?(k=!0,A=t.some(O=>Os(O)||tn(O)),f=()=>t.map(O=>{if(kt(O))return O.value;if(Os(O))return u(O);if(me(O))return c?c(O,2):O()})):me(t)?e?f=c?()=>c(t,2):t:f=()=>{if(g){Vr();try{g()}finally{Mr()}}const O=Wr;Wr=h;try{return c?c(t,3,[_]):t(_)}finally{Wr=O}}:f=Tn,e&&s){const O=f,J=s===!0?1/0:s;f=()=>$n(O(),J)}const P=zE(),N=()=>{h.stop(),P&&P.active&&eh(P.effects,h)};if(i&&e){const O=e;e=(...J)=>{O(...J),N()}}let V=k?new Array(t.length).fill(ia):ia;const M=O=>{if(!(!(h.flags&1)||!h.dirty&&!O))if(e){const J=h.run();if(s||A||(k?J.some((U,T)=>Er(U,V[T])):Er(J,V))){g&&g();const U=Wr;Wr=h;try{const T=[J,V===ia?void 0:k&&V[0]===ia?[]:V,_];c?c(e,3,T):e(...T),V=J}finally{Wr=U}}}else h.run()};return a&&a(M),h=new Mm(f),h.scheduler=o?()=>o(M,!1):M,_=O=>gT(O,!1,h),g=h.onStop=()=>{const O=Oa.get(h);if(O){if(c)c(O,4);else for(const J of O)J();Oa.delete(h)}},e?r?M(!0):V=h.run():o?o(M.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function $n(t,e=1/0,n){if(e<=0||!je(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,kt(t))$n(t.value,e,n);else if(ae(t))for(let r=0;r<t.length;r++)$n(t[r],e,n);else if(ii(t)||Ds(t))t.forEach(r=>{$n(r,e,n)});else if(Pm(t)){for(const r in t)$n(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&$n(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ro(t,e,n,r){try{return r?t(...r):t()}catch(s){_l(s,e,n)}}function cn(t,e,n,r){if(me(t)){const s=Ro(t,e,n,r);return s&&Rm(s)&&s.catch(i=>{_l(i,e,n)}),s}if(ae(t)){const s=[];for(let i=0;i<t.length;i++)s.push(cn(t[i],e,n,r));return s}}function _l(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||$e;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,u)===!1)return}a=a.parent}if(i){Vr(),Ro(i,null,10,[t,c,u]),Mr();return}}_T(t,n,s,r,o)}function _T(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Vt=[];let yn=-1;const Ms=[];let ur=null,As=0;const e_=Promise.resolve();let Va=null;function uh(t){const e=Va||e_;return t?e.then(this?t.bind(this):t):e}function yT(t){let e=yn+1,n=Vt.length;for(;e<n;){const r=e+n>>>1,s=Vt[r],i=lo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function hh(t){if(!(t.flags&1)){const e=lo(t),n=Vt[Vt.length-1];!n||!(t.flags&2)&&e>=lo(n)?Vt.push(t):Vt.splice(yT(e),0,t),t.flags|=1,t_()}}function t_(){Va||(Va=e_.then(r_))}function vT(t){ae(t)?Ms.push(...t):ur&&t.id===-1?ur.splice(As+1,0,t):t.flags&1||(Ms.push(t),t.flags|=1),t_()}function vf(t,e,n=yn+1){for(;n<Vt.length;n++){const r=Vt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Vt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function n_(t){if(Ms.length){const e=[...new Set(Ms)].sort((n,r)=>lo(n)-lo(r));if(Ms.length=0,ur){ur.push(...e);return}for(ur=e,As=0;As<ur.length;As++){const n=ur[As];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ur=null,As=0}}const lo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function r_(t){try{for(yn=0;yn<Vt.length;yn++){const e=Vt[yn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ro(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yn<Vt.length;yn++){const e=Vt[yn];e&&(e.flags&=-2)}yn=-1,Vt.length=0,n_(),Va=null,(Vt.length||Ms.length)&&r_()}}let $t=null,s_=null;function Ma(t){const e=$t;return $t=t,s_=t&&t.type.__scopeId||null,e}function En(t,e=$t,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Pf(-1);const i=Ma(e);let o;try{o=t(...s)}finally{Ma(i),r._d&&Pf(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Pe(t,e){if($t===null)return t;const n=Tl($t),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=$e]=e[s];i&&(me(i)&&(i={mounted:i,updated:i}),i.deep&&$n(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function zr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Vr(),cn(c,n,8,[t.el,a,t,e]),Mr())}}const wT=Symbol("_vte"),i_=t=>t.__isTeleport,hr=Symbol("_leaveCb"),oa=Symbol("_enterCb");function ET(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ls(()=>{t.isMounted=!0}),p_(()=>{t.isUnmounting=!0}),t}const Yt=[Function,Array],o_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yt,onEnter:Yt,onAfterEnter:Yt,onEnterCancelled:Yt,onBeforeLeave:Yt,onLeave:Yt,onAfterLeave:Yt,onLeaveCancelled:Yt,onBeforeAppear:Yt,onAppear:Yt,onAfterAppear:Yt,onAppearCancelled:Yt},a_=t=>{const e=t.subTree;return e.component?a_(e.component):e},TT={name:"BaseTransition",props:o_,setup(t,{slots:e}){const n=m0(),r=ET();return()=>{const s=e.default&&u_(e.default(),!0);if(!s||!s.length)return;const i=l_(s),o=ke(t),{mode:a}=o;if(r.isLeaving)return yc(i);const c=wf(i);if(!c)return yc(i);let u=fu(c,o,r,n,f=>u=f);c.type!==Ut&&co(c,u);let h=n.subTree&&wf(n.subTree);if(h&&h.type!==Ut&&!Jr(c,h)&&a_(n).type!==Ut){let f=fu(h,o,r,n);if(co(h,f),a==="out-in"&&c.type!==Ut)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},yc(i);a==="in-out"&&c.type!==Ut?f.delayLeave=(g,_,A)=>{const k=c_(r,h);k[String(h.key)]=h,g[hr]=()=>{_(),g[hr]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{A(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function l_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Ut){e=n;break}}return e}const bT=TT;function c_(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function fu(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:g,onLeave:_,onAfterLeave:A,onLeaveCancelled:k,onBeforeAppear:P,onAppear:N,onAfterAppear:V,onAppearCancelled:M}=e,O=String(t.key),J=c_(n,t),U=(v,b)=>{v&&cn(v,r,9,b)},T=(v,b)=>{const S=b[1];U(v,b),ae(v)?v.every(I=>I.length<=1)&&S():v.length<=1&&S()},y={mode:o,persisted:a,beforeEnter(v){let b=c;if(!n.isMounted)if(i)b=P||c;else return;v[hr]&&v[hr](!0);const S=J[O];S&&Jr(t,S)&&S.el[hr]&&S.el[hr](),U(b,[v])},enter(v){let b=u,S=h,I=f;if(!n.isMounted)if(i)b=N||u,S=V||h,I=M||f;else return;let E=!1;const ee=v[oa]=Le=>{E||(E=!0,Le?U(I,[v]):U(S,[v]),y.delayedLeave&&y.delayedLeave(),v[oa]=void 0)};b?T(b,[v,ee]):ee()},leave(v,b){const S=String(t.key);if(v[oa]&&v[oa](!0),n.isUnmounting)return b();U(g,[v]);let I=!1;const E=v[hr]=ee=>{I||(I=!0,b(),ee?U(k,[v]):U(A,[v]),v[hr]=void 0,J[S]===t&&delete J[S])};J[S]=t,_?T(_,[v,E]):E()},clone(v){const b=fu(v,e,n,r,s);return s&&s(b),b}};return y}function yc(t){if(yl(t))return t=Cr(t),t.children=null,t}function wf(t){if(!yl(t))return i_(t.type)&&t.children?l_(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&me(n.default))return n.default()}}function co(t,e){t.shapeFlag&6&&t.component?(t.transition=e,co(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function u_(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===nt?(o.patchFlag&128&&s++,r=r.concat(u_(o.children,e,a))):(e||o.type!==Ut)&&r.push(a!=null?Cr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function h_(t,e){return me(t)?ct({name:t.name},e,{setup:t}):t}function d_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function La(t,e,n,r,s=!1){if(ae(t)){t.forEach((A,k)=>La(A,e&&(ae(e)?e[k]:e),n,r,s));return}if(Gi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&La(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Tl(r.component):r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,h=a.refs===$e?a.refs={}:a.refs,f=a.setupState,g=ke(f),_=f===$e?()=>!1:A=>Ne(g,A);if(u!=null&&u!==c&&(Je(u)?(h[u]=null,_(u)&&(f[u]=null)):kt(u)&&(u.value=null)),me(c))Ro(c,a,12,[o,h]);else{const A=Je(c),k=kt(c);if(A||k){const P=()=>{if(t.f){const N=A?_(c)?f[c]:h[c]:c.value;s?ae(N)&&eh(N,i):ae(N)?N.includes(i)||N.push(i):A?(h[c]=[i],_(c)&&(f[c]=h[c])):(c.value=[i],t.k&&(h[t.k]=c.value))}else A?(h[c]=o,_(c)&&(f[c]=o)):k&&(c.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,Ht(P,n)):P()}}}gl().requestIdleCallback;gl().cancelIdleCallback;const Gi=t=>!!t.type.__asyncLoader,yl=t=>t.type.__isKeepAlive;function IT(t,e){f_(t,"a",e)}function AT(t,e){f_(t,"da",e)}function f_(t,e,n=mt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(vl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)yl(s.parent.vnode)&&ST(r,e,n,s),s=s.parent}}function ST(t,e,n,r){const s=vl(e,t,r,!0);g_(()=>{eh(r[e],s)},n)}function vl(t,e,n=mt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Vr();const a=ko(n),c=cn(e,n,t,o);return a(),Mr(),c});return r?s.unshift(i):s.push(i),i}}const Xn=t=>(e,n=mt)=>{(!fo||t==="sp")&&vl(t,(...r)=>e(...r),n)},CT=Xn("bm"),ls=Xn("m"),RT=Xn("bu"),kT=Xn("u"),p_=Xn("bum"),g_=Xn("um"),PT=Xn("sp"),xT=Xn("rtg"),NT=Xn("rtc");function DT(t,e=mt){vl("ec",t,e)}const m_="components";function js(t,e){return y_(m_,t,!0,e)||t}const __=Symbol.for("v-ndc");function OT(t){return Je(t)?y_(m_,t,!1)||t:t||__}function y_(t,e,n=!0,r=!1){const s=$t||mt;if(s){const i=s.type;{const a=E0(i,!1);if(a&&(a===e||a===sn(e)||a===pl(sn(e))))return i}const o=Ef(s[t]||i[t],e)||Ef(s.appContext[t],e);return!o&&r?i:o}}function Ef(t,e){return t&&(t[e]||t[sn(e)]||t[pl(sn(e))])}function bn(t,e,n,r){let s;const i=n,o=ae(t);if(o||Je(t)){const a=o&&Os(t);let c=!1;a&&(c=!tn(t),t=ml(t)),s=new Array(t.length);for(let u=0,h=t.length;u<h;u++)s[u]=e(c?Ct(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(je(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}const pu=t=>t?U_(t)?Tl(t):pu(t.parent):null,Wi=ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>pu(t.parent),$root:t=>pu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>w_(t),$forceUpdate:t=>t.f||(t.f=()=>{hh(t.update)}),$nextTick:t=>t.n||(t.n=uh.bind(t.proxy)),$watch:t=>t0.bind(t)}),vc=(t,e)=>t!==$e&&!t.__isScriptSetup&&Ne(t,e),VT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(vc(r,e))return o[e]=1,r[e];if(s!==$e&&Ne(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Ne(u,e))return o[e]=3,i[e];if(n!==$e&&Ne(n,e))return o[e]=4,n[e];gu&&(o[e]=0)}}const h=Wi[e];let f,g;if(h)return e==="$attrs"&&St(t.attrs,"get",""),h(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==$e&&Ne(n,e))return o[e]=4,n[e];if(g=c.config.globalProperties,Ne(g,e))return g[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return vc(s,e)?(s[e]=n,!0):r!==$e&&Ne(r,e)?(r[e]=n,!0):Ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==$e&&Ne(t,o)||vc(e,o)||(a=i[0])&&Ne(a,o)||Ne(r,o)||Ne(Wi,o)||Ne(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ne(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Tf(t){return ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let gu=!0;function MT(t){const e=w_(t),n=t.proxy,r=t.ctx;gu=!1,e.beforeCreate&&bf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:f,mounted:g,beforeUpdate:_,updated:A,activated:k,deactivated:P,beforeDestroy:N,beforeUnmount:V,destroyed:M,unmounted:O,render:J,renderTracked:U,renderTriggered:T,errorCaptured:y,serverPrefetch:v,expose:b,inheritAttrs:S,components:I,directives:E,filters:ee}=e;if(u&&LT(u,r,null),o)for(const Te in o){const ve=o[Te];me(ve)&&(r[Te]=ve.bind(n))}if(s){const Te=s.call(n,n);je(Te)&&(t.data=Co(Te))}if(gu=!0,i)for(const Te in i){const ve=i[Te],xt=me(ve)?ve.bind(n,n):me(ve.get)?ve.get.bind(n,n):Tn,Nt=!me(ve)&&me(ve.set)?ve.set.bind(n):Tn,ut=rt({get:xt,set:Nt});Object.defineProperty(r,Te,{enumerable:!0,configurable:!0,get:()=>ut.value,set:qe=>ut.value=qe})}if(a)for(const Te in a)v_(a[Te],r,n,Te);if(c){const Te=me(c)?c.call(n):c;Reflect.ownKeys(Te).forEach(ve=>{va(ve,Te[ve])})}h&&bf(h,t,"c");function Ve(Te,ve){ae(ve)?ve.forEach(xt=>Te(xt.bind(n))):ve&&Te(ve.bind(n))}if(Ve(CT,f),Ve(ls,g),Ve(RT,_),Ve(kT,A),Ve(IT,k),Ve(AT,P),Ve(DT,y),Ve(NT,U),Ve(xT,T),Ve(p_,V),Ve(g_,O),Ve(PT,v),ae(b))if(b.length){const Te=t.exposed||(t.exposed={});b.forEach(ve=>{Object.defineProperty(Te,ve,{get:()=>n[ve],set:xt=>n[ve]=xt})})}else t.exposed||(t.exposed={});J&&t.render===Tn&&(t.render=J),S!=null&&(t.inheritAttrs=S),I&&(t.components=I),E&&(t.directives=E),v&&d_(t)}function LT(t,e,n=Tn){ae(t)&&(t=mu(t));for(const r in t){const s=t[r];let i;je(s)?"default"in s?i=nn(s.from||r,s.default,!0):i=nn(s.from||r):i=nn(s),kt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function bf(t,e,n){cn(ae(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function v_(t,e,n,r){let s=r.includes(".")?O_(n,r):()=>n[r];if(Je(t)){const i=e[t];me(i)&&Hn(s,i)}else if(me(t))Hn(s,t.bind(n));else if(je(t))if(ae(t))t.forEach(i=>v_(i,e,n,r));else{const i=me(t.handler)?t.handler.bind(n):e[t.handler];me(i)&&Hn(s,i,t)}}function w_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Fa(c,u,o,!0)),Fa(c,e,o)),je(e)&&i.set(e,c),c}function Fa(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Fa(t,i,n,!0),s&&s.forEach(o=>Fa(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=FT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const FT={data:If,props:Af,emits:Af,methods:Vi,computed:Vi,beforeCreate:Ot,created:Ot,beforeMount:Ot,mounted:Ot,beforeUpdate:Ot,updated:Ot,beforeDestroy:Ot,beforeUnmount:Ot,destroyed:Ot,unmounted:Ot,activated:Ot,deactivated:Ot,errorCaptured:Ot,serverPrefetch:Ot,components:Vi,directives:Vi,watch:BT,provide:If,inject:UT};function If(t,e){return e?t?function(){return ct(me(t)?t.call(this,this):t,me(e)?e.call(this,this):e)}:e:t}function UT(t,e){return Vi(mu(t),mu(e))}function mu(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ot(t,e){return t?[...new Set([].concat(t,e))]:e}function Vi(t,e){return t?ct(Object.create(null),t,e):e}function Af(t,e){return t?ae(t)&&ae(e)?[...new Set([...t,...e])]:ct(Object.create(null),Tf(t),Tf(e??{})):e}function BT(t,e){if(!t)return e;if(!e)return t;const n=ct(Object.create(null),t);for(const r in e)n[r]=Ot(t[r],e[r]);return n}function E_(){return{app:null,config:{isNativeTag:PE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $T=0;function jT(t,e){return function(r,s=null){me(r)||(r=ct({},r)),s!=null&&!je(s)&&(s=null);const i=E_(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:$T++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:b0,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&me(h.install)?(o.add(h),h.install(u,...f)):me(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,g){if(!c){const _=u._ceVNode||Ze(r,s);return _.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(_,h,g),c=!0,u._container=h,h.__vue_app__=u,Tl(_.component)}},onUnmount(h){a.push(h)},unmount(){c&&(cn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=Ls;Ls=u;try{return h()}finally{Ls=f}}};return u}}let Ls=null;function va(t,e){if(mt){let n=mt.provides;const r=mt.parent&&mt.parent.provides;r===n&&(n=mt.provides=Object.create(r)),n[t]=e}}function nn(t,e,n=!1){const r=mt||$t;if(r||Ls){const s=Ls?Ls._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&me(e)?e.call(r&&r.proxy):e}}const T_={},b_=()=>Object.create(T_),I_=t=>Object.getPrototypeOf(t)===T_;function qT(t,e,n,r=!1){const s={},i=b_();t.propsDefaults=Object.create(null),A_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Jm(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function zT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=ke(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let g=h[f];if(wl(t.emitsOptions,g))continue;const _=e[g];if(c)if(Ne(i,g))_!==i[g]&&(i[g]=_,u=!0);else{const A=sn(g);s[A]=_u(c,a,A,_,t,!1)}else _!==i[g]&&(i[g]=_,u=!0)}}}else{A_(t,e,s,i)&&(u=!0);let h;for(const f in a)(!e||!Ne(e,f)&&((h=as(f))===f||!Ne(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=_u(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!Ne(e,f))&&(delete i[f],u=!0)}u&&Bn(t.attrs,"set","")}function A_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(zi(c))continue;const u=e[c];let h;s&&Ne(s,h=sn(c))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:wl(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=ke(n),u=a||$e;for(let h=0;h<i.length;h++){const f=i[h];n[f]=_u(s,c,f,u[f],t,!Ne(u,f))}}return o}function _u(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ne(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&me(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=ko(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===as(n))&&(r=!0))}return r}const HT=new WeakMap;function S_(t,e,n=!1){const r=n?HT:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!me(t)){const h=f=>{c=!0;const[g,_]=S_(f,e,!0);ct(o,g),_&&a.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return je(t)&&r.set(t,Ns),Ns;if(ae(i))for(let h=0;h<i.length;h++){const f=sn(i[h]);Sf(f)&&(o[f]=$e)}else if(i)for(const h in i){const f=sn(h);if(Sf(f)){const g=i[h],_=o[f]=ae(g)||me(g)?{type:g}:ct({},g),A=_.type;let k=!1,P=!0;if(ae(A))for(let N=0;N<A.length;++N){const V=A[N],M=me(V)&&V.name;if(M==="Boolean"){k=!0;break}else M==="String"&&(P=!1)}else k=me(A)&&A.name==="Boolean";_[0]=k,_[1]=P,(k||Ne(_,"default"))&&a.push(f)}}const u=[o,a];return je(t)&&r.set(t,u),u}function Sf(t){return t[0]!=="$"&&!zi(t)}const C_=t=>t[0]==="_"||t==="$stable",dh=t=>ae(t)?t.map(wn):[wn(t)],KT=(t,e,n)=>{if(e._n)return e;const r=En((...s)=>dh(e(...s)),n);return r._c=!1,r},R_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(C_(s))continue;const i=t[s];if(me(i))e[s]=KT(s,i,r);else if(i!=null){const o=dh(i);e[s]=()=>o}}},k_=(t,e)=>{const n=dh(e);t.slots.default=()=>n},P_=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},GT=(t,e,n)=>{const r=t.slots=b_();if(t.vnode.shapeFlag&32){const s=e._;s?(P_(r,e,n),n&&xm(r,"_",s,!0)):R_(e,r)}else e&&k_(t,e)},WT=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=$e;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:P_(s,e,n):(i=!e.$stable,R_(e,s)),o=e}else e&&(k_(t,e),o={default:1});if(i)for(const a in s)!C_(a)&&o[a]==null&&delete s[a]},Ht=l0;function QT(t){return JT(t)}function JT(t,e){const n=gl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:g,setScopeId:_=Tn,insertStaticContent:A}=t,k=(C,R,x,B=null,q=null,$=null,X=void 0,W=null,K=!!R.dynamicChildren)=>{if(C===R)return;C&&!Jr(C,R)&&(B=F(C),qe(C,q,$,!0),C=null),R.patchFlag===-2&&(K=!1,R.dynamicChildren=null);const{type:H,ref:le,shapeFlag:Z}=R;switch(H){case El:P(C,R,x,B);break;case Ut:N(C,R,x,B);break;case wa:C==null&&V(R,x,B,X);break;case nt:I(C,R,x,B,q,$,X,W,K);break;default:Z&1?J(C,R,x,B,q,$,X,W,K):Z&6?E(C,R,x,B,q,$,X,W,K):(Z&64||Z&128)&&H.process(C,R,x,B,q,$,X,W,K,ne)}le!=null&&q&&La(le,C&&C.ref,$,R||C,!R)},P=(C,R,x,B)=>{if(C==null)r(R.el=a(R.children),x,B);else{const q=R.el=C.el;R.children!==C.children&&u(q,R.children)}},N=(C,R,x,B)=>{C==null?r(R.el=c(R.children||""),x,B):R.el=C.el},V=(C,R,x,B)=>{[C.el,C.anchor]=A(C.children,R,x,B,C.el,C.anchor)},M=({el:C,anchor:R},x,B)=>{let q;for(;C&&C!==R;)q=g(C),r(C,x,B),C=q;r(R,x,B)},O=({el:C,anchor:R})=>{let x;for(;C&&C!==R;)x=g(C),s(C),C=x;s(R)},J=(C,R,x,B,q,$,X,W,K)=>{R.type==="svg"?X="svg":R.type==="math"&&(X="mathml"),C==null?U(R,x,B,q,$,X,W,K):v(C,R,q,$,X,W,K)},U=(C,R,x,B,q,$,X,W)=>{let K,H;const{props:le,shapeFlag:Z,transition:ie,dirs:pe}=C;if(K=C.el=o(C.type,$,le&&le.is,le),Z&8?h(K,C.children):Z&16&&y(C.children,K,null,B,q,wc(C,$),X,W),pe&&zr(C,null,B,"created"),T(K,C,C.scopeId,X,B),le){for(const ye in le)ye!=="value"&&!zi(ye)&&i(K,ye,null,le[ye],$,B);"value"in le&&i(K,"value",null,le.value,$),(H=le.onVnodeBeforeMount)&&gn(H,B,C)}pe&&zr(C,null,B,"beforeMount");const ce=YT(q,ie);ce&&ie.beforeEnter(K),r(K,R,x),((H=le&&le.onVnodeMounted)||ce||pe)&&Ht(()=>{H&&gn(H,B,C),ce&&ie.enter(K),pe&&zr(C,null,B,"mounted")},q)},T=(C,R,x,B,q)=>{if(x&&_(C,x),B)for(let $=0;$<B.length;$++)_(C,B[$]);if(q){let $=q.subTree;if(R===$||M_($.type)&&($.ssContent===R||$.ssFallback===R)){const X=q.vnode;T(C,X,X.scopeId,X.slotScopeIds,q.parent)}}},y=(C,R,x,B,q,$,X,W,K=0)=>{for(let H=K;H<C.length;H++){const le=C[H]=W?dr(C[H]):wn(C[H]);k(null,le,R,x,B,q,$,X,W)}},v=(C,R,x,B,q,$,X)=>{const W=R.el=C.el;let{patchFlag:K,dynamicChildren:H,dirs:le}=R;K|=C.patchFlag&16;const Z=C.props||$e,ie=R.props||$e;let pe;if(x&&Hr(x,!1),(pe=ie.onVnodeBeforeUpdate)&&gn(pe,x,R,C),le&&zr(R,C,x,"beforeUpdate"),x&&Hr(x,!0),(Z.innerHTML&&ie.innerHTML==null||Z.textContent&&ie.textContent==null)&&h(W,""),H?b(C.dynamicChildren,H,W,x,B,wc(R,q),$):X||ve(C,R,W,null,x,B,wc(R,q),$,!1),K>0){if(K&16)S(W,Z,ie,x,q);else if(K&2&&Z.class!==ie.class&&i(W,"class",null,ie.class,q),K&4&&i(W,"style",Z.style,ie.style,q),K&8){const ce=R.dynamicProps;for(let ye=0;ye<ce.length;ye++){const Ae=ce[ye],wt=Z[Ae],dt=ie[Ae];(dt!==wt||Ae==="value")&&i(W,Ae,wt,dt,q,x)}}K&1&&C.children!==R.children&&h(W,R.children)}else!X&&H==null&&S(W,Z,ie,x,q);((pe=ie.onVnodeUpdated)||le)&&Ht(()=>{pe&&gn(pe,x,R,C),le&&zr(R,C,x,"updated")},B)},b=(C,R,x,B,q,$,X)=>{for(let W=0;W<R.length;W++){const K=C[W],H=R[W],le=K.el&&(K.type===nt||!Jr(K,H)||K.shapeFlag&70)?f(K.el):x;k(K,H,le,null,B,q,$,X,!0)}},S=(C,R,x,B,q)=>{if(R!==x){if(R!==$e)for(const $ in R)!zi($)&&!($ in x)&&i(C,$,R[$],null,q,B);for(const $ in x){if(zi($))continue;const X=x[$],W=R[$];X!==W&&$!=="value"&&i(C,$,W,X,q,B)}"value"in x&&i(C,"value",R.value,x.value,q)}},I=(C,R,x,B,q,$,X,W,K)=>{const H=R.el=C?C.el:a(""),le=R.anchor=C?C.anchor:a("");let{patchFlag:Z,dynamicChildren:ie,slotScopeIds:pe}=R;pe&&(W=W?W.concat(pe):pe),C==null?(r(H,x,B),r(le,x,B),y(R.children||[],x,le,q,$,X,W,K)):Z>0&&Z&64&&ie&&C.dynamicChildren?(b(C.dynamicChildren,ie,x,q,$,X,W),(R.key!=null||q&&R===q.subTree)&&x_(C,R,!0)):ve(C,R,x,le,q,$,X,W,K)},E=(C,R,x,B,q,$,X,W,K)=>{R.slotScopeIds=W,C==null?R.shapeFlag&512?q.ctx.activate(R,x,B,X,K):ee(R,x,B,q,$,X,K):Le(C,R,K)},ee=(C,R,x,B,q,$,X)=>{const W=C.component=g0(C,B,q);if(yl(C)&&(W.ctx.renderer=ne),_0(W,!1,X),W.asyncDep){if(q&&q.registerDep(W,Ve,X),!C.el){const K=W.subTree=Ze(Ut);N(null,K,R,x)}}else Ve(W,C,R,x,q,$,X)},Le=(C,R,x)=>{const B=R.component=C.component;if(o0(C,R,x))if(B.asyncDep&&!B.asyncResolved){Te(B,R,x);return}else B.next=R,B.update();else R.el=C.el,B.vnode=R},Ve=(C,R,x,B,q,$,X)=>{const W=()=>{if(C.isMounted){let{next:Z,bu:ie,u:pe,parent:ce,vnode:ye}=C;{const Et=N_(C);if(Et){Z&&(Z.el=ye.el,Te(C,Z,X)),Et.asyncDep.then(()=>{C.isUnmounted||W()});return}}let Ae=Z,wt;Hr(C,!1),Z?(Z.el=ye.el,Te(C,Z,X)):Z=ye,ie&&ya(ie),(wt=Z.props&&Z.props.onVnodeBeforeUpdate)&&gn(wt,ce,Z,ye),Hr(C,!0);const dt=Rf(C),Qt=C.subTree;C.subTree=dt,k(Qt,dt,f(Qt.el),F(Qt),C,q,$),Z.el=dt.el,Ae===null&&a0(C,dt.el),pe&&Ht(pe,q),(wt=Z.props&&Z.props.onVnodeUpdated)&&Ht(()=>gn(wt,ce,Z,ye),q)}else{let Z;const{el:ie,props:pe}=R,{bm:ce,m:ye,parent:Ae,root:wt,type:dt}=C,Qt=Gi(R);Hr(C,!1),ce&&ya(ce),!Qt&&(Z=pe&&pe.onVnodeBeforeMount)&&gn(Z,Ae,R),Hr(C,!0);{wt.ce&&wt.ce._injectChildStyle(dt);const Et=C.subTree=Rf(C);k(null,Et,x,B,C,q,$),R.el=Et.el}if(ye&&Ht(ye,q),!Qt&&(Z=pe&&pe.onVnodeMounted)){const Et=R;Ht(()=>gn(Z,Ae,Et),q)}(R.shapeFlag&256||Ae&&Gi(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&C.a&&Ht(C.a,q),C.isMounted=!0,R=x=B=null}};C.scope.on();const K=C.effect=new Mm(W);C.scope.off();const H=C.update=K.run.bind(K),le=C.job=K.runIfDirty.bind(K);le.i=C,le.id=C.uid,K.scheduler=()=>hh(le),Hr(C,!0),H()},Te=(C,R,x)=>{R.component=C;const B=C.vnode.props;C.vnode=R,C.next=null,zT(C,R.props,B,x),WT(C,R.children,x),Vr(),vf(C),Mr()},ve=(C,R,x,B,q,$,X,W,K=!1)=>{const H=C&&C.children,le=C?C.shapeFlag:0,Z=R.children,{patchFlag:ie,shapeFlag:pe}=R;if(ie>0){if(ie&128){Nt(H,Z,x,B,q,$,X,W,K);return}else if(ie&256){xt(H,Z,x,B,q,$,X,W,K);return}}pe&8?(le&16&&ht(H,q,$),Z!==H&&h(x,Z)):le&16?pe&16?Nt(H,Z,x,B,q,$,X,W,K):ht(H,q,$,!0):(le&8&&h(x,""),pe&16&&y(Z,x,B,q,$,X,W,K))},xt=(C,R,x,B,q,$,X,W,K)=>{C=C||Ns,R=R||Ns;const H=C.length,le=R.length,Z=Math.min(H,le);let ie;for(ie=0;ie<Z;ie++){const pe=R[ie]=K?dr(R[ie]):wn(R[ie]);k(C[ie],pe,x,null,q,$,X,W,K)}H>le?ht(C,q,$,!0,!1,Z):y(R,x,B,q,$,X,W,K,Z)},Nt=(C,R,x,B,q,$,X,W,K)=>{let H=0;const le=R.length;let Z=C.length-1,ie=le-1;for(;H<=Z&&H<=ie;){const pe=C[H],ce=R[H]=K?dr(R[H]):wn(R[H]);if(Jr(pe,ce))k(pe,ce,x,null,q,$,X,W,K);else break;H++}for(;H<=Z&&H<=ie;){const pe=C[Z],ce=R[ie]=K?dr(R[ie]):wn(R[ie]);if(Jr(pe,ce))k(pe,ce,x,null,q,$,X,W,K);else break;Z--,ie--}if(H>Z){if(H<=ie){const pe=ie+1,ce=pe<le?R[pe].el:B;for(;H<=ie;)k(null,R[H]=K?dr(R[H]):wn(R[H]),x,ce,q,$,X,W,K),H++}}else if(H>ie)for(;H<=Z;)qe(C[H],q,$,!0),H++;else{const pe=H,ce=H,ye=new Map;for(H=ce;H<=ie;H++){const ft=R[H]=K?dr(R[H]):wn(R[H]);ft.key!=null&&ye.set(ft.key,H)}let Ae,wt=0;const dt=ie-ce+1;let Qt=!1,Et=0;const tr=new Array(dt);for(H=0;H<dt;H++)tr[H]=0;for(H=pe;H<=Z;H++){const ft=C[H];if(wt>=dt){qe(ft,q,$,!0);continue}let Jt;if(ft.key!=null)Jt=ye.get(ft.key);else for(Ae=ce;Ae<=ie;Ae++)if(tr[Ae-ce]===0&&Jr(ft,R[Ae])){Jt=Ae;break}Jt===void 0?qe(ft,q,$,!0):(tr[Jt-ce]=H+1,Jt>=Et?Et=Jt:Qt=!0,k(ft,R[Jt],x,null,q,$,X,W,K),wt++)}const mi=Qt?XT(tr):Ns;for(Ae=mi.length-1,H=dt-1;H>=0;H--){const ft=ce+H,Jt=R[ft],$o=ft+1<le?R[ft+1].el:B;tr[H]===0?k(null,Jt,x,$o,q,$,X,W,K):Qt&&(Ae<0||H!==mi[Ae]?ut(Jt,x,$o,2):Ae--)}}},ut=(C,R,x,B,q=null)=>{const{el:$,type:X,transition:W,children:K,shapeFlag:H}=C;if(H&6){ut(C.component.subTree,R,x,B);return}if(H&128){C.suspense.move(R,x,B);return}if(H&64){X.move(C,R,x,ne);return}if(X===nt){r($,R,x);for(let Z=0;Z<K.length;Z++)ut(K[Z],R,x,B);r(C.anchor,R,x);return}if(X===wa){M(C,R,x);return}if(B!==2&&H&1&&W)if(B===0)W.beforeEnter($),r($,R,x),Ht(()=>W.enter($),q);else{const{leave:Z,delayLeave:ie,afterLeave:pe}=W,ce=()=>r($,R,x),ye=()=>{Z($,()=>{ce(),pe&&pe()})};ie?ie($,ce,ye):ye()}else r($,R,x)},qe=(C,R,x,B=!1,q=!1)=>{const{type:$,props:X,ref:W,children:K,dynamicChildren:H,shapeFlag:le,patchFlag:Z,dirs:ie,cacheIndex:pe}=C;if(Z===-2&&(q=!1),W!=null&&La(W,null,x,C,!0),pe!=null&&(R.renderCache[pe]=void 0),le&256){R.ctx.deactivate(C);return}const ce=le&1&&ie,ye=!Gi(C);let Ae;if(ye&&(Ae=X&&X.onVnodeBeforeUnmount)&&gn(Ae,R,C),le&6)Lt(C.component,x,B);else{if(le&128){C.suspense.unmount(x,B);return}ce&&zr(C,null,R,"beforeUnmount"),le&64?C.type.remove(C,R,x,ne,B):H&&!H.hasOnce&&($!==nt||Z>0&&Z&64)?ht(H,R,x,!1,!0):($===nt&&Z&384||!q&&le&16)&&ht(K,R,x),B&&Fe(C)}(ye&&(Ae=X&&X.onVnodeUnmounted)||ce)&&Ht(()=>{Ae&&gn(Ae,R,C),ce&&zr(C,null,R,"unmounted")},x)},Fe=C=>{const{type:R,el:x,anchor:B,transition:q}=C;if(R===nt){pn(x,B);return}if(R===wa){O(C);return}const $=()=>{s(x),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(C.shapeFlag&1&&q&&!q.persisted){const{leave:X,delayLeave:W}=q,K=()=>X(x,$);W?W(C.el,$,K):K()}else $()},pn=(C,R)=>{let x;for(;C!==R;)x=g(C),s(C),C=x;s(R)},Lt=(C,R,x)=>{const{bum:B,scope:q,job:$,subTree:X,um:W,m:K,a:H}=C;Cf(K),Cf(H),B&&ya(B),q.stop(),$&&($.flags|=8,qe(X,C,R,x)),W&&Ht(W,R),Ht(()=>{C.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},ht=(C,R,x,B=!1,q=!1,$=0)=>{for(let X=$;X<C.length;X++)qe(C[X],R,x,B,q)},F=C=>{if(C.shapeFlag&6)return F(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const R=g(C.anchor||C.el),x=R&&R[wT];return x?g(x):R};let Y=!1;const G=(C,R,x)=>{C==null?R._vnode&&qe(R._vnode,null,null,!0):k(R._vnode||null,C,R,null,null,null,x),R._vnode=C,Y||(Y=!0,vf(),n_(),Y=!1)},ne={p:k,um:qe,m:ut,r:Fe,mt:ee,mc:y,pc:ve,pbc:b,n:F,o:t};return{render:G,hydrate:void 0,createApp:jT(G)}}function wc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Hr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function YT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function x_(t,e,n=!1){const r=t.children,s=e.children;if(ae(r)&&ae(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=dr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&x_(o,a)),a.type===El&&(a.el=o.el)}}function XT(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function N_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:N_(e)}function Cf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ZT=Symbol.for("v-scx"),e0=()=>nn(ZT);function Hn(t,e,n){return D_(t,e,n)}function D_(t,e,n=$e){const{immediate:r,deep:s,flush:i,once:o}=n,a=ct({},n),c=e&&r||!e&&i!=="post";let u;if(fo){if(i==="sync"){const _=e0();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!c){const _=()=>{};return _.stop=Tn,_.resume=Tn,_.pause=Tn,_}}const h=mt;a.call=(_,A,k)=>cn(_,h,A,k);let f=!1;i==="post"?a.scheduler=_=>{Ht(_,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(_,A)=>{A?_():hh(_)}),a.augmentJob=_=>{e&&(_.flags|=4),f&&(_.flags|=2,h&&(_.id=h.uid,_.i=h))};const g=mT(t,e,a);return fo&&(u?u.push(g):c&&g()),g}function t0(t,e,n){const r=this.proxy,s=Je(t)?t.includes(".")?O_(r,t):()=>r[t]:t.bind(r,r);let i;me(e)?i=e:(i=e.handler,n=e);const o=ko(this),a=D_(s,i.bind(r),n);return o(),a}function O_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const n0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${sn(e)}Modifiers`]||t[`${as(e)}Modifiers`];function r0(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||$e;let s=n;const i=e.startsWith("update:"),o=i&&n0(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Je(h)?h.trim():h)),o.number&&(s=n.map(Da)));let a,c=r[a=fc(e)]||r[a=fc(sn(e))];!c&&i&&(c=r[a=fc(as(e))]),c&&cn(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,cn(u,t,6,s)}}function V_(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!me(t)){const c=u=>{const h=V_(u,e,!0);h&&(a=!0,ct(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(je(t)&&r.set(t,null),null):(ae(i)?i.forEach(c=>o[c]=null):ct(o,i),je(t)&&r.set(t,o),o)}function wl(t,e){return!t||!dl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(t,e[0].toLowerCase()+e.slice(1))||Ne(t,as(e))||Ne(t,e))}function Rf(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:h,props:f,data:g,setupState:_,ctx:A,inheritAttrs:k}=t,P=Ma(t);let N,V;try{if(n.shapeFlag&4){const O=s||r,J=O;N=wn(u.call(J,O,h,f,_,g,A)),V=a}else{const O=e;N=wn(O.length>1?O(f,{attrs:a,slots:o,emit:c}):O(f,null)),V=e.props?a:s0(a)}}catch(O){Qi.length=0,_l(O,t,1),N=Ze(Ut)}let M=N;if(V&&k!==!1){const O=Object.keys(V),{shapeFlag:J}=M;O.length&&J&7&&(i&&O.some(Zu)&&(V=i0(V,i)),M=Cr(M,V,!1,!0))}return n.dirs&&(M=Cr(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&co(M,n.transition),N=M,Ma(P),N}const s0=t=>{let e;for(const n in t)(n==="class"||n==="style"||dl(n))&&((e||(e={}))[n]=t[n]);return e},i0=(t,e)=>{const n={};for(const r in t)(!Zu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function o0(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?kf(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const g=h[f];if(o[g]!==r[g]&&!wl(u,g))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?kf(r,o,u):!0:!!o;return!1}function kf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!wl(n,i))return!0}return!1}function a0({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const M_=t=>t.__isSuspense;function l0(t,e){e&&e.pendingBranch?ae(t)?e.effects.push(...t):e.effects.push(t):vT(t)}const nt=Symbol.for("v-fgt"),El=Symbol.for("v-txt"),Ut=Symbol.for("v-cmt"),wa=Symbol.for("v-stc"),Qi=[];let Gt=null;function re(t=!1){Qi.push(Gt=t?null:[])}function c0(){Qi.pop(),Gt=Qi[Qi.length-1]||null}let uo=1;function Pf(t,e=!1){uo+=t,t<0&&Gt&&e&&(Gt.hasOnce=!0)}function L_(t){return t.dynamicChildren=uo>0?Gt||Ns:null,c0(),uo>0&&Gt&&Gt.push(t),t}function se(t,e,n,r,s,i){return L_(m(t,e,n,r,s,i,!0))}function ho(t,e,n,r,s){return L_(Ze(t,e,n,r,s,!0))}function Ua(t){return t?t.__v_isVNode===!0:!1}function Jr(t,e){return t.type===e.type&&t.key===e.key}const F_=({key:t})=>t??null,Ea=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Je(t)||kt(t)||me(t)?{i:$t,r:t,k:e,f:!!n}:t:null);function m(t,e=null,n=null,r=0,s=null,i=t===nt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&F_(e),ref:e&&Ea(e),scopeId:s_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:$t};return a?(fh(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Je(n)?8:16),uo>0&&!o&&Gt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Gt.push(c),c}const Ze=u0;function u0(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===__)&&(t=Ut),Ua(t)){const a=Cr(t,e,!0);return n&&fh(a,n),uo>0&&!i&&Gt&&(a.shapeFlag&6?Gt[Gt.indexOf(t)]=a:Gt.push(a)),a.patchFlag=-2,a}if(T0(t)&&(t=t.__vccOpts),e){e=h0(e);let{class:a,style:c}=e;a&&!Je(a)&&(e.class=He(a)),je(c)&&(ch(c)&&!ae(c)&&(c=ct({},c)),e.style=oi(c))}const o=Je(t)?1:M_(t)?128:i_(t)?64:je(t)?4:me(t)?2:0;return m(t,e,n,r,s,o,i,!0)}function h0(t){return t?ch(t)||I_(t)?ct({},t):t:null}function Cr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,u=e?d0(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&F_(u),ref:e&&e.ref?n&&i?ae(i)?i.concat(Ea(e)):[i,Ea(e)]:Ea(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Cr(t.ssContent),ssFallback:t.ssFallback&&Cr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&co(h,c.clone(h)),h}function et(t=" ",e=0){return Ze(El,null,t,e)}function Ba(t,e){const n=Ze(wa,null,t);return n.staticCount=e,n}function lt(t="",e=!1){return e?(re(),ho(Ut,null,t)):Ze(Ut,null,t)}function wn(t){return t==null||typeof t=="boolean"?Ze(Ut):ae(t)?Ze(nt,null,t.slice()):Ua(t)?dr(t):Ze(El,null,String(t))}function dr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Cr(t)}function fh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ae(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),fh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!I_(e)?e._ctx=$t:s===3&&$t&&($t.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else me(e)?(e={default:e,_ctx:$t},n=32):(e=String(e),r&64?(n=16,e=[et(e)]):n=8);t.children=e,t.shapeFlag|=n}function d0(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=He([e.class,r.class]));else if(s==="style")e.style=oi([e.style,r.style]);else if(dl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ae(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function gn(t,e,n,r=null){cn(t,e,7,[n,r])}const f0=E_();let p0=0;function g0(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||f0,i={uid:p0++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:S_(r,s),emitsOptions:V_(r,s),emit:null,emitted:null,propsDefaults:$e,inheritAttrs:r.inheritAttrs,ctx:$e,data:$e,props:$e,attrs:$e,slots:$e,refs:$e,setupState:$e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=r0.bind(null,i),t.ce&&t.ce(i),i}let mt=null;const m0=()=>mt||$t;let $a,yu;{const t=gl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};$a=e("__VUE_INSTANCE_SETTERS__",n=>mt=n),yu=e("__VUE_SSR_SETTERS__",n=>fo=n)}const ko=t=>{const e=mt;return $a(t),t.scope.on(),()=>{t.scope.off(),$a(e)}},xf=()=>{mt&&mt.scope.off(),$a(null)};function U_(t){return t.vnode.shapeFlag&4}let fo=!1;function _0(t,e=!1,n=!1){e&&yu(e);const{props:r,children:s}=t.vnode,i=U_(t);qT(t,r,i,e),GT(t,s,n);const o=i?y0(t,e):void 0;return e&&yu(!1),o}function y0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,VT);const{setup:r}=n;if(r){Vr();const s=t.setupContext=r.length>1?w0(t):null,i=ko(t),o=Ro(r,t,0,[t.props,s]),a=Rm(o);if(Mr(),i(),(a||t.sp)&&!Gi(t)&&d_(t),a){if(o.then(xf,xf),e)return o.then(c=>{Nf(t,c)}).catch(c=>{_l(c,t,0)});t.asyncDep=o}else Nf(t,o)}else B_(t)}function Nf(t,e,n){me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:je(e)&&(t.setupState=Zm(e)),B_(t)}function B_(t,e,n){const r=t.type;t.render||(t.render=r.render||Tn);{const s=ko(t);Vr();try{MT(t)}finally{Mr(),s()}}}const v0={get(t,e){return St(t,"get",""),t[e]}};function w0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,v0),slots:t.slots,emit:t.emit,expose:e}}function Tl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Zm(cT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Wi)return Wi[n](t)},has(e,n){return n in e||n in Wi}})):t.proxy}function E0(t,e=!0){return me(t)?t.displayName||t.name:t.name||e&&t.__name}function T0(t){return me(t)&&"__vccOpts"in t}const rt=(t,e)=>pT(t,e,fo);function ph(t,e,n){const r=arguments.length;return r===2?je(e)&&!ae(e)?Ua(e)?Ze(t,null,[e]):Ze(t,e):Ze(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ua(n)&&(n=[n]),Ze(t,e,n))}const b0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vu;const Df=typeof window<"u"&&window.trustedTypes;if(Df)try{vu=Df.createPolicy("vue",{createHTML:t=>t})}catch{}const $_=vu?t=>vu.createHTML(t):t=>t,I0="http://www.w3.org/2000/svg",A0="http://www.w3.org/1998/Math/MathML",Un=typeof document<"u"?document:null,Of=Un&&Un.createElement("template"),S0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Un.createElementNS(I0,t):e==="mathml"?Un.createElementNS(A0,t):n?Un.createElement(t,{is:n}):Un.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Un.createTextNode(t),createComment:t=>Un.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Un.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Of.innerHTML=$_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Of.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ir="transition",Pi="animation",po=Symbol("_vtc"),j_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},C0=ct({},o_,j_),R0=t=>(t.displayName="Transition",t.props=C0,t),k0=R0((t,{slots:e})=>ph(bT,P0(t),e)),Kr=(t,e=[])=>{ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},Vf=t=>t?ae(t)?t.some(e=>e.length>1):t.length>1:!1;function P0(t){const e={};for(const I in t)I in j_||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,A=x0(s),k=A&&A[0],P=A&&A[1],{onBeforeEnter:N,onEnter:V,onEnterCancelled:M,onLeave:O,onLeaveCancelled:J,onBeforeAppear:U=N,onAppear:T=V,onAppearCancelled:y=M}=e,v=(I,E,ee,Le)=>{I._enterCancelled=Le,Gr(I,E?h:a),Gr(I,E?u:o),ee&&ee()},b=(I,E)=>{I._isLeaving=!1,Gr(I,f),Gr(I,_),Gr(I,g),E&&E()},S=I=>(E,ee)=>{const Le=I?T:V,Ve=()=>v(E,I,ee);Kr(Le,[E,Ve]),Mf(()=>{Gr(E,I?c:i),Ln(E,I?h:a),Vf(Le)||Lf(E,r,k,Ve)})};return ct(e,{onBeforeEnter(I){Kr(N,[I]),Ln(I,i),Ln(I,o)},onBeforeAppear(I){Kr(U,[I]),Ln(I,c),Ln(I,u)},onEnter:S(!1),onAppear:S(!0),onLeave(I,E){I._isLeaving=!0;const ee=()=>b(I,E);Ln(I,f),I._enterCancelled?(Ln(I,g),Bf()):(Bf(),Ln(I,g)),Mf(()=>{I._isLeaving&&(Gr(I,f),Ln(I,_),Vf(O)||Lf(I,r,P,ee))}),Kr(O,[I,ee])},onEnterCancelled(I){v(I,!1,void 0,!0),Kr(M,[I])},onAppearCancelled(I){v(I,!0,void 0,!0),Kr(y,[I])},onLeaveCancelled(I){b(I),Kr(J,[I])}})}function x0(t){if(t==null)return null;if(je(t))return[Ec(t.enter),Ec(t.leave)];{const e=Ec(t);return[e,e]}}function Ec(t){return VE(t)}function Ln(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[po]||(t[po]=new Set)).add(e)}function Gr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[po];n&&(n.delete(e),n.size||(t[po]=void 0))}function Mf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let N0=0;function Lf(t,e,n,r){const s=t._endId=++N0,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=D0(t,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,g),i()},g=_=>{_.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),t.addEventListener(u,g)}function D0(t,e){const n=window.getComputedStyle(t),r=A=>(n[A]||"").split(", "),s=r(`${ir}Delay`),i=r(`${ir}Duration`),o=Ff(s,i),a=r(`${Pi}Delay`),c=r(`${Pi}Duration`),u=Ff(a,c);let h=null,f=0,g=0;e===ir?o>0&&(h=ir,f=o,g=i.length):e===Pi?u>0&&(h=Pi,f=u,g=c.length):(f=Math.max(o,u),h=f>0?o>u?ir:Pi:null,g=h?h===ir?i.length:c.length:0);const _=h===ir&&/\b(transform|all)(,|$)/.test(r(`${ir}Property`).toString());return{type:h,timeout:f,propCount:g,hasTransform:_}}function Ff(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Uf(n)+Uf(t[r])))}function Uf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Bf(){return document.body.offsetHeight}function O0(t,e,n){const r=t[po];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const $f=Symbol("_vod"),V0=Symbol("_vsh"),M0=Symbol(""),L0=/(^|;)\s*display\s*:/;function F0(t,e,n){const r=t.style,s=Je(n);let i=!1;if(n&&!s){if(e)if(Je(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ta(r,a,"")}else for(const o in e)n[o]==null&&Ta(r,o,"");for(const o in n)o==="display"&&(i=!0),Ta(r,o,n[o])}else if(s){if(e!==n){const o=r[M0];o&&(n+=";"+o),r.cssText=n,i=L0.test(n)}}else e&&t.removeAttribute("style");$f in t&&(t[$f]=i?r.display:"",t[V0]&&(r.display="none"))}const jf=/\s*!important$/;function Ta(t,e,n){if(ae(n))n.forEach(r=>Ta(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=U0(t,e);jf.test(n)?t.setProperty(as(r),n.replace(jf,""),"important"):t[r]=n}}const qf=["Webkit","Moz","ms"],Tc={};function U0(t,e){const n=Tc[e];if(n)return n;let r=sn(e);if(r!=="filter"&&r in t)return Tc[e]=r;r=pl(r);for(let s=0;s<qf.length;s++){const i=qf[s]+r;if(i in t)return Tc[e]=i}return e}const zf="http://www.w3.org/1999/xlink";function Hf(t,e,n,r,s,i=$E(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(zf,e.slice(6,e.length)):t.setAttributeNS(zf,e,n):n==null||i&&!Nm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Pn(n)?String(n):n)}function Kf(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?$_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Nm(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function jn(t,e,n,r){t.addEventListener(e,n,r)}function B0(t,e,n,r){t.removeEventListener(e,n,r)}const Gf=Symbol("_vei");function $0(t,e,n,r,s=null){const i=t[Gf]||(t[Gf]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=j0(e);if(r){const u=i[e]=H0(r,s);jn(t,a,u,c)}else o&&(B0(t,a,o,c),i[e]=void 0)}}const Wf=/(?:Once|Passive|Capture)$/;function j0(t){let e;if(Wf.test(t)){e={};let r;for(;r=t.match(Wf);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):as(t.slice(2)),e]}let bc=0;const q0=Promise.resolve(),z0=()=>bc||(q0.then(()=>bc=0),bc=Date.now());function H0(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;cn(K0(r,n.value),e,5,[r])};return n.value=t,n.attached=z0(),n}function K0(t,e){if(ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Qf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,G0=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?O0(t,r,o):e==="style"?F0(t,n,r):dl(e)?Zu(e)||$0(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):W0(t,e,r,o))?(Kf(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Hf(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Je(r))?Kf(t,sn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Hf(t,e,r,o))};function W0(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Qf(e)&&me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Qf(e)&&Je(n)?!1:e in t}const Rr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ae(e)?n=>ya(e,n):e};function Q0(t){t.target.composing=!0}function Jf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rn=Symbol("_assign"),Xe={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[rn]=Rr(s);const i=r||s.props&&s.props.type==="number";jn(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Da(a)),t[rn](a)}),n&&jn(t,"change",()=>{t.value=t.value.trim()}),e||(jn(t,"compositionstart",Q0),jn(t,"compositionend",Jf),jn(t,"change",Jf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[rn]=Rr(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Da(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},Ji={deep:!0,created(t,e,n){t[rn]=Rr(n),jn(t,"change",()=>{const r=t._modelValue,s=qs(t),i=t.checked,o=t[rn];if(ae(r)){const a=nh(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const u=[...r];u.splice(a,1),o(u)}}else if(ii(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(q_(t,i))})},mounted:Yf,beforeUpdate(t,e,n){t[rn]=Rr(n),Yf(t,e,n)}};function Yf(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(ae(e))s=nh(e,r.props.value)>-1;else if(ii(e))s=e.has(r.props.value);else{if(e===n)return;s=Zr(e,q_(t,!0))}t.checked!==s&&(t.checked=s)}const J0={created(t,{value:e},n){t.checked=Zr(e,n.props.value),t[rn]=Rr(n),jn(t,"change",()=>{t[rn](qs(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[rn]=Rr(r),e!==n&&(t.checked=Zr(e,r.props.value))}},fr={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=ii(e);jn(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Da(qs(o)):qs(o));t[rn](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,uh(()=>{t._assigning=!1})}),t[rn]=Rr(r)},mounted(t,{value:e}){Xf(t,e)},beforeUpdate(t,e,n){t[rn]=Rr(n)},updated(t,{value:e}){t._assigning||Xf(t,e)}};function Xf(t,e){const n=t.multiple,r=ae(e);if(!(n&&!r&&!ii(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=qs(o);if(n)if(r){const c=typeof a;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=nh(e,a)>-1}else o.selected=e.has(a);else if(Zr(qs(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function qs(t){return"_value"in t?t._value:t.value}function q_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Y0={created(t,e,n){aa(t,e,n,null,"created")},mounted(t,e,n){aa(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){aa(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){aa(t,e,n,r,"updated")}};function X0(t,e){switch(t){case"SELECT":return fr;case"TEXTAREA":return Xe;default:switch(e){case"checkbox":return Ji;case"radio":return J0;default:return Xe}}}function aa(t,e,n,r,s){const o=X0(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}const Z0=["ctrl","shift","alt","meta"],eb={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Z0.some(n=>t[`${n}Key`]&&!e.includes(n))},go=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=eb[e[o]];if(a&&a(s,e))return}return t(s,...i)})},tb=ct({patchProp:G0},S0);let Zf;function nb(){return Zf||(Zf=QT(tb))}const rb=(...t)=>{const e=nb().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=ib(r);if(!s)return;const i=e._component;!me(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,sb(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function sb(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ib(t){return Je(t)?document.querySelector(t):t}function ob(){return z_().__VUE_DEVTOOLS_GLOBAL_HOOK__}function z_(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const ab=typeof Proxy=="function",lb="devtools-plugin:setup",cb="plugin:settings:set";let ws,wu;function ub(){var t;return ws!==void 0||(typeof window<"u"&&window.performance?(ws=!0,wu=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(ws=!0,wu=globalThis.perf_hooks.performance):ws=!1),ws}function hb(){return ub()?wu.now():Date.now()}class db{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return hb()}},n&&n.on(cb,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:a,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function fb(t,e){const n=t,r=z_(),s=ob(),i=ab&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(lb,t,e);else{const o=i?new db(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ss=typeof document<"u";function H_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function pb(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&H_(t.default)}const xe=Object.assign;function Ic(t,e){const n={};for(const r in e){const s=e[r];n[r]=un(s)?s.map(t):t(s)}return n}const Yi=()=>{},un=Array.isArray,K_=/#/g,gb=/&/g,mb=/\//g,_b=/=/g,yb=/\?/g,G_=/\+/g,vb=/%5B/g,wb=/%5D/g,W_=/%5E/g,Eb=/%60/g,Q_=/%7B/g,Tb=/%7C/g,J_=/%7D/g,bb=/%20/g;function gh(t){return encodeURI(""+t).replace(Tb,"|").replace(vb,"[").replace(wb,"]")}function Ib(t){return gh(t).replace(Q_,"{").replace(J_,"}").replace(W_,"^")}function Eu(t){return gh(t).replace(G_,"%2B").replace(bb,"+").replace(K_,"%23").replace(gb,"%26").replace(Eb,"`").replace(Q_,"{").replace(J_,"}").replace(W_,"^")}function Ab(t){return Eu(t).replace(_b,"%3D")}function Sb(t){return gh(t).replace(K_,"%23").replace(yb,"%3F")}function Cb(t){return t==null?"":Sb(t).replace(mb,"%2F")}function mo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Rb=/\/$/,kb=t=>t.replace(Rb,"");function Ac(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Db(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:mo(o)}}function Pb(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ep(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function xb(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&zs(e.matched[r],n.matched[s])&&Y_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function zs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Y_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Nb(t[n],e[n]))return!1;return!0}function Nb(t,e){return un(t)?tp(t,e):un(e)?tp(e,t):t===e}function tp(t,e){return un(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Db(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const or={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var _o;(function(t){t.pop="pop",t.push="push"})(_o||(_o={}));var Xi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Xi||(Xi={}));function Ob(t){if(!t)if(Ss){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),kb(t)}const Vb=/^[^#]+#/;function Mb(t,e){return t.replace(Vb,"#")+e}function Lb(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const bl=()=>({left:window.scrollX,top:window.scrollY});function Fb(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=Lb(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function np(t,e){return(history.state?history.state.position-e:-1)+t}const Tu=new Map;function Ub(t,e){Tu.set(t,e)}function Bb(t){const e=Tu.get(t);return Tu.delete(t),e}let $b=()=>location.protocol+"//"+location.host;function X_(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),ep(c,"")}return ep(n,t)+r+s}function jb(t,e,n,r){let s=[],i=[],o=null;const a=({state:g})=>{const _=X_(t,location),A=n.value,k=e.value;let P=0;if(g){if(n.value=_,e.value=g,o&&o===A){o=null;return}P=k?g.position-k.position:0}else r(_);s.forEach(N=>{N(n.value,A,{delta:P,type:_o.pop,direction:P?P>0?Xi.forward:Xi.back:Xi.unknown})})};function c(){o=n.value}function u(g){s.push(g);const _=()=>{const A=s.indexOf(g);A>-1&&s.splice(A,1)};return i.push(_),_}function h(){const{history:g}=window;g.state&&g.replaceState(xe({},g.state,{scroll:bl()}),"")}function f(){for(const g of i)g();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function rp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?bl():null}}function qb(t){const{history:e,location:n}=window,r={value:X_(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const f=t.indexOf("#"),g=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:$b()+t+c;try{e[h?"replaceState":"pushState"](u,"",g),s.value=u}catch(_){console.error(_),n[h?"replace":"assign"](g)}}function o(c,u){const h=xe({},e.state,rp(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,h,!0),r.value=c}function a(c,u){const h=xe({},s.value,e.state,{forward:c,scroll:bl()});i(h.current,h,!0);const f=xe({},rp(r.value,c,null),{position:h.position+1},u);i(c,f,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function zb(t){t=Ob(t);const e=qb(t),n=jb(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=xe({location:"",base:t,go:r,createHref:Mb.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Hb(t){return typeof t=="string"||t&&typeof t=="object"}function Z_(t){return typeof t=="string"||typeof t=="symbol"}const ey=Symbol("");var sp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(sp||(sp={}));function Hs(t,e){return xe(new Error,{type:t,[ey]:!0},e)}function Fn(t,e){return t instanceof Error&&ey in t&&(e==null||!!(t.type&e))}const ip="[^/]+?",Kb={sensitive:!1,strict:!1,start:!0,end:!0},Gb=/[.+*?^${}()[\]/\\]/g;function Wb(t,e){const n=xe({},Kb,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const g=u[f];let _=40+(n.sensitive?.25:0);if(g.type===0)f||(s+="/"),s+=g.value.replace(Gb,"\\$&"),_+=40;else if(g.type===1){const{value:A,repeatable:k,optional:P,regexp:N}=g;i.push({name:A,repeatable:k,optional:P});const V=N||ip;if(V!==ip){_+=10;try{new RegExp(`(${V})`)}catch(O){throw new Error(`Invalid custom RegExp for param "${A}" (${V}): `+O.message)}}let M=k?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;f||(M=P&&u.length<2?`(?:/${M})`:"/"+M),P&&(M+="?"),s+=M,_+=20,P&&(_+=-8),k&&(_+=-20),V===".*"&&(_+=-50)}h.push(_)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let g=1;g<h.length;g++){const _=h[g]||"",A=i[g-1];f[A.name]=_&&A.repeatable?_.split("/"):_}return f}function c(u){let h="",f=!1;for(const g of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const _ of g)if(_.type===0)h+=_.value;else if(_.type===1){const{value:A,repeatable:k,optional:P}=_,N=A in u?u[A]:"";if(un(N)&&!k)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const V=un(N)?N.join("/"):N;if(!V)if(P)g.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${A}"`);h+=V}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function Qb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function ty(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Qb(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(op(r))return 1;if(op(s))return-1}return s.length-r.length}function op(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Jb={type:0,value:""},Yb=/[a-zA-Z0-9_]/;function Xb(t){if(!t)return[[]];if(t==="/")return[[Jb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",h="";function f(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function g(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),n=1):g();break;case 4:g(),n=r;break;case 1:c==="("?n=2:Yb.test(c)?g():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}function Zb(t,e,n){const r=Wb(Xb(t.path),n),s=xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function eI(t,e){const n=[],r=new Map;e=up({strict:!1,end:!0,sensitive:!1},e);function s(f){return r.get(f)}function i(f,g,_){const A=!_,k=lp(f);k.aliasOf=_&&_.record;const P=up(e,f),N=[k];if("alias"in f){const O=typeof f.alias=="string"?[f.alias]:f.alias;for(const J of O)N.push(lp(xe({},k,{components:_?_.record.components:k.components,path:J,aliasOf:_?_.record:k})))}let V,M;for(const O of N){const{path:J}=O;if(g&&J[0]!=="/"){const U=g.record.path,T=U[U.length-1]==="/"?"":"/";O.path=g.record.path+(J&&T+J)}if(V=Zb(O,g,P),_?_.alias.push(V):(M=M||V,M!==V&&M.alias.push(V),A&&f.name&&!cp(V)&&o(f.name)),ny(V)&&c(V),k.children){const U=k.children;for(let T=0;T<U.length;T++)i(U[T],V,_&&_.children[T])}_=_||V}return M?()=>{o(M)}:Yi}function o(f){if(Z_(f)){const g=r.get(f);g&&(r.delete(f),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(f);g>-1&&(n.splice(g,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const g=rI(f,n);n.splice(g,0,f),f.record.name&&!cp(f)&&r.set(f.record.name,f)}function u(f,g){let _,A={},k,P;if("name"in f&&f.name){if(_=r.get(f.name),!_)throw Hs(1,{location:f});P=_.record.name,A=xe(ap(g.params,_.keys.filter(M=>!M.optional).concat(_.parent?_.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),f.params&&ap(f.params,_.keys.map(M=>M.name))),k=_.stringify(A)}else if(f.path!=null)k=f.path,_=n.find(M=>M.re.test(k)),_&&(A=_.parse(k),P=_.record.name);else{if(_=g.name?r.get(g.name):n.find(M=>M.re.test(g.path)),!_)throw Hs(1,{location:f,currentLocation:g});P=_.record.name,A=xe({},g.params,f.params),k=_.stringify(A)}const N=[];let V=_;for(;V;)N.unshift(V.record),V=V.parent;return{name:P,path:k,params:A,matched:N,meta:nI(N)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function ap(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function lp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:tI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function tI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function cp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function nI(t){return t.reduce((e,n)=>xe(e,n.meta),{})}function up(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function rI(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;ty(t,e[i])<0?r=i:n=i+1}const s=sI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function sI(t){let e=t;for(;e=e.parent;)if(ny(e)&&ty(t,e)===0)return e}function ny({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function iI(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(G_," "),o=i.indexOf("="),a=mo(o<0?i:i.slice(0,o)),c=o<0?null:mo(i.slice(o+1));if(a in e){let u=e[a];un(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function hp(t){let e="";for(let n in t){const r=t[n];if(n=Ab(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(un(r)?r.map(i=>i&&Eu(i)):[r&&Eu(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function oI(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=un(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const aI=Symbol(""),dp=Symbol(""),Il=Symbol(""),mh=Symbol(""),bu=Symbol("");function xi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function pr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const u=g=>{g===!1?c(Hs(4,{from:n,to:e})):g instanceof Error?c(g):Hb(g)?c(Hs(2,{from:e,to:g})):(o&&r.enterCallbacks[s]===o&&typeof g=="function"&&o.push(g),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(g=>c(g))})}function Sc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(H_(c)){const h=(c.__vccOpts||c)[e];h&&i.push(pr(h,n,r,o,a,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=pb(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const _=(f.__vccOpts||f)[e];return _&&pr(_,n,r,o,a,s)()}))}}return i}function fp(t){const e=nn(Il),n=nn(mh),r=rt(()=>{const c=Vs(t.to);return e.resolve(c)}),s=rt(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],f=n.matched;if(!h||!f.length)return-1;const g=f.findIndex(zs.bind(null,h));if(g>-1)return g;const _=pp(c[u-2]);return u>1&&pp(h)===_&&f[f.length-1].path!==_?f.findIndex(zs.bind(null,c[u-2])):g}),i=rt(()=>s.value>-1&&dI(n.params,r.value.params)),o=rt(()=>s.value>-1&&s.value===n.matched.length-1&&Y_(n.params,r.value.params));function a(c={}){if(hI(c)){const u=e[Vs(t.replace)?"replace":"push"](Vs(t.to)).catch(Yi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:rt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function lI(t){return t.length===1?t[0]:t}const cI=h_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fp,setup(t,{slots:e}){const n=Co(fp(t)),{options:r}=nn(Il),s=rt(()=>({[gp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[gp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&lI(e.default(n));return t.custom?i:ph("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),uI=cI;function hI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function dI(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!un(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function pp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const gp=(t,e,n)=>t??e??n,fI=h_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=nn(bu),s=rt(()=>t.route||r.value),i=nn(dp,0),o=rt(()=>{let u=Vs(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=rt(()=>s.value.matched[o.value]);va(dp,rt(()=>o.value+1)),va(aI,a),va(bu,s);const c=he();return Hn(()=>[c.value,a.value,t.name],([u,h,f],[g,_,A])=>{h&&(h.instances[f]=u,_&&_!==h&&u&&u===g&&(h.leaveGuards.size||(h.leaveGuards=_.leaveGuards),h.updateGuards.size||(h.updateGuards=_.updateGuards))),u&&h&&(!_||!zs(h,_)||!g)&&(h.enterCallbacks[f]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,f=a.value,g=f&&f.components[h];if(!g)return mp(n.default,{Component:g,route:u});const _=f.props[h],A=_?_===!0?u.params:typeof _=="function"?_(u):_:null,P=ph(g,xe({},A,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return mp(n.default,{Component:P,route:u})||P}}});function mp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const pI=fI;function gI(t){const e=eI(t.routes,t),n=t.parseQuery||iI,r=t.stringifyQuery||hp,s=t.history,i=xi(),o=xi(),a=xi(),c=uT(or);let u=or;Ss&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ic.bind(null,F=>""+F),f=Ic.bind(null,Cb),g=Ic.bind(null,mo);function _(F,Y){let G,ne;return Z_(F)?(G=e.getRecordMatcher(F),ne=Y):ne=F,e.addRoute(ne,G)}function A(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function N(F,Y){if(Y=xe({},Y||c.value),typeof F=="string"){const x=Ac(n,F,Y.path),B=e.resolve({path:x.path},Y),q=s.createHref(x.fullPath);return xe(x,B,{params:g(B.params),hash:mo(x.hash),redirectedFrom:void 0,href:q})}let G;if(F.path!=null)G=xe({},F,{path:Ac(n,F.path,Y.path).path});else{const x=xe({},F.params);for(const B in x)x[B]==null&&delete x[B];G=xe({},F,{params:f(x)}),Y.params=f(Y.params)}const ne=e.resolve(G,Y),Ce=F.hash||"";ne.params=h(g(ne.params));const C=Pb(r,xe({},F,{hash:Ib(Ce),path:ne.path})),R=s.createHref(C);return xe({fullPath:C,hash:Ce,query:r===hp?oI(F.query):F.query||{}},ne,{redirectedFrom:void 0,href:R})}function V(F){return typeof F=="string"?Ac(n,F,c.value.path):xe({},F)}function M(F,Y){if(u!==F)return Hs(8,{from:Y,to:F})}function O(F){return T(F)}function J(F){return O(xe(V(F),{replace:!0}))}function U(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ne=typeof G=="function"?G(F):G;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=V(ne):{path:ne},ne.params={}),xe({query:F.query,hash:F.hash,params:ne.path!=null?{}:F.params},ne)}}function T(F,Y){const G=u=N(F),ne=c.value,Ce=F.state,C=F.force,R=F.replace===!0,x=U(G);if(x)return T(xe(V(x),{state:typeof x=="object"?xe({},Ce,x.state):Ce,force:C,replace:R}),Y||G);const B=G;B.redirectedFrom=Y;let q;return!C&&xb(r,ne,G)&&(q=Hs(16,{to:B,from:ne}),ut(ne,ne,!0,!1)),(q?Promise.resolve(q):b(B,ne)).catch($=>Fn($)?Fn($,2)?$:Nt($):ve($,B,ne)).then($=>{if($){if(Fn($,2))return T(xe({replace:R},V($.to),{state:typeof $.to=="object"?xe({},Ce,$.to.state):Ce,force:C}),Y||B)}else $=I(B,ne,!0,R,Ce);return S(B,ne,$),$})}function y(F,Y){const G=M(F,Y);return G?Promise.reject(G):Promise.resolve()}function v(F){const Y=pn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function b(F,Y){let G;const[ne,Ce,C]=mI(F,Y);G=Sc(ne.reverse(),"beforeRouteLeave",F,Y);for(const x of ne)x.leaveGuards.forEach(B=>{G.push(pr(B,F,Y))});const R=y.bind(null,F,Y);return G.push(R),ht(G).then(()=>{G=[];for(const x of i.list())G.push(pr(x,F,Y));return G.push(R),ht(G)}).then(()=>{G=Sc(Ce,"beforeRouteUpdate",F,Y);for(const x of Ce)x.updateGuards.forEach(B=>{G.push(pr(B,F,Y))});return G.push(R),ht(G)}).then(()=>{G=[];for(const x of C)if(x.beforeEnter)if(un(x.beforeEnter))for(const B of x.beforeEnter)G.push(pr(B,F,Y));else G.push(pr(x.beforeEnter,F,Y));return G.push(R),ht(G)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),G=Sc(C,"beforeRouteEnter",F,Y,v),G.push(R),ht(G))).then(()=>{G=[];for(const x of o.list())G.push(pr(x,F,Y));return G.push(R),ht(G)}).catch(x=>Fn(x,8)?x:Promise.reject(x))}function S(F,Y,G){a.list().forEach(ne=>v(()=>ne(F,Y,G)))}function I(F,Y,G,ne,Ce){const C=M(F,Y);if(C)return C;const R=Y===or,x=Ss?history.state:{};G&&(ne||R?s.replace(F.fullPath,xe({scroll:R&&x&&x.scroll},Ce)):s.push(F.fullPath,Ce)),c.value=F,ut(F,Y,G,R),Nt()}let E;function ee(){E||(E=s.listen((F,Y,G)=>{if(!Lt.listening)return;const ne=N(F),Ce=U(ne);if(Ce){T(xe(Ce,{replace:!0,force:!0}),ne).catch(Yi);return}u=ne;const C=c.value;Ss&&Ub(np(C.fullPath,G.delta),bl()),b(ne,C).catch(R=>Fn(R,12)?R:Fn(R,2)?(T(xe(V(R.to),{force:!0}),ne).then(x=>{Fn(x,20)&&!G.delta&&G.type===_o.pop&&s.go(-1,!1)}).catch(Yi),Promise.reject()):(G.delta&&s.go(-G.delta,!1),ve(R,ne,C))).then(R=>{R=R||I(ne,C,!1),R&&(G.delta&&!Fn(R,8)?s.go(-G.delta,!1):G.type===_o.pop&&Fn(R,20)&&s.go(-1,!1)),S(ne,C,R)}).catch(Yi)}))}let Le=xi(),Ve=xi(),Te;function ve(F,Y,G){Nt(F);const ne=Ve.list();return ne.length?ne.forEach(Ce=>Ce(F,Y,G)):console.error(F),Promise.reject(F)}function xt(){return Te&&c.value!==or?Promise.resolve():new Promise((F,Y)=>{Le.add([F,Y])})}function Nt(F){return Te||(Te=!F,ee(),Le.list().forEach(([Y,G])=>F?G(F):Y()),Le.reset()),F}function ut(F,Y,G,ne){const{scrollBehavior:Ce}=t;if(!Ss||!Ce)return Promise.resolve();const C=!G&&Bb(np(F.fullPath,0))||(ne||!G)&&history.state&&history.state.scroll||null;return uh().then(()=>Ce(F,Y,C)).then(R=>R&&Fb(R)).catch(R=>ve(R,F,Y))}const qe=F=>s.go(F);let Fe;const pn=new Set,Lt={currentRoute:c,listening:!0,addRoute:_,removeRoute:A,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:N,options:t,push:O,replace:J,go:qe,back:()=>qe(-1),forward:()=>qe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ve.add,isReady:xt,install(F){const Y=this;F.component("RouterLink",uI),F.component("RouterView",pI),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Vs(c)}),Ss&&!Fe&&c.value===or&&(Fe=!0,O(s.location).catch(Ce=>{}));const G={};for(const Ce in or)Object.defineProperty(G,Ce,{get:()=>c.value[Ce],enumerable:!0});F.provide(Il,Y),F.provide(mh,Jm(G)),F.provide(bu,c);const ne=F.unmount;pn.add(F),F.unmount=function(){pn.delete(F),pn.size<1&&(u=or,E&&E(),E=null,c.value=or,Fe=!1,Te=!1),ne()}}};function ht(F){return F.reduce((Y,G)=>Y.then(()=>v(G)),Promise.resolve())}return Lt}function mI(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>zs(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>zs(u,c))||s.push(c))}return[n,r,s]}function Al(){return nn(Il)}function _I(t){return nn(mh)}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var ry="store";function Sl(t){return t===void 0&&(t=null),nn(t!==null?t:ry)}function ai(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function yI(t){return t!==null&&typeof t=="object"}function vI(t){return t&&typeof t.then=="function"}function wI(t,e){return function(){return t(e)}}function sy(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function iy(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Cl(t,n,[],t._modules.root,!0),_h(t,n,e)}function _h(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},a={},c=qE(!0);c.run(function(){ai(i,function(u,h){o[h]=wI(u,t),a[h]=rt(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return a[h].value},enumerable:!0})})}),t._state=Co({data:e}),t._scope=c,t.strict&&AI(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function Cl(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var a=yh(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){a[c]=r.state})}var u=r.context=EI(t,o,n);r.forEachMutation(function(h,f){var g=o+f;TI(t,g,h,u)}),r.forEachAction(function(h,f){var g=h.root?f:o+f,_=h.handler||h;bI(t,g,_,u)}),r.forEachGetter(function(h,f){var g=o+f;II(t,g,h,u)}),r.forEachChild(function(h,f){Cl(t,e,n.concat(f),h,s)})}function EI(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,a){var c=ja(i,o,a),u=c.payload,h=c.options,f=c.type;return(!h||!h.root)&&(f=e+f),t.dispatch(f,u)},commit:r?t.commit:function(i,o,a){var c=ja(i,o,a),u=c.payload,h=c.options,f=c.type;(!h||!h.root)&&(f=e+f),t.commit(f,u,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return oy(t,e)}},state:{get:function(){return yh(t.state,n)}}}),s}function oy(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function TI(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function bI(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return vI(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):a})}function II(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function AI(t){Hn(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function yh(t,e){return e.reduce(function(n,r){return n[r]},t)}function ja(t,e,n){return yI(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var SI="vuex bindings",_p="vuex:mutations",Cc="vuex:actions",Es="vuex",CI=0;function RI(t,e){fb({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[SI]},function(n){n.addTimelineLayer({id:_p,label:"Vuex Mutations",color:yp}),n.addTimelineLayer({id:Cc,label:"Vuex Actions",color:yp}),n.addInspector({id:Es,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Es)if(r.filter){var s=[];uy(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[cy(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Es){var s=r.nodeId;oy(e,s),r.state=xI(DI(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Es){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Es),n.sendInspectorState(Es),n.addTimelineEvent({layerId:_p,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=CI++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Cc,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Cc,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var yp=8702998,kI=6710886,PI=16777215,ay={label:"namespaced",textColor:PI,backgroundColor:kI};function ly(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function cy(t,e){return{id:e||"root",label:ly(e),tags:t.namespaced?[ay]:[],children:Object.keys(t._children).map(function(n){return cy(t._children[n],e+n+"/")})}}function uy(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[ay]:[]}),Object.keys(e._children).forEach(function(s){uy(t,e._children[s],n,r+s+"/")})}function xI(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=NI(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?ly(o):o,editable:!1,value:Iu(function(){return i[o]})}})}return s}function NI(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=Iu(function(){return t[n]})}else e[n]=Iu(function(){return t[n]})}),e}function DI(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function Iu(t){try{return t()}catch(e){return e}}var dn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},hy={namespaced:{configurable:!0}};hy.namespaced.get=function(){return!!this._rawModule.namespaced};dn.prototype.addChild=function(e,n){this._children[e]=n};dn.prototype.removeChild=function(e){delete this._children[e]};dn.prototype.getChild=function(e){return this._children[e]};dn.prototype.hasChild=function(e){return e in this._children};dn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};dn.prototype.forEachChild=function(e){ai(this._children,e)};dn.prototype.forEachGetter=function(e){this._rawModule.getters&&ai(this._rawModule.getters,e)};dn.prototype.forEachAction=function(e){this._rawModule.actions&&ai(this._rawModule.actions,e)};dn.prototype.forEachMutation=function(e){this._rawModule.mutations&&ai(this._rawModule.mutations,e)};Object.defineProperties(dn.prototype,hy);var cs=function(e){this.register([],e,!1)};cs.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};cs.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};cs.prototype.update=function(e){dy([],this.root,e)};cs.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new dn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&ai(n.modules,function(a,c){s.register(e.concat(c),a,r)})};cs.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};cs.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function dy(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;dy(t.concat(r),e.getChild(r),n.modules[r])}}function OI(t){return new qt(t)}var qt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new cs(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this,c=a.dispatch,u=a.commit;this.dispatch=function(g,_){return c.call(o,g,_)},this.commit=function(g,_,A){return u.call(o,g,_,A)},this.strict=s;var h=this._modules.root.state;Cl(this,h,[],this._modules.root),_h(this,h),r.forEach(function(f){return f(n)})},vh={state:{configurable:!0}};qt.prototype.install=function(e,n){e.provide(n||ry,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&RI(e,this)};vh.state.get=function(){return this._state.data};vh.state.set=function(t){};qt.prototype.commit=function(e,n,r){var s=this,i=ja(e,n,r),o=i.type,a=i.payload,c={type:o,payload:a},u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};qt.prototype.dispatch=function(e,n){var r=this,s=ja(e,n),i=s.type,o=s.payload,a={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,r.state)})}catch{}var u=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,f){u.then(function(g){try{r._actionSubscribers.filter(function(_){return _.after}).forEach(function(_){return _.after(a,r.state)})}catch{}h(g)},function(g){try{r._actionSubscribers.filter(function(_){return _.error}).forEach(function(_){return _.error(a,r.state,g)})}catch{}f(g)})})}};qt.prototype.subscribe=function(e,n){return sy(e,this._subscribers,n)};qt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return sy(r,this._actionSubscribers,n)};qt.prototype.watch=function(e,n,r){var s=this;return Hn(function(){return e(s.state,s.getters)},n,Object.assign({},r))};qt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};qt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Cl(this,this.state,e,this._modules.get(e),r.preserveState),_h(this,this.state)};qt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=yh(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),iy(this)};qt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};qt.prototype.hotUpdate=function(e){this._modules.update(e),iy(this,!0)};qt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(qt.prototype,vh);const fn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},VI={setup(){const t=_I(),e=Al(),n=Sl(),r=he(localStorage.getItem("sidebarCollapsed")==="true"),s=he(localStorage.getItem("darkMode")==="true"),i=he(!1),o=he([{type:"info",title:"Bienvenue",message:"Bienvenue sur Tools, votre bote  outils en ligne !",time:"Aujourd'hui"},{type:"success",title:"Connexion russie",message:"Vous tes maintenant connect  votre compte.",time:"Aujourd'hui"}]),a=[{name:"Dashboard",path:"/",icon:"fas fa-home"},{name:"Liens",path:"/links",icon:"fas fa-link"},{name:"Markdown",path:"/markdown",icon:"fas fa-file-alt"},{name:"QR Code",path:"/qrcode",icon:"fas fa-qrcode"},{name:"Convertisseur",path:"/converter",icon:"fas fa-exchange-alt"},{name:"Calculatrice",path:"/calculator",icon:"fas fa-calculator"},{name:"Paramtres",path:"/settings",icon:"fas fa-cogs"}],c=rt(()=>{const O=a.find(J=>J.path===t.path);return O?O.name:"Dashboard"}),u=rt(()=>n.getters.isLoggedIn),h=rt(()=>{var O;return((O=n.state.user)==null?void 0:O.email)||"Utilisateur"}),f=rt(()=>o.value.length),g=()=>{r.value=!r.value,localStorage.setItem("sidebarCollapsed",r.value.toString())},_=()=>{s.value=!s.value,localStorage.setItem("darkMode",s.value.toString()),A(),window.dispatchEvent(new CustomEvent("theme-changed",{detail:{isDarkMode:s.value}}))},A=()=>{s.value?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")},k=()=>{i.value=!i.value},P=O=>{o.value.splice(O,1)},N=()=>{o.value=[],i.value=!1},V=O=>{switch(O){case"info":return"fas fa-info-circle";case"success":return"fas fa-check-circle";case"warning":return"fas fa-exclamation-triangle";case"error":return"fas fa-times-circle";default:return"fas fa-bell"}},M=async()=>{try{await n.dispatch("logout"),e.push("/login")}catch(O){console.error("Erreur lors de la dconnexion:",O)}};return ls(()=>{if(A(),localStorage.getItem("darkMode")===null){const U=window.matchMedia("(prefers-color-scheme: dark)").matches;s.value=U,localStorage.setItem("darkMode",U.toString()),A()}const O=localStorage.getItem("colorTheme");if(O){const U={blue:{primary:"#4361ee",secondary:"#3f37c9"},purple:{primary:"#8b5cf6",secondary:"#7c3aed"},green:{primary:"#10b981",secondary:"#059669"},red:{primary:"#ef4444",secondary:"#dc2626"},orange:{primary:"#f59e0b",secondary:"#d97706"}};U[O]&&(document.documentElement.style.setProperty("--primary-color",U[O].primary),document.documentElement.style.setProperty("--secondary-color",U[O].secondary))}const J=localStorage.getItem("fontSize");J&&(document.documentElement.style.fontSize=`${J}%`),window.addEventListener("theme-changed",U=>{U.detail&&typeof U.detail.isDarkMode=="boolean"&&(s.value=U.detail.isDarkMode)})}),Hn(s,()=>{A()}),{store:n,sidebarCollapsed:r,isDarkMode:s,tools:a,userEmail:h,currentPageTitle:c,isLoggedIn:u,notifications:o,notificationCount:f,notificationsOpen:i,toggleSidebar:g,toggleTheme:_,logout:M,toggleNotifications:k,dismissNotification:P,clearAllNotifications:N,getNotificationIcon:V}}},MI={key:0},LI={class:"sidebar"},FI={class:"sidebar-header"},UI={class:"sidebar-nav"},BI={class:"nav-text"},$I={class:"sidebar-footer"},jI={class:"nav-text"},qI={class:"user-profile"},zI={class:"user-info"},HI={class:"username"},KI={class:"main-content"},GI={class:"top-bar"},WI={class:"page-title"},QI={class:"top-actions"},JI={key:0,class:"notification-badge"},YI={class:"content-wrapper"},XI={key:0,class:"notifications-menu"},ZI={class:"notifications-header"},eA={class:"notifications-list"},tA={key:0,class:"empty-notification"},nA={class:"notification-content"},rA={class:"notification-title"},sA={class:"notification-message"},iA={class:"notification-time"},oA=["onClick"],aA={class:"notifications-footer"},lA={key:1,class:"auth-layout"},cA={key:1,class:"loading-screen"};function uA(t,e,n,r,s,i){const o=js("router-link"),a=js("router-view");return r.store.state.authIsReady?(re(),se("div",MI,[r.isLoggedIn?(re(),se("div",{key:0,class:He(["app-container",{"sidebar-collapsed":r.sidebarCollapsed}])},[m("aside",LI,[m("div",FI,[e[7]||(e[7]=m("i",{class:"fas fa-tools logo-icon"},null,-1)),e[8]||(e[8]=m("h1",{class:"app-title"},"Tools",-1)),m("button",{class:"toggle-sidebar",onClick:e[0]||(e[0]=(...c)=>r.toggleSidebar&&r.toggleSidebar(...c)),"aria-label":"Toggle Sidebar"},[m("i",{class:He(r.sidebarCollapsed?"fas fa-angle-right":"fas fa-angle-left")},null,2)])]),m("nav",UI,[(re(!0),se(nt,null,bn(r.tools,c=>(re(),ho(o,{key:c.path,to:c.path,class:"nav-link"},{default:En(()=>[m("i",{class:He(c.icon)},null,2),m("span",BI,Ee(c.name),1)]),_:2},1032,["to"]))),128))]),m("div",$I,[m("button",{class:"theme-toggle",onClick:e[1]||(e[1]=(...c)=>r.toggleTheme&&r.toggleTheme(...c))},[m("i",{class:He(r.isDarkMode?"fas fa-sun":"fas fa-moon")},null,2),m("span",jI,Ee(r.isDarkMode?"Mode clair":"Mode sombre"),1)]),m("div",qI,[e[10]||(e[10]=m("i",{class:"fas fa-user-circle avatar-icon"},null,-1)),m("div",zI,[m("span",HI,Ee(r.userEmail),1),m("button",{class:"logout-btn",onClick:e[2]||(e[2]=(...c)=>r.logout&&r.logout(...c))},e[9]||(e[9]=[m("i",{class:"fas fa-sign-out-alt"},null,-1),et(" Dconnexion ")]))])])])]),m("main",KI,[m("header",GI,[m("div",WI,[m("h2",null,Ee(r.currentPageTitle),1)]),m("div",QI,[Ze(o,{to:"/settings",class:"action-btn",title:"Paramtres"},{default:En(()=>e[11]||(e[11]=[m("i",{class:"fas fa-cog"},null,-1)])),_:1}),m("button",{class:"action-btn notification-btn",onClick:e[3]||(e[3]=(...c)=>r.toggleNotifications&&r.toggleNotifications(...c)),title:"Notifications"},[e[12]||(e[12]=m("i",{class:"fas fa-bell"},null,-1)),r.notificationCount?(re(),se("span",JI,Ee(r.notificationCount),1)):lt("",!0)])])]),m("div",YI,[Ze(a,null,{default:En(({Component:c})=>[Ze(k0,{name:"fade",mode:"out-in"},{default:En(()=>[(re(),ho(OT(c)))]),_:2},1024)]),_:1})])]),r.notificationsOpen?(re(),se("div",XI,[m("div",ZI,[e[14]||(e[14]=m("h3",null,"Notifications",-1)),m("button",{onClick:e[4]||(e[4]=(...c)=>r.toggleNotifications&&r.toggleNotifications(...c)),class:"close-btn"},e[13]||(e[13]=[m("i",{class:"fas fa-times"},null,-1)]))]),m("div",eA,[r.notifications.length===0?(re(),se("div",tA,e[15]||(e[15]=[m("i",{class:"fas fa-bell-slash"},null,-1),m("p",null,"Aucune notification",-1)]))):(re(!0),se(nt,{key:1},bn(r.notifications,(c,u)=>(re(),se("div",{key:u,class:"notification-item"},[m("div",{class:He(["notification-icon",c.type])},[m("i",{class:He(r.getNotificationIcon(c.type))},null,2)],2),m("div",nA,[m("div",rA,Ee(c.title),1),m("div",sA,Ee(c.message),1),m("div",iA,Ee(c.time),1)]),m("button",{onClick:h=>r.dismissNotification(u),class:"notification-dismiss"},e[16]||(e[16]=[m("i",{class:"fas fa-times"},null,-1)]),8,oA)]))),128))]),m("div",aA,[m("button",{onClick:e[5]||(e[5]=(...c)=>r.clearAllNotifications&&r.clearAllNotifications(...c)),class:"clear-all-btn"}," Effacer tout ")])])):lt("",!0),r.notificationsOpen?(re(),se("div",{key:1,class:"overlay",onClick:e[6]||(e[6]=(...c)=>r.toggleNotifications&&r.toggleNotifications(...c))})):lt("",!0)],2)):(re(),se("div",lA,[Ze(a)]))])):(re(),se("div",cA,e[17]||(e[17]=[m("div",{class:"loader"},null,-1),m("p",null,"Chargement...",-1)])))}const hA=fn(VI,[["render",uA]]),dA=()=>{};var vp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},py={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let g=(a&15)<<2|u>>6,_=u&63;c||(_=64,o||(g=64)),r.push(n[h],n[f],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new pA;const g=i<<2|a>>4;if(r.push(g),u!==64){const _=a<<4&240|u>>2;if(r.push(_),f!==64){const A=u<<6&192|f;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gA=function(t){const e=fy(t);return py.encodeByteArray(e,!0)},qa=function(t){return gA(t).replace(/\./g,"")},gy=function(t){try{return py.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=()=>mA().__FIREBASE_DEFAULTS__,yA=()=>{if(typeof process>"u"||typeof vp>"u")return;const t=vp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gy(t[1]);return e&&JSON.parse(e)},Rl=()=>{try{return dA()||_A()||yA()||vA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},my=t=>{var e,n;return(n=(e=Rl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wA=t=>{const e=my(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_y=()=>{var t;return(t=Rl())===null||t===void 0?void 0:t.config},yy=t=>{var e;return(e=Rl())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qa(JSON.stringify(n)),qa(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function IA(){var t;const e=(t=Rl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RA(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kA(){return!IA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="FirebaseError";class Zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NA,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Po.prototype.create)}}class Po{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?DA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Zn(s,a,r)}}function DA(t,e){return t.replace(OA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const OA=/\{\$([^}]+)}/g;function VA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gn(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(wp(i)&&wp(o)){if(!Gn(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function wp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Li(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MA(t,e){const n=new LA(t,e);return n.subscribe.bind(n)}class LA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Rc),s.error===void 0&&(s.error=Rc),s.complete===void 0&&(s.complete=Rc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){return t.endsWith(".cloudworkstations.dev")}async function vy(t){return(await fetch(t,{credentials:"include"})).ok}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($A(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BA(t){return t===Qr?void 0:t}function $A(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const qA={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},zA=be.INFO,HA={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},KA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=HA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wh{constructor(e){this.name=e,this._logLevel=zA,this._logHandler=KA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const GA=(t,e)=>e.some(n=>t instanceof n);let Ep,Tp;function WA(){return Ep||(Ep=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QA(){return Tp||(Tp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wy=new WeakMap,Au=new WeakMap,Ey=new WeakMap,kc=new WeakMap,Eh=new WeakMap;function JA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Tr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wy.set(n,t)}).catch(()=>{}),Eh.set(e,t),e}function YA(t){if(Au.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Au.set(t,e)}let Su={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Au.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ey.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XA(t){Su=t(Su)}function ZA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pc(this),e,...n);return Ey.set(r,e.sort?e.sort():[e]),Tr(r)}:QA().includes(t)?function(...e){return t.apply(Pc(this),e),Tr(wy.get(this))}:function(...e){return Tr(t.apply(Pc(this),e))}}function e1(t){return typeof t=="function"?ZA(t):(t instanceof IDBTransaction&&YA(t),GA(t,WA())?new Proxy(t,Su):t)}function Tr(t){if(t instanceof IDBRequest)return JA(t);if(kc.has(t))return kc.get(t);const e=e1(t);return e!==t&&(kc.set(t,e),Eh.set(e,t)),e}const Pc=t=>Eh.get(t);function t1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Tr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Tr(o.result),c.oldVersion,c.newVersion,Tr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const n1=["get","getKey","getAll","getAllKeys","count"],r1=["put","add","delete","clear"],xc=new Map;function bp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xc.get(e))return xc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=r1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||n1.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return xc.set(e,i),i}XA(t=>({...t,get:(e,n,r)=>bp(e,n)||t.get(e,n,r),has:(e,n)=>!!bp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cu="@firebase/app",Ip="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new wh("@firebase/app"),o1="@firebase/app-compat",a1="@firebase/analytics-compat",l1="@firebase/analytics",c1="@firebase/app-check-compat",u1="@firebase/app-check",h1="@firebase/auth",d1="@firebase/auth-compat",f1="@firebase/database",p1="@firebase/data-connect",g1="@firebase/database-compat",m1="@firebase/functions",_1="@firebase/functions-compat",y1="@firebase/installations",v1="@firebase/installations-compat",w1="@firebase/messaging",E1="@firebase/messaging-compat",T1="@firebase/performance",b1="@firebase/performance-compat",I1="@firebase/remote-config",A1="@firebase/remote-config-compat",S1="@firebase/storage",C1="@firebase/storage-compat",R1="@firebase/firestore",k1="@firebase/vertexai",P1="@firebase/firestore-compat",x1="firebase",N1="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="[DEFAULT]",D1={[Cu]:"fire-core",[o1]:"fire-core-compat",[l1]:"fire-analytics",[a1]:"fire-analytics-compat",[u1]:"fire-app-check",[c1]:"fire-app-check-compat",[h1]:"fire-auth",[d1]:"fire-auth-compat",[f1]:"fire-rtdb",[p1]:"fire-data-connect",[g1]:"fire-rtdb-compat",[m1]:"fire-fn",[_1]:"fire-fn-compat",[y1]:"fire-iid",[v1]:"fire-iid-compat",[w1]:"fire-fcm",[E1]:"fire-fcm-compat",[T1]:"fire-perf",[b1]:"fire-perf-compat",[I1]:"fire-rc",[A1]:"fire-rc-compat",[S1]:"fire-gcs",[C1]:"fire-gcs-compat",[R1]:"fire-fst",[P1]:"fire-fst-compat",[k1]:"fire-vertex","fire-js":"fire-js",[x1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new Map,O1=new Map,ku=new Map;function Ap(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ks(t){const e=t.name;if(ku.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;ku.set(e,t);for(const n of za.values())Ap(n,t);for(const n of O1.values())Ap(n,t);return!0}function Th(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new Po("app","Firebase",V1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=N1;function Ty(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ru,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw br.create("bad-app-name",{appName:String(s)});if(n||(n=_y()),!n)throw br.create("no-options");const i=za.get(s);if(i){if(Gn(n,i.options)&&Gn(r,i.config))return i;throw br.create("duplicate-app",{appName:s})}const o=new jA(s);for(const c of ku.values())o.addComponent(c);const a=new M1(n,r,o);return za.set(s,a),a}function by(t=Ru){const e=za.get(t);if(!e&&t===Ru&&_y())return Ty();if(!e)throw br.create("no-app",{appName:t});return e}function Ir(t,e,n){var r;let s=(r=D1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(a.join(" "));return}Ks(new ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="firebase-heartbeat-database",F1=1,yo="firebase-heartbeat-store";let Nc=null;function Iy(){return Nc||(Nc=t1(L1,F1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yo)}catch(n){console.warn(n)}}}}).catch(t=>{throw br.create("idb-open",{originalErrorMessage:t.message})})),Nc}async function U1(t){try{const n=(await Iy()).transaction(yo),r=await n.objectStore(yo).get(Ay(t));return await n.done,r}catch(e){if(e instanceof Zn)Wn.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wn.warn(n.message)}}}async function Sp(t,e){try{const r=(await Iy()).transaction(yo,"readwrite");await r.objectStore(yo).put(e,Ay(t)),await r.done}catch(n){if(n instanceof Zn)Wn.warn(n.message);else{const r=br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wn.warn(r.message)}}}function Ay(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=1024,$1=30;class j1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Cp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>$1){const o=H1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cp(),{heartbeatsToSend:r,unsentEntries:s}=q1(this._heartbeatsCache.heartbeats),i=qa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Wn.warn(n),""}}}function Cp(){return new Date().toISOString().substring(0,10)}function q1(t,e=B1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await U1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rp(t){return qa(JSON.stringify({version:2,heartbeats:t})).length}function H1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t){Ks(new ts("platform-logger",e=>new s1(e),"PRIVATE")),Ks(new ts("heartbeat",e=>new j1(e),"PRIVATE")),Ir(Cu,Ip,t),Ir(Cu,Ip,"esm2017"),Ir("fire-js","")}K1("");var G1="firebase",W1="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(G1,W1,"app");function bh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Sy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q1=Sy,Cy=new Po("auth","Firebase",Sy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=new wh("@firebase/auth");function J1(t,...e){Ha.logLevel<=be.WARN&&Ha.warn(`Auth (${li}): ${t}`,...e)}function ba(t,...e){Ha.logLevel<=be.ERROR&&Ha.error(`Auth (${li}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,...e){throw Ih(t,...e)}function In(t,...e){return Ih(t,...e)}function Ry(t,e,n){const r=Object.assign(Object.assign({},Q1()),{[e]:n});return new Po("auth","Firebase",r).create(e,{appName:t.name})}function Kn(t){return Ry(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ih(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Cy.create(t,...e)}function de(t,e,...n){if(!t)throw Ih(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ba(e),new Error(e)}function Qn(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Y1(){return kp()==="http:"||kp()==="https:"}function kp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y1()||SA()||"connection"in navigator)?navigator.onLine:!0}function Z1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=bA()||CA()}get(){return X1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nS=new No(3e4,6e4);function er(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Dn(t,e,n,r,s={}){return Py(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=xo(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return AA()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&kl(t.emulatorConfig.host)&&(u.credentials="include"),ky.fetch()(await xy(t,t.config.apiHost,n,a),u)})}async function Py(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},eS),e);try{const s=new sS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw la(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw la(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw la(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw la(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ry(t,h,u);hn(t,h)}}catch(s){if(s instanceof Zn)throw s;hn(t,"network-request-failed",{message:String(s)})}}async function Do(t,e,n,r,s={}){const i=await Dn(t,e,n,r,s);return"mfaPendingCredential"in i&&hn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function xy(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Ah(t.config,s):`${t.config.apiScheme}://${s}`;return tS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function rS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(In(this.auth,"network-request-failed")),nS.get())})}}function la(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=In(t,e,r);return s.customData._tokenResponse=n,s}function Pp(t){return t!==void 0&&t.enterprise!==void 0}class iS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oS(t,e){return Dn(t,"GET","/v2/recaptchaConfig",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(t,e){return Dn(t,"POST","/v1/accounts:delete",e)}async function Ka(t,e){return Dn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lS(t,e=!1){const n=yt(t),r=await n.getIdToken(e),s=Sh(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Zi(Dc(s.auth_time)),issuedAtTime:Zi(Dc(s.iat)),expirationTime:Zi(Dc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Dc(t){return Number(t)*1e3}function Sh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ba("JWT malformed, contained fewer than 3 sections"),null;try{const s=gy(n);return s?JSON.parse(s):(ba("Failed to decode base64 JWT payload"),null)}catch(s){return ba("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function xp(t){const e=Sh(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zn&&cS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zi(this.lastLoginAt),this.creationTime=Zi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Gs(t,Ka(n,{idToken:r}));de(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ny(i.providerUserInfo):[],a=dS(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new xu(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function hS(t){const e=yt(t);await Ga(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ny(t){return t.map(e=>{var{providerId:n}=e,r=bh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(t,e){const n=await Py(t,{},async()=>{const r=xo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await xy(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ky.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pS(t,e){return Dn(t,"POST","/v2/accounts:revokeToken",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=xp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Fs;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fs,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class an{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=bh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Gs(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lS(this,e)}reload(){return hS(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new an(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ga(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xt(this.auth.app))return Promise.reject(Kn(this.auth));const e=await this.getIdToken();return await Gs(this,aS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,N=(u=n.createdAt)!==null&&u!==void 0?u:void 0,V=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:M,emailVerified:O,isAnonymous:J,providerData:U,stsTokenManager:T}=n;de(M&&T,e,"internal-error");const y=Fs.fromJSON(this.name,T);de(typeof M=="string",e,"internal-error"),ar(f,e.name),ar(g,e.name),de(typeof O=="boolean",e,"internal-error"),de(typeof J=="boolean",e,"internal-error"),ar(_,e.name),ar(A,e.name),ar(k,e.name),ar(P,e.name),ar(N,e.name),ar(V,e.name);const v=new an({uid:M,auth:e,email:g,emailVerified:O,displayName:f,isAnonymous:J,photoURL:A,phoneNumber:_,tenantId:k,stsTokenManager:y,createdAt:N,lastLoginAt:V});return U&&Array.isArray(U)&&(v.providerData=U.map(b=>Object.assign({},b))),P&&(v._redirectEventId=P),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Fs;s.updateFromServerResponse(n);const i=new an({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ga(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];de(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ny(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Fs;a.updateFromIdToken(r);const c=new an({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new xu(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=new Map;function zn(t){Qn(t instanceof Function,"Expected a class definition");let e=Np.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Np.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Dy.type="NONE";const Dp=Dy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t,e,n){return`firebase:${t}:${e}:${n}`}class Us{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ia(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ia("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ka(this.auth,{idToken:e}).catch(()=>{});return n?an._fromGetAccountInfoResponse(this.auth,n,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Us(zn(Dp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||zn(Dp);const o=Ia(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const g=await Ka(e,{idToken:h}).catch(()=>{});if(!g)break;f=await an._fromGetAccountInfoResponse(e,g,h)}else f=an._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Us(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Us(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ly(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Oy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uy(e))return"Blackberry";if(By(e))return"Webos";if(Vy(e))return"Safari";if((e.includes("chrome/")||My(e))&&!e.includes("edge/"))return"Chrome";if(Fy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Oy(t=Pt()){return/firefox\//i.test(t)}function Vy(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function My(t=Pt()){return/crios\//i.test(t)}function Ly(t=Pt()){return/iemobile/i.test(t)}function Fy(t=Pt()){return/android/i.test(t)}function Uy(t=Pt()){return/blackberry/i.test(t)}function By(t=Pt()){return/webos/i.test(t)}function Ch(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gS(t=Pt()){var e;return Ch(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mS(){return RA()&&document.documentMode===10}function $y(t=Pt()){return Ch(t)||Fy(t)||By(t)||Uy(t)||/windows phone/i.test(t)||Ly(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t,e=[]){let n;switch(t){case"Browser":n=Op(Pt());break;case"Worker":n=`${Op(Pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${li}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e={}){return Dn(t,"GET","/v2/passwordPolicy",er(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=6;class wS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vp(this),this.idTokenSubscription=new Vp(this),this.beforeStateQueue=new _S(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Us.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ka(this,{idToken:e}),r=await an._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ga(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xt(this.app))return Promise.reject(Kn(this));const n=e?yt(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xt(this.app)?Promise.reject(Kn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xt(this.app)?Promise.reject(Kn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yS(this),n=new wS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Po("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zn(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Us.create(this,[zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&J1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lr(t){return yt(t)}class Vp{constructor(e){this.auth=e,this.observer=null,this.addObserver=MA(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TS(t){Pl=t}function qy(t){return Pl.loadJS(t)}function bS(){return Pl.recaptchaEnterpriseScript}function IS(){return Pl.gapiScript}function AS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class SS{constructor(){this.enterprise=new CS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RS="recaptcha-enterprise",zy="NO_RECAPTCHA";class kS{constructor(e){this.type=RS,this.auth=Lr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{oS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new iS(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;Pp(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(zy)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SS().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Pp(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=bS();c.length!==0&&(c+=a),qy(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Mp(t,e,n,r=!1,s=!1){const i=new kS(t);let o;if(s)o=zy;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Wa(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Mp(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Mp(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t,e){const n=Th(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Gn(i,e??{}))return s;hn(s,"already-initialized")}return n.initialize({options:e})}function xS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NS(t,e,n){const r=Lr(t);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Hy(e),{host:o,port:a}=DS(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(Gn(u,r.config.emulator)&&Gn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,OS(),kl(o)&&vy(`${i}//${o}${c}`)}function Hy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DS(t){const e=Hy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Lp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Lp(o)}}}function Lp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function VS(t,e){return Dn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(t,e){return Do(t,"POST","/v1/accounts:signInWithPassword",er(t,e))}async function LS(t,e){return Dn(t,"POST","/v1/accounts:sendOobCode",er(t,e))}async function FS(t,e){return LS(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(t,e){return Do(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))}async function BS(t,e){return Do(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Rh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new vo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new vo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wa(e,n,"signInWithPassword",MS);case"emailLink":return US(e,{email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wa(e,r,"signUpPassword",VS);case"emailLink":return BS(e,{idToken:n,email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(t,e){return Do(t,"POST","/v1/accounts:signInWithIdp",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="http://localhost";class ns extends Rh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=bh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ns(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bs(e,n)}buildRequest(){const e={requestUri:$S,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qS(t){const e=Mi(Li(t)).link,n=e?Mi(Li(e)).deep_link_id:null,r=Mi(Li(t)).deep_link_id;return(r?Mi(Li(r)).link:null)||r||n||e||t}class kh{constructor(e){var n,r,s,i,o,a;const c=Mi(Li(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=jS((s=c.mode)!==null&&s!==void 0?s:null);de(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=qS(e);try{return new kh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.providerId=ci.PROVIDER_ID}static credential(e,n){return vo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=kh.parseLink(n);return de(r,"argument-error"),vo._fromEmailAndCode(e,r.code,r.tenantId)}}ci.PROVIDER_ID="password";ci.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ci.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Ky{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Oo{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Oo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ns._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Oo{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Oo{constructor(){super("twitter.com")}static credential(e,n){return ns._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(t,e){return Do(t,"POST","/v1/accounts:signUp",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await an._fromIdTokenResponse(e,r,s),o=Fp(r);return new rs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Fp(r);return new rs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Fp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends Zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qa.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qa(e,n,r,s)}}function Gy(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qa._fromErrorAndOperation(t,i,e,r):i})}async function HS(t,e,n=!1){const r=await Gs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return rs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(t,e,n=!1){const{auth:r}=t;if(Xt(r.app))return Promise.reject(Kn(r));const s="reauthenticate";try{const i=await Gs(t,Gy(r,s,e,t),n);de(i.idToken,r,"internal-error");const o=Sh(i.idToken);de(o,r,"internal-error");const{sub:a}=o;return de(t.uid===a,r,"user-mismatch"),rs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wy(t,e,n=!1){if(Xt(t.app))return Promise.reject(Kn(t));const r="signIn",s=await Gy(t,r,e),i=await rs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function GS(t,e){return Wy(Lr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qy(t){const e=Lr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WS(t,e,n){const r=Lr(t);await Wa(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",FS)}async function QS(t,e,n){if(Xt(t.app))return Promise.reject(Kn(t));const r=Lr(t),o=await Wa(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zS).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Qy(t),c}),a=await rs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function JS(t,e,n){return Xt(t.app)?Promise.reject(Kn(t)):GS(yt(t),ci.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Qy(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(t,e){return Dn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jy(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=yt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Gs(r,YS(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function XS(t,e,n,r){return yt(t).onIdTokenChanged(e,n,r)}function ZS(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function eC(t){return yt(t).signOut()}const Ja="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ja,"1"),this.storage.removeItem(Ja),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=1e3,nC=10;class Xy extends Yy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$y(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);mS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,nC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},tC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xy.type="LOCAL";const rC=Xy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Yy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zy.type="SESSION";const ev=Zy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await sC(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=Ph("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function oC(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function aC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cC(){return tv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="firebaseLocalStorageDb",uC=1,Ya="firebaseLocalStorage",rv="fbase_key";class Vo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nl(t,e){return t.transaction([Ya],e?"readwrite":"readonly").objectStore(Ya)}function hC(){const t=indexedDB.deleteDatabase(nv);return new Vo(t).toPromise()}function Nu(){const t=indexedDB.open(nv,uC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ya,{keyPath:rv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ya)?e(r):(r.close(),await hC(),e(await Nu()))})})}async function Up(t,e,n){const r=Nl(t,!0).put({[rv]:e,value:n});return new Vo(r).toPromise()}async function dC(t,e){const n=Nl(t,!1).get(e),r=await new Vo(n).toPromise();return r===void 0?null:r.value}function Bp(t,e){const n=Nl(t,!0).delete(e);return new Vo(n).toPromise()}const fC=800,pC=3;class sv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>pC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xl._getInstance(cC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aC(),!this.activeServiceWorker)return;this.sender=new iC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nu();return await Up(e,Ja,"1"),await Bp(e,Ja),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Up(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>dC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Nl(s,!1).getAll();return new Vo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sv.type="LOCAL";const gC=sv;new No(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e){return e?zn(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends Rh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _C(t){return Wy(t.auth,new xh(t),t.bypassAuthState)}function yC(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),KS(n,new xh(t),t.bypassAuthState)}async function vC(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),HS(n,new xh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _C;case"linkViaPopup":case"linkViaRedirect":return vC;case"reauthViaPopup":case"reauthViaRedirect":return yC;default:hn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new No(2e3,1e4);class xs extends iv{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,xs.currentPopupAction&&xs.currentPopupAction.cancel(),xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=Ph();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(In(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wC.get())};e()}}xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="pendingRedirect",Aa=new Map;class TC extends iv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Aa.get(this.auth._key());if(!e){try{const r=await bC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Aa.set(this.auth._key(),e)}return this.bypassAuthState||Aa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bC(t,e){const n=SC(e),r=AC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function IC(t,e){Aa.set(t._key(),e)}function AC(t){return zn(t._redirectPersistence)}function SC(t){return Ia(EC,t.config.apiKey,t.name)}async function CC(t,e,n=!1){if(Xt(t.app))return Promise.reject(Kn(t));const r=Lr(t),s=mC(r,e),o=await new TC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=10*60*1e3;class kC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ov(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(In(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RC&&this.cachedEventUids.clear(),this.cachedEventUids.has($p(e))}saveEventToCache(e){this.cachedEventUids.add($p(e)),this.lastProcessedEventTime=Date.now()}}function $p(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ov({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ov(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e={}){return Dn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DC=/^https?/;async function OC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xC(t);for(const n of e)try{if(VC(n))return}catch{}hn(t,"unauthorized-domain")}function VC(t){const e=Pu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DC.test(n))return!1;if(NC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new No(3e4,6e4);function jp(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LC(t){return new Promise((e,n)=>{var r,s,i;function o(){jp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jp(),n(In(t,"network-request-failed"))},timeout:MC.get()})}if(!((s=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=An().gapi)===null||i===void 0)&&i.load)o();else{const a=AS("iframefcb");return An()[a]=()=>{gapi.load?o():n(In(t,"network-request-failed"))},qy(`${IS()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Sa=null,e})}let Sa=null;function FC(t){return Sa=Sa||LC(t),Sa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new No(5e3,15e3),BC="__/auth/iframe",$C="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zC(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ah(e,$C):`https://${t.config.authDomain}/${BC}`,r={apiKey:e.apiKey,appName:t.name,v:li},s=qC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${xo(r).slice(1)}`}async function HC(t){const e=await FC(t),n=An().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:zC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=In(t,"network-request-failed"),a=An().setTimeout(()=>{i(o)},UC.get());function c(){An().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GC=500,WC=600,QC="_blank",JC="http://localhost";class qp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YC(t,e,n,r=GC,s=WC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},KC),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Pt().toLowerCase();n&&(a=My(u)?QC:n),Oy(u)&&(e=e||JC,c.scrollbars="yes");const h=Object.entries(c).reduce((g,[_,A])=>`${g}${_}=${A},`,"");if(gS(u)&&a!=="_self")return XC(e||"",a),new qp(null);const f=window.open(e||"",a,h);de(f,t,"popup-blocked");try{f.focus()}catch{}return new qp(f)}function XC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="__/auth/handler",eR="emulator/auth/handler",tR=encodeURIComponent("fac");async function zp(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:li,eventId:s};if(e instanceof Ky){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",VA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Oo){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${tR}=${encodeURIComponent(c)}`:"";return`${nR(t)}?${xo(a).slice(1)}${u}`}function nR({config:t}){return t.emulator?Ah(t,eR):`https://${t.authDomain}/${ZC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="webStorageSupport";class rR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ev,this._completeRedirectFn=CC,this._overrideRedirectResult=IC}async _openPopup(e,n,r,s){var i;Qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await zp(e,n,r,Pu(),s);return YC(e,o,Ph())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await zp(e,n,r,Pu(),s);return oC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await HC(e),r=new kC(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Oc,{type:Oc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Oc];o!==void 0&&n(!!o),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $y()||Vy()||Ch()}}const sR=rR;var Hp="@firebase/auth",Kp="1.10.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aR(t){Ks(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jy(t)},u=new ES(r,s,i,c);return xS(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new ts("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(r=>new iR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(Hp,Kp,oR(t)),Ir(Hp,Kp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=5*60,cR=yy("authIdTokenMaxAge")||lR;let Gp=null;const uR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cR)return;const s=n==null?void 0:n.token;Gp!==s&&(Gp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hR(t=by()){const e=Th(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PS(t,{popupRedirectResolver:sR,persistence:[gC,rC,ev]}),r=yy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=uR(i.toString());ZS(n,o,()=>o(n.currentUser)),XS(n,a=>o(a))}}const s=my("auth");return s&&NS(n,`http://${s}`),n}function dR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=In("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aR("Browser");var Wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,av;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function v(){}v.prototype=y.prototype,T.D=y.prototype,T.prototype=new v,T.prototype.constructor=T,T.C=function(b,S,I){for(var E=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)E[ee-2]=arguments[ee];return y.prototype[S].apply(b,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,v){v||(v=0);var b=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)b[S]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(S=0;16>S;++S)b[S]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=T.g[0],v=T.g[1],S=T.g[2];var I=T.g[3],E=y+(I^v&(S^I))+b[0]+3614090360&4294967295;y=v+(E<<7&4294967295|E>>>25),E=I+(S^y&(v^S))+b[1]+3905402710&4294967295,I=y+(E<<12&4294967295|E>>>20),E=S+(v^I&(y^v))+b[2]+606105819&4294967295,S=I+(E<<17&4294967295|E>>>15),E=v+(y^S&(I^y))+b[3]+3250441966&4294967295,v=S+(E<<22&4294967295|E>>>10),E=y+(I^v&(S^I))+b[4]+4118548399&4294967295,y=v+(E<<7&4294967295|E>>>25),E=I+(S^y&(v^S))+b[5]+1200080426&4294967295,I=y+(E<<12&4294967295|E>>>20),E=S+(v^I&(y^v))+b[6]+2821735955&4294967295,S=I+(E<<17&4294967295|E>>>15),E=v+(y^S&(I^y))+b[7]+4249261313&4294967295,v=S+(E<<22&4294967295|E>>>10),E=y+(I^v&(S^I))+b[8]+1770035416&4294967295,y=v+(E<<7&4294967295|E>>>25),E=I+(S^y&(v^S))+b[9]+2336552879&4294967295,I=y+(E<<12&4294967295|E>>>20),E=S+(v^I&(y^v))+b[10]+4294925233&4294967295,S=I+(E<<17&4294967295|E>>>15),E=v+(y^S&(I^y))+b[11]+2304563134&4294967295,v=S+(E<<22&4294967295|E>>>10),E=y+(I^v&(S^I))+b[12]+1804603682&4294967295,y=v+(E<<7&4294967295|E>>>25),E=I+(S^y&(v^S))+b[13]+4254626195&4294967295,I=y+(E<<12&4294967295|E>>>20),E=S+(v^I&(y^v))+b[14]+2792965006&4294967295,S=I+(E<<17&4294967295|E>>>15),E=v+(y^S&(I^y))+b[15]+1236535329&4294967295,v=S+(E<<22&4294967295|E>>>10),E=y+(S^I&(v^S))+b[1]+4129170786&4294967295,y=v+(E<<5&4294967295|E>>>27),E=I+(v^S&(y^v))+b[6]+3225465664&4294967295,I=y+(E<<9&4294967295|E>>>23),E=S+(y^v&(I^y))+b[11]+643717713&4294967295,S=I+(E<<14&4294967295|E>>>18),E=v+(I^y&(S^I))+b[0]+3921069994&4294967295,v=S+(E<<20&4294967295|E>>>12),E=y+(S^I&(v^S))+b[5]+3593408605&4294967295,y=v+(E<<5&4294967295|E>>>27),E=I+(v^S&(y^v))+b[10]+38016083&4294967295,I=y+(E<<9&4294967295|E>>>23),E=S+(y^v&(I^y))+b[15]+3634488961&4294967295,S=I+(E<<14&4294967295|E>>>18),E=v+(I^y&(S^I))+b[4]+3889429448&4294967295,v=S+(E<<20&4294967295|E>>>12),E=y+(S^I&(v^S))+b[9]+568446438&4294967295,y=v+(E<<5&4294967295|E>>>27),E=I+(v^S&(y^v))+b[14]+3275163606&4294967295,I=y+(E<<9&4294967295|E>>>23),E=S+(y^v&(I^y))+b[3]+4107603335&4294967295,S=I+(E<<14&4294967295|E>>>18),E=v+(I^y&(S^I))+b[8]+1163531501&4294967295,v=S+(E<<20&4294967295|E>>>12),E=y+(S^I&(v^S))+b[13]+2850285829&4294967295,y=v+(E<<5&4294967295|E>>>27),E=I+(v^S&(y^v))+b[2]+4243563512&4294967295,I=y+(E<<9&4294967295|E>>>23),E=S+(y^v&(I^y))+b[7]+1735328473&4294967295,S=I+(E<<14&4294967295|E>>>18),E=v+(I^y&(S^I))+b[12]+2368359562&4294967295,v=S+(E<<20&4294967295|E>>>12),E=y+(v^S^I)+b[5]+4294588738&4294967295,y=v+(E<<4&4294967295|E>>>28),E=I+(y^v^S)+b[8]+2272392833&4294967295,I=y+(E<<11&4294967295|E>>>21),E=S+(I^y^v)+b[11]+1839030562&4294967295,S=I+(E<<16&4294967295|E>>>16),E=v+(S^I^y)+b[14]+4259657740&4294967295,v=S+(E<<23&4294967295|E>>>9),E=y+(v^S^I)+b[1]+2763975236&4294967295,y=v+(E<<4&4294967295|E>>>28),E=I+(y^v^S)+b[4]+1272893353&4294967295,I=y+(E<<11&4294967295|E>>>21),E=S+(I^y^v)+b[7]+4139469664&4294967295,S=I+(E<<16&4294967295|E>>>16),E=v+(S^I^y)+b[10]+3200236656&4294967295,v=S+(E<<23&4294967295|E>>>9),E=y+(v^S^I)+b[13]+681279174&4294967295,y=v+(E<<4&4294967295|E>>>28),E=I+(y^v^S)+b[0]+3936430074&4294967295,I=y+(E<<11&4294967295|E>>>21),E=S+(I^y^v)+b[3]+3572445317&4294967295,S=I+(E<<16&4294967295|E>>>16),E=v+(S^I^y)+b[6]+76029189&4294967295,v=S+(E<<23&4294967295|E>>>9),E=y+(v^S^I)+b[9]+3654602809&4294967295,y=v+(E<<4&4294967295|E>>>28),E=I+(y^v^S)+b[12]+3873151461&4294967295,I=y+(E<<11&4294967295|E>>>21),E=S+(I^y^v)+b[15]+530742520&4294967295,S=I+(E<<16&4294967295|E>>>16),E=v+(S^I^y)+b[2]+3299628645&4294967295,v=S+(E<<23&4294967295|E>>>9),E=y+(S^(v|~I))+b[0]+4096336452&4294967295,y=v+(E<<6&4294967295|E>>>26),E=I+(v^(y|~S))+b[7]+1126891415&4294967295,I=y+(E<<10&4294967295|E>>>22),E=S+(y^(I|~v))+b[14]+2878612391&4294967295,S=I+(E<<15&4294967295|E>>>17),E=v+(I^(S|~y))+b[5]+4237533241&4294967295,v=S+(E<<21&4294967295|E>>>11),E=y+(S^(v|~I))+b[12]+1700485571&4294967295,y=v+(E<<6&4294967295|E>>>26),E=I+(v^(y|~S))+b[3]+2399980690&4294967295,I=y+(E<<10&4294967295|E>>>22),E=S+(y^(I|~v))+b[10]+4293915773&4294967295,S=I+(E<<15&4294967295|E>>>17),E=v+(I^(S|~y))+b[1]+2240044497&4294967295,v=S+(E<<21&4294967295|E>>>11),E=y+(S^(v|~I))+b[8]+1873313359&4294967295,y=v+(E<<6&4294967295|E>>>26),E=I+(v^(y|~S))+b[15]+4264355552&4294967295,I=y+(E<<10&4294967295|E>>>22),E=S+(y^(I|~v))+b[6]+2734768916&4294967295,S=I+(E<<15&4294967295|E>>>17),E=v+(I^(S|~y))+b[13]+1309151649&4294967295,v=S+(E<<21&4294967295|E>>>11),E=y+(S^(v|~I))+b[4]+4149444226&4294967295,y=v+(E<<6&4294967295|E>>>26),E=I+(v^(y|~S))+b[11]+3174756917&4294967295,I=y+(E<<10&4294967295|E>>>22),E=S+(y^(I|~v))+b[2]+718787259&4294967295,S=I+(E<<15&4294967295|E>>>17),E=v+(I^(S|~y))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+I&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var v=y-this.blockSize,b=this.B,S=this.h,I=0;I<y;){if(S==0)for(;I<=v;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<y;)if(b[S++]=T.charCodeAt(I++),S==this.blockSize){s(this,b),S=0;break}}else for(;I<y;)if(b[S++]=T[I++],S==this.blockSize){s(this,b),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var v=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=v&255,v/=256;for(this.u(T),T=Array(16),y=v=0;4>y;++y)for(var b=0;32>b;b+=8)T[v++]=this.g[y]>>>b&255;return T};function i(T,y){var v=a;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=y(T)}function o(T,y){this.h=y;for(var v=[],b=!0,S=T.length-1;0<=S;S--){var I=T[S]|0;b&&I==y||(v[S]=I,b=!1)}this.g=v}var a={};function c(T){return-128<=T&&128>T?i(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return P(u(-T));for(var y=[],v=1,b=0;T>=v;b++)y[b]=T/v|0,v*=4294967296;return new o(y,0)}function h(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return P(h(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(y,8)),b=f,S=0;S<T.length;S+=8){var I=Math.min(8,T.length-S),E=parseInt(T.substring(S,S+I),y);8>I?(I=u(Math.pow(y,I)),b=b.j(I).add(u(E))):(b=b.j(v),b=b.add(u(E)))}return b}var f=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var T=0,y=1,v=0;v<this.g.length;v++){var b=this.i(v);T+=(0<=b?b:4294967296+b)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(k(this))return"-"+P(this).toString(T);for(var y=u(Math.pow(T,6)),v=this,b="";;){var S=O(v,y).g;v=N(v,S.j(y));var I=((0<v.g.length?v.g[0]:v.h)>>>0).toString(T);if(v=S,A(v))return I+b;for(;6>I.length;)I="0"+I;b=I+b}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function k(T){return T.h==-1}t.l=function(T){return T=N(this,T),k(T)?-1:A(T)?0:1};function P(T){for(var y=T.g.length,v=[],b=0;b<y;b++)v[b]=~T.g[b];return new o(v,~T.h).add(g)}t.abs=function(){return k(this)?P(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],b=0,S=0;S<=y;S++){var I=b+(this.i(S)&65535)+(T.i(S)&65535),E=(I>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);b=E>>>16,I&=65535,E&=65535,v[S]=E<<16|I}return new o(v,v[v.length-1]&-2147483648?-1:0)};function N(T,y){return T.add(P(y))}t.j=function(T){if(A(this)||A(T))return f;if(k(this))return k(T)?P(this).j(P(T)):P(P(this).j(T));if(k(T))return P(this.j(P(T)));if(0>this.l(_)&&0>T.l(_))return u(this.m()*T.m());for(var y=this.g.length+T.g.length,v=[],b=0;b<2*y;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var S=0;S<T.g.length;S++){var I=this.i(b)>>>16,E=this.i(b)&65535,ee=T.i(S)>>>16,Le=T.i(S)&65535;v[2*b+2*S]+=E*Le,V(v,2*b+2*S),v[2*b+2*S+1]+=I*Le,V(v,2*b+2*S+1),v[2*b+2*S+1]+=E*ee,V(v,2*b+2*S+1),v[2*b+2*S+2]+=I*ee,V(v,2*b+2*S+2)}for(b=0;b<y;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=y;b<2*y;b++)v[b]=0;return new o(v,0)};function V(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function M(T,y){this.g=T,this.h=y}function O(T,y){if(A(y))throw Error("division by zero");if(A(T))return new M(f,f);if(k(T))return y=O(P(T),y),new M(P(y.g),P(y.h));if(k(y))return y=O(T,P(y)),new M(P(y.g),y.h);if(30<T.g.length){if(k(T)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var v=g,b=y;0>=b.l(T);)v=J(v),b=J(b);var S=U(v,1),I=U(b,1);for(b=U(b,2),v=U(v,2);!A(b);){var E=I.add(b);0>=E.l(T)&&(S=S.add(v),I=E),b=U(b,1),v=U(v,1)}return y=N(T,S.j(y)),new M(S,y)}for(S=f;0<=T.l(y);){for(v=Math.max(1,Math.floor(T.m()/y.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),I=u(v),E=I.j(y);k(E)||0<E.l(T);)v-=b,I=u(v),E=I.j(y);A(I)&&(I=g),S=S.add(I),T=N(T,E)}return new M(S,T)}t.A=function(T){return O(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)&T.i(b);return new o(v,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)|T.i(b);return new o(v,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)^T.i(b);return new o(v,this.h^T.h)};function J(T){for(var y=T.g.length+1,v=[],b=0;b<y;b++)v[b]=T.i(b)<<1|T.i(b-1)>>>31;return new o(v,T.h)}function U(T,y){var v=y>>5;y%=32;for(var b=T.g.length-v,S=[],I=0;I<b;I++)S[I]=0<y?T.i(I+v)>>>y|T.i(I+v+1)<<32-y:T.i(I+v);return new o(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,av=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ar=o}).apply(typeof Wp<"u"?Wp:typeof self<"u"?self:typeof window<"u"?window:{});var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lv,Fi,cv,Ca,Du,uv,hv,dv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,p){return l==Array.prototype||l==Object.prototype||(l[d]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ca=="object"&&ca];for(var d=0;d<l.length;++d){var p=l[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var p=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var D=l[w];if(!(D in p))break e;p=p[D]}l=l[l.length-1],w=p[l],d=d(w),d!=w&&d!=null&&e(p,l,{configurable:!0,writable:!0,value:d})}}function i(l,d){l instanceof String&&(l+="");var p=0,w=!1,D={next:function(){if(!w&&p<l.length){var L=p++;return{value:d(L,l[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(l){return l||function(){return i(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,p){return l.call.apply(l.bind,arguments)}function f(l,d,p){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,w),l.apply(d,D)}}return function(){return l.apply(d,arguments)}}function g(l,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function _(l,d){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function A(l,d){function p(){}p.prototype=d.prototype,l.aa=d.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(w,D,L){for(var Q=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Q[Ue-2]=arguments[Ue];return d.prototype[D].apply(w,Q)}}function k(l){const d=l.length;if(0<d){const p=Array(d);for(let w=0;w<d;w++)p[w]=l[w];return p}return[]}function P(l,d){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(c(w)){const D=l.length||0,L=w.length||0;l.length=D+L;for(let Q=0;Q<L;Q++)l[D+Q]=w[Q]}else l.push(w)}}class N{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(l){return/^[\s\xa0]*$/.test(l)}function M(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function O(l){return O[" "](l),l}O[" "]=function(){};var J=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function U(l,d,p){for(const w in l)d.call(p,l[w],w,l)}function T(l,d){for(const p in l)d.call(void 0,l[p],p,l)}function y(l){const d={};for(const p in l)d[p]=l[p];return d}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,d){let p,w;for(let D=1;D<arguments.length;D++){w=arguments[D];for(p in w)l[p]=w[p];for(let L=0;L<v.length;L++)p=v[L],Object.prototype.hasOwnProperty.call(w,p)&&(l[p]=w[p])}}function S(l){var d=1;l=l.split(":");const p=[];for(;0<d&&l.length;)p.push(l.shift()),d--;return l.length&&p.push(l.join(":")),p}function I(l){a.setTimeout(()=>{throw l},0)}function E(){var l=xt;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ee{constructor(){this.h=this.g=null}add(d,p){const w=Le.get();w.set(d,p),this.h?this.h.next=w:this.g=w,this.h=w}}var Le=new N(()=>new Ve,l=>l.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,ve=!1,xt=new ee,Nt=()=>{const l=a.Promise.resolve(void 0);Te=()=>{l.then(ut)}};var ut=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(p){I(p)}var d=Le;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}ve=!1};function qe(){this.s=this.s,this.C=this.C}qe.prototype.s=!1,qe.prototype.ma=function(){this.s||(this.s=!0,this.N())},qe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var pn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return l}();function Lt(l,d){if(Fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(J){e:{try{O(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else p=="mouseover"?d=l.fromElement:p=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ht[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Lt.aa.h.call(this)}}A(Lt,Fe);var ht={2:"touch",3:"pen",4:"mouse"};Lt.prototype.h=function(){Lt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(l,d,p,w,D){this.listener=l,this.proxy=null,this.src=d,this.type=p,this.capture=!!w,this.ha=D,this.key=++Y,this.da=this.fa=!1}function ne(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ce(l){this.src=l,this.g={},this.h=0}Ce.prototype.add=function(l,d,p,w,D){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var Q=R(l,d,w,D);return-1<Q?(d=l[Q],p||(d.fa=!1)):(d=new G(d,this.src,L,!!w,D),d.fa=p,l.push(d)),d};function C(l,d){var p=d.type;if(p in l.g){var w=l.g[p],D=Array.prototype.indexOf.call(w,d,void 0),L;(L=0<=D)&&Array.prototype.splice.call(w,D,1),L&&(ne(d),l.g[p].length==0&&(delete l.g[p],l.h--))}}function R(l,d,p,w){for(var D=0;D<l.length;++D){var L=l[D];if(!L.da&&L.listener==d&&L.capture==!!p&&L.ha==w)return D}return-1}var x="closure_lm_"+(1e6*Math.random()|0),B={};function q(l,d,p,w,D){if(Array.isArray(d)){for(var L=0;L<d.length;L++)q(l,d[L],p,w,D);return null}return p=pe(p),l&&l[F]?l.K(d,p,u(w)?!!w.capture:!1,D):$(l,d,p,!1,w,D)}function $(l,d,p,w,D,L){if(!d)throw Error("Invalid event type");var Q=u(D)?!!D.capture:!!D,Ue=Z(l);if(Ue||(l[x]=Ue=new Ce(l)),p=Ue.add(d,p,w,Q,L),p.proxy)return p;if(w=X(),p.proxy=w,w.src=l,w.listener=p,l.addEventListener)pn||(D=Q),D===void 0&&(D=!1),l.addEventListener(d.toString(),w,D);else if(l.attachEvent)l.attachEvent(H(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function X(){function l(p){return d.call(l.src,l.listener,p)}const d=le;return l}function W(l,d,p,w,D){if(Array.isArray(d))for(var L=0;L<d.length;L++)W(l,d[L],p,w,D);else w=u(w)?!!w.capture:!!w,p=pe(p),l&&l[F]?(l=l.i,d=String(d).toString(),d in l.g&&(L=l.g[d],p=R(L,p,w,D),-1<p&&(ne(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete l.g[d],l.h--)))):l&&(l=Z(l))&&(d=l.g[d.toString()],l=-1,d&&(l=R(d,p,w,D)),(p=-1<l?d[l]:null)&&K(p))}function K(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[F])C(d.i,l);else{var p=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(p,w,l.capture):d.detachEvent?d.detachEvent(H(p),w):d.addListener&&d.removeListener&&d.removeListener(w),(p=Z(d))?(C(p,l),p.h==0&&(p.src=null,d[x]=null)):ne(l)}}}function H(l){return l in B?B[l]:B[l]="on"+l}function le(l,d){if(l.da)l=!0;else{d=new Lt(d,this);var p=l.listener,w=l.ha||l.src;l.fa&&K(l),l=p.call(w,d)}return l}function Z(l){return l=l[x],l instanceof Ce?l:null}var ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function pe(l){return typeof l=="function"?l:(l[ie]||(l[ie]=function(d){return l.handleEvent(d)}),l[ie])}function ce(){qe.call(this),this.i=new Ce(this),this.M=this,this.F=null}A(ce,qe),ce.prototype[F]=!0,ce.prototype.removeEventListener=function(l,d,p,w){W(this,l,d,p,w)};function ye(l,d){var p,w=l.F;if(w)for(p=[];w;w=w.F)p.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new Fe(d,l);else if(d instanceof Fe)d.target=d.target||l;else{var D=d;d=new Fe(w,l),b(d,D)}if(D=!0,p)for(var L=p.length-1;0<=L;L--){var Q=d.g=p[L];D=Ae(Q,w,!0,d)&&D}if(Q=d.g=l,D=Ae(Q,w,!0,d)&&D,D=Ae(Q,w,!1,d)&&D,p)for(L=0;L<p.length;L++)Q=d.g=p[L],D=Ae(Q,w,!1,d)&&D}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var p=l.g[d],w=0;w<p.length;w++)ne(p[w]);delete l.g[d],l.h--}}this.F=null},ce.prototype.K=function(l,d,p,w){return this.i.add(String(l),d,!1,p,w)},ce.prototype.L=function(l,d,p,w){return this.i.add(String(l),d,!0,p,w)};function Ae(l,d,p,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,L=0;L<d.length;++L){var Q=d[L];if(Q&&!Q.da&&Q.capture==p){var Ue=Q.listener,pt=Q.ha||Q.src;Q.fa&&C(l.i,Q),D=Ue.call(pt,w)!==!1&&D}}return D&&!w.defaultPrevented}function wt(l,d,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function dt(l){l.g=wt(()=>{l.g=null,l.i&&(l.i=!1,dt(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class Qt extends qe{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Et(l){qe.call(this),this.h=l,this.g={}}A(Et,qe);var tr=[];function mi(l){U(l.g,function(d,p){this.g.hasOwnProperty(p)&&K(d)},l),l.g={}}Et.prototype.N=function(){Et.aa.N.call(this),mi(this)},Et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=a.JSON.stringify,Jt=a.JSON.parse,$o=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Xl(){}Xl.prototype.h=null;function bd(l){return l.h||(l.h=l.i())}function Id(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zl(){Fe.call(this,"d")}A(Zl,Fe);function ec(){Fe.call(this,"c")}A(ec,Fe);var Br={},Ad=null;function jo(){return Ad=Ad||new ce}Br.La="serverreachability";function Sd(l){Fe.call(this,Br.La,l)}A(Sd,Fe);function yi(l){const d=jo();ye(d,new Sd(d))}Br.STAT_EVENT="statevent";function Cd(l,d){Fe.call(this,Br.STAT_EVENT,l),this.stat=d}A(Cd,Fe);function Dt(l){const d=jo();ye(d,new Cd(d,l))}Br.Ma="timingevent";function Rd(l,d){Fe.call(this,Br.Ma,l),this.size=d}A(Rd,Fe);function vi(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function wi(){this.g=!0}wi.prototype.xa=function(){this.g=!1};function iE(l,d,p,w,D,L){l.info(function(){if(l.g)if(L)for(var Q="",Ue=L.split("&"),pt=0;pt<Ue.length;pt++){var Re=Ue[pt].split("=");if(1<Re.length){var Tt=Re[0];Re=Re[1];var bt=Tt.split("_");Q=2<=bt.length&&bt[1]=="type"?Q+(Tt+"="+Re+"&"):Q+(Tt+"=redacted&")}}else Q=null;else Q=L;return"XMLHTTP REQ ("+w+") [attempt "+D+"]: "+d+`
`+p+`
`+Q})}function oE(l,d,p,w,D,L,Q){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+D+"]: "+d+`
`+p+`
`+L+" "+Q})}function gs(l,d,p,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+lE(l,p)+(w?" "+w:"")})}function aE(l,d){l.info(function(){return"TIMEOUT: "+d})}wi.prototype.info=function(){};function lE(l,d){if(!l.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var w=p[l];if(!(2>w.length)){var D=w[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Q=1;Q<D.length;Q++)D[Q]=""}}}}return ft(p)}catch{return d}}var qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tc;function zo(){}A(zo,Xl),zo.prototype.g=function(){return new XMLHttpRequest},zo.prototype.i=function(){return{}},tc=new zo;function nr(l,d,p,w){this.j=l,this.i=d,this.l=p,this.R=w||1,this.U=new Et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pd}function Pd(){this.i=null,this.g="",this.h=!1}var xd={},nc={};function rc(l,d,p){l.L=1,l.v=Wo(On(d)),l.m=p,l.P=!0,Nd(l,null)}function Nd(l,d){l.F=Date.now(),Ho(l),l.A=On(l.v);var p=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Kd(p.i,"t",w),l.C=0,p=l.j.J,l.h=new Pd,l.g=hf(l.j,p?d:null,!l.m),0<l.O&&(l.M=new Qt(g(l.Y,l,l.g),l.O)),d=l.U,p=l.g,w=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(tr[0]=D.toString()),D=tr);for(var L=0;L<D.length;L++){var Q=q(p,D[L],w||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),yi(),iE(l.i,l.u,l.A,l.l,l.R,l.m)}nr.prototype.ca=function(l){l=l.target;const d=this.M;d&&Vn(l)==3?d.j():this.Y(l)},nr.prototype.Y=function(l){try{if(l==this.g)e:{const bt=Vn(this.g);var d=this.g.Ba();const ys=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||Zd(this.g)))){this.J||bt!=4||d==7||(d==8||0>=ys?yi(3):yi(2)),sc(this);var p=this.g.Z();this.X=p;t:if(Dd(this)){var w=Zd(this.g);l="";var D=w.length,L=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Ei(this);var Q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(L&&d==D-1)});w.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=p==200,oE(this.i,this.u,this.A,this.l,this.R,bt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,pt=this.g;if((Ue=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Ue)){var Re=Ue;break t}}Re=null}if(p=Re)gs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ic(this,p);else{this.o=!1,this.s=3,Dt(12),$r(this),Ei(this);break e}}if(this.P){p=!0;let on;for(;!this.J&&this.C<Q.length;)if(on=cE(this,Q),on==nc){bt==4&&(this.s=4,Dt(14),p=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(on==xd){this.s=4,Dt(15),gs(this.i,this.l,Q,"[Invalid Chunk]"),p=!1;break}else gs(this.i,this.l,on,null),ic(this,on);if(Dd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||Q.length!=0||this.h.h||(this.s=1,Dt(16),p=!1),this.o=this.o&&p,!p)gs(this.i,this.l,Q,"[Invalid Chunked Response]"),$r(this),Ei(this);else if(0<Q.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),hc(Tt),Tt.M=!0,Dt(11))}}else gs(this.i,this.l,Q,null),ic(this,Q);bt==4&&$r(this),this.o&&!this.J&&(bt==4?af(this.j,this):(this.o=!1,Ho(this)))}else SE(this.g),p==400&&0<Q.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),$r(this),Ei(this)}}}catch{}finally{}};function Dd(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function cE(l,d){var p=l.C,w=d.indexOf(`
`,p);return w==-1?nc:(p=Number(d.substring(p,w)),isNaN(p)?xd:(w+=1,w+p>d.length?nc:(d=d.slice(w,w+p),l.C=w+p,d)))}nr.prototype.cancel=function(){this.J=!0,$r(this)};function Ho(l){l.S=Date.now()+l.I,Od(l,l.I)}function Od(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=vi(g(l.ba,l),d)}function sc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}nr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(aE(this.i,this.A),this.L!=2&&(yi(),Dt(17)),$r(this),this.s=2,Ei(this)):Od(this,this.S-l)};function Ei(l){l.j.G==0||l.J||af(l.j,l)}function $r(l){sc(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,mi(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function ic(l,d){try{var p=l.j;if(p.G!=0&&(p.g==l||oc(p.h,l))){if(!l.K&&oc(p.h,l)&&p.G==3){try{var w=p.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var D=w;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)ea(p),Xo(p);else break e;uc(p),Dt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=vi(g(p.Za,p),6e3));if(1>=Ld(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else qr(p,11)}else if((l.K||p.g==l)&&ea(p),!V(d))for(D=p.Da.g.parse(d),d=0;d<D.length;d++){let Re=D[d];if(p.T=Re[0],Re=Re[1],p.G==2)if(Re[0]=="c"){p.K=Re[1],p.ia=Re[2];const Tt=Re[3];Tt!=null&&(p.la=Tt,p.j.info("VER="+p.la));const bt=Re[4];bt!=null&&(p.Aa=bt,p.j.info("SVER="+p.Aa));const ys=Re[5];ys!=null&&typeof ys=="number"&&0<ys&&(w=1.5*ys,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const on=l.g;if(on){const na=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var L=w.h;L.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ac(L,L.h),L.h=null))}if(w.D){const dc=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;dc&&(w.ya=dc,Ke(w.I,w.D,dc))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var Q=l;if(w.qa=uf(w,w.J?w.ia:null,w.W),Q.K){Fd(w.h,Q);var Ue=Q,pt=w.L;pt&&(Ue.I=pt),Ue.B&&(sc(Ue),Ho(Ue)),w.g=Q}else sf(w);0<p.i.length&&Zo(p)}else Re[0]!="stop"&&Re[0]!="close"||qr(p,7);else p.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?qr(p,7):cc(p):Re[0]!="noop"&&p.l&&p.l.ta(Re),p.v=0)}}yi(4)}catch{}}var uE=class{constructor(l,d){this.g=l,this.map=d}};function Vd(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Md(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ld(l){return l.h?1:l.g?l.g.size:0}function oc(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function ac(l,d){l.g?l.g.add(d):l.h=d}function Fd(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Vd.prototype.cancel=function(){if(this.i=Ud(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ud(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const p of l.g.values())d=d.concat(p.D);return d}return k(l.i)}function hE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],p=l.length,w=0;w<p;w++)d.push(l[w]);return d}d=[],p=0;for(w in l)d[p++]=l[w];return d}function dE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var p=0;p<l;p++)d.push(p);return d}d=[],p=0;for(const w in l)d[p++]=w;return d}}}function Bd(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var p=dE(l),w=hE(l),D=w.length,L=0;L<D;L++)d.call(void 0,w[L],p&&p[L],l)}var $d=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fE(l,d){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var w=l[p].indexOf("="),D=null;if(0<=w){var L=l[p].substring(0,w);D=l[p].substring(w+1)}else L=l[p];d(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function jr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof jr){this.h=l.h,Ko(this,l.j),this.o=l.o,this.g=l.g,Go(this,l.s),this.l=l.l;var d=l.i,p=new Ii;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),jd(this,p),this.m=l.m}else l&&(d=String(l).match($d))?(this.h=!1,Ko(this,d[1]||"",!0),this.o=Ti(d[2]||""),this.g=Ti(d[3]||"",!0),Go(this,d[4]),this.l=Ti(d[5]||"",!0),jd(this,d[6]||"",!0),this.m=Ti(d[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}jr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(bi(d,qd,!0),":");var p=this.g;return(p||d=="file")&&(l.push("//"),(d=this.o)&&l.push(bi(d,qd,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(bi(p,p.charAt(0)=="/"?mE:gE,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",bi(p,yE)),l.join("")};function On(l){return new jr(l)}function Ko(l,d,p){l.j=p?Ti(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Go(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function jd(l,d,p){d instanceof Ii?(l.i=d,vE(l.i,l.h)):(p||(d=bi(d,_E)),l.i=new Ii(d,l.h))}function Ke(l,d,p){l.i.set(d,p)}function Wo(l){return Ke(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ti(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function bi(l,d,p){return typeof l=="string"?(l=encodeURI(l).replace(d,pE),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function pE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var qd=/[#\/\?@]/g,gE=/[#\?:]/g,mE=/[#\?]/g,_E=/[#\?@]/g,yE=/#/g;function Ii(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function rr(l){l.g||(l.g=new Map,l.h=0,l.i&&fE(l.i,function(d,p){l.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Ii.prototype,t.add=function(l,d){rr(this),this.i=null,l=ms(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(d),this.h+=1,this};function zd(l,d){rr(l),d=ms(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Hd(l,d){return rr(l),d=ms(l,d),l.g.has(d)}t.forEach=function(l,d){rr(this),this.g.forEach(function(p,w){p.forEach(function(D){l.call(d,D,w,this)},this)},this)},t.na=function(){rr(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let w=0;w<d.length;w++){const D=l[w];for(let L=0;L<D.length;L++)p.push(d[w])}return p},t.V=function(l){rr(this);let d=[];if(typeof l=="string")Hd(this,l)&&(d=d.concat(this.g.get(ms(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)d=d.concat(l[p])}return d},t.set=function(l,d){return rr(this),this.i=null,l=ms(this,l),Hd(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Kd(l,d,p){zd(l,d),0<p.length&&(l.i=null,l.g.set(ms(l,d),k(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var w=d[p];const L=encodeURIComponent(String(w)),Q=this.V(w);for(w=0;w<Q.length;w++){var D=L;Q[w]!==""&&(D+="="+encodeURIComponent(String(Q[w]))),l.push(D)}}return this.i=l.join("&")};function ms(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function vE(l,d){d&&!l.j&&(rr(l),l.i=null,l.g.forEach(function(p,w){var D=w.toLowerCase();w!=D&&(zd(this,w),Kd(this,D,p))},l)),l.j=d}function wE(l,d){const p=new wi;if(a.Image){const w=new Image;w.onload=_(sr,p,"TestLoadImage: loaded",!0,d,w),w.onerror=_(sr,p,"TestLoadImage: error",!1,d,w),w.onabort=_(sr,p,"TestLoadImage: abort",!1,d,w),w.ontimeout=_(sr,p,"TestLoadImage: timeout",!1,d,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function EE(l,d){const p=new wi,w=new AbortController,D=setTimeout(()=>{w.abort(),sr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(L=>{clearTimeout(D),L.ok?sr(p,"TestPingServer: ok",!0,d):sr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),sr(p,"TestPingServer: error",!1,d)})}function sr(l,d,p,w,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),w(p)}catch{}}function TE(){this.g=new $o}function bE(l,d,p){const w=p||"";try{Bd(l,function(D,L){let Q=D;u(D)&&(Q=ft(D)),d.push(w+L+"="+encodeURIComponent(Q))})}catch(D){throw d.push(w+"type="+encodeURIComponent("_badmap")),D}}function Qo(l){this.l=l.Ub||null,this.j=l.eb||!1}A(Qo,Xl),Qo.prototype.g=function(){return new Jo(this.l,this.j)},Qo.prototype.i=function(l){return function(){return l}}({});function Jo(l,d){ce.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Jo,ce),t=Jo.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Si(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gd(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gd(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Ai(this):Si(this),this.readyState==3&&Gd(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ai(this))},t.Qa=function(l){this.g&&(this.response=l,Ai(this))},t.ga=function(){this.g&&Ai(this)};function Ai(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Si(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=d.next();return l.join(`\r
`)};function Si(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Wd(l){let d="";return U(l,function(p,w){d+=w,d+=":",d+=p,d+=`\r
`}),d}function lc(l,d,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=Wd(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ke(l,d,p))}function We(l){ce.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(We,ce);var IE=/^https?$/i,AE=["POST","PUT"];t=We.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tc.g(),this.v=this.o?bd(this.o):bd(tc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(L){Qd(this,L);return}if(l=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var D in w)p.set(D,w[D]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const L of w.keys())p.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),D=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(AE,d,void 0))||w||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,Q]of p)this.g.setRequestHeader(L,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xd(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){Qd(this,L)}};function Qd(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Jd(l),Yo(l)}function Jd(l){l.A||(l.A=!0,ye(l,"complete"),ye(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ye(this,"complete"),ye(this,"abort"),Yo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yo(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yd(this):this.bb())},t.bb=function(){Yd(this)};function Yd(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Vn(l)!=4||l.Z()!=2)){if(l.u&&Vn(l)==4)wt(l.Ea,0,l);else if(ye(l,"readystatechange"),Vn(l)==4){l.h=!1;try{const Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var w;if(w=Q===0){var D=String(l.D).match($d)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),w=!IE.test(D?D.toLowerCase():"")}p=w}if(p)ye(l,"complete"),ye(l,"success");else{l.m=6;try{var L=2<Vn(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",Jd(l)}}finally{Yo(l)}}}}function Yo(l,d){if(l.g){Xd(l);const p=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ye(l,"ready");try{p.onreadystatechange=w}catch{}}}function Xd(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Jt(d)}};function Zd(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function SE(l){const d={};l=(l.g&&2<=Vn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(V(l[w]))continue;var p=S(l[w]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=d[D]||[];d[D]=L,L.push(p)}T(d,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(l,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||d}function ef(l){this.Aa=0,this.i=[],this.j=new wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,l),this.cb=Ci("retryDelaySeedMs",1e4,l),this.Wa=Ci("forwardChannelMaxRetries",2,l),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Vd(l&&l.concurrentRequestLimit),this.Da=new TE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ef.prototype,t.la=8,t.G=1,t.connect=function(l,d,p,w){Dt(0),this.W=l,this.H=d||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=uf(this,null,this.W),Zo(this)};function cc(l){if(tf(l),l.G==3){var d=l.U++,p=On(l.I);if(Ke(p,"SID",l.K),Ke(p,"RID",d),Ke(p,"TYPE","terminate"),Ri(l,p),d=new nr(l,l.j,d),d.L=2,d.v=Wo(On(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=hf(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ho(d)}cf(l)}function Xo(l){l.g&&(hc(l),l.g.cancel(),l.g=null)}function tf(l){Xo(l),l.u&&(a.clearTimeout(l.u),l.u=null),ea(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Zo(l){if(!Md(l.h)&&!l.s){l.s=!0;var d=l.Ga;Te||Nt(),ve||(Te(),ve=!0),xt.add(d,l),l.B=0}}function CE(l,d){return Ld(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=vi(g(l.Ga,l,d),lf(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new nr(this,this.j,l);let L=this.o;if(this.S&&(L?(L=y(L),b(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=rf(this,D,d),p=On(this.I),Ke(p,"RID",l),Ke(p,"CVER",22),this.D&&Ke(p,"X-HTTP-Session-Id",this.D),Ri(this,p),L&&(this.O?d="headers="+encodeURIComponent(String(Wd(L)))+"&"+d:this.m&&lc(p,this.m,L)),ac(this.h,D),this.Ua&&Ke(p,"TYPE","init"),this.P?(Ke(p,"$req",d),Ke(p,"SID","null"),D.T=!0,rc(D,p,null)):rc(D,p,d),this.G=2}}else this.G==3&&(l?nf(this,l):this.i.length==0||Md(this.h)||nf(this))};function nf(l,d){var p;d?p=d.l:p=l.U++;const w=On(l.I);Ke(w,"SID",l.K),Ke(w,"RID",p),Ke(w,"AID",l.T),Ri(l,w),l.m&&l.o&&lc(w,l.m,l.o),p=new nr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),d&&(l.i=d.D.concat(l.i)),d=rf(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ac(l.h,p),rc(p,w,d)}function Ri(l,d){l.H&&U(l.H,function(p,w){Ke(d,w,p)}),l.l&&Bd({},function(p,w){Ke(d,w,p)})}function rf(l,d,p){p=Math.min(l.i.length,p);var w=l.l?g(l.l.Na,l.l,l):null;e:{var D=l.i;let L=-1;for(;;){const Q=["count="+p];L==-1?0<p?(L=D[0].g,Q.push("ofs="+L)):L=0:Q.push("ofs="+L);let Ue=!0;for(let pt=0;pt<p;pt++){let Re=D[pt].g;const Tt=D[pt].map;if(Re-=L,0>Re)L=Math.max(0,D[pt].g-100),Ue=!1;else try{bE(Tt,Q,"req"+Re+"_")}catch{w&&w(Tt)}}if(Ue){w=Q.join("&");break e}}}return l=l.i.splice(0,p),d.D=l,w}function sf(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Te||Nt(),ve||(Te(),ve=!0),xt.add(d,l),l.v=0}}function uc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=vi(g(l.Fa,l),lf(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,of(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=vi(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Xo(this),of(this))};function hc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function of(l){l.g=new nr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=On(l.qa);Ke(d,"RID","rpc"),Ke(d,"SID",l.K),Ke(d,"AID",l.T),Ke(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ke(d,"TO",l.ja),Ke(d,"TYPE","xmlhttp"),Ri(l,d),l.m&&l.o&&lc(d,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Wo(On(d)),p.m=null,p.P=!0,Nd(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Xo(this),uc(this),Dt(19))};function ea(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function af(l,d){var p=null;if(l.g==d){ea(l),hc(l),l.g=null;var w=2}else if(oc(l.h,d))p=d.D,Fd(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var D=l.B;w=jo(),ye(w,new Rd(w,p)),Zo(l)}else sf(l);else if(D=d.s,D==3||D==0&&0<d.X||!(w==1&&CE(l,d)||w==2&&uc(l)))switch(p&&0<p.length&&(d=l.h,d.i=d.i.concat(p)),D){case 1:qr(l,5);break;case 4:qr(l,10);break;case 3:qr(l,6);break;default:qr(l,2)}}}function lf(l,d){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*d}function qr(l,d){if(l.j.info("Error code "+d),d==2){var p=g(l.fb,l),w=l.Xa;const D=!w;w=new jr(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ko(w,"https"),Wo(w),D?wE(w.toString(),p):EE(w.toString(),p)}else Dt(2);l.G=0,l.l&&l.l.sa(d),cf(l),tf(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function cf(l){if(l.G=0,l.ka=[],l.l){const d=Ud(l.h);(d.length!=0||l.i.length!=0)&&(P(l.ka,d),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function uf(l,d,p){var w=p instanceof jr?On(p):new jr(p);if(w.g!="")d&&(w.g=d+"."+w.g),Go(w,w.s);else{var D=a.location;w=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var L=new jr(null);w&&Ko(L,w),d&&(L.g=d),D&&Go(L,D),p&&(L.l=p),w=L}return p=l.D,d=l.ya,p&&d&&Ke(w,p,d),Ke(w,"VER",l.la),Ri(l,w),w}function hf(l,d,p){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new We(new Qo({eb:p})):new We(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function df(){}t=df.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ta(){}ta.prototype.g=function(l,d){return new zt(l,d)};function zt(l,d){ce.call(this),this.g=new ef(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!V(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new _s(this)}A(zt,ce),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){cc(this.g)},zt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=ft(l),l=p);d.i.push(new uE(d.Ya++,l)),d.G==3&&Zo(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,zt.aa.N.call(this)};function ff(l){Zl.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const p in d){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}A(ff,Zl);function pf(){ec.call(this),this.status=1}A(pf,ec);function _s(l){this.g=l}A(_s,df),_s.prototype.ua=function(){ye(this.g,"a")},_s.prototype.ta=function(l){ye(this.g,new ff(l))},_s.prototype.sa=function(l){ye(this.g,new pf)},_s.prototype.ra=function(){ye(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,dv=function(){return new ta},hv=function(){return jo()},uv=Br,Du={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,Ca=qo,kd.COMPLETE="complete",cv=kd,Id.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",ce.prototype.listen=ce.prototype.K,Fi=Id,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,lv=We}).apply(typeof ca<"u"?ca:typeof self<"u"?self:typeof window<"u"?window:{});const Qp="@firebase/firestore",Jp="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new wh("@firebase/firestore");function Cs(){return ss.logLevel}function te(t,...e){if(ss.logLevel<=be.DEBUG){const n=e.map(Nh);ss.debug(`Firestore (${ui}): ${t}`,...n)}}function Jn(t,...e){if(ss.logLevel<=be.ERROR){const n=e.map(Nh);ss.error(`Firestore (${ui}): ${t}`,...n)}}function Ws(t,...e){if(ss.logLevel<=be.WARN){const n=e.map(Nh);ss.warn(`Firestore (${ui}): ${t}`,...n)}}function Nh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fv(t,r,n)}function fv(t,e,n){let r=`FIRESTORE (${ui}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jn(r),new Error(r)}function De(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||fv(e,s,r)}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class pR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gR{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string",31837,{l:r}),new pv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new At(e)}}class mR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _R{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Yp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Yp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=vR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function Ou(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return we(r,s);{const i=gv(),o=wR(i.encode(Xp(t,n)),i.encode(Xp(e,n)));return o!==0?o:we(r,s)}}n+=r>65535?2:1}return we(t.length,e.length)}function Xp(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function wR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return we(t[n],e[n]);return we(t.length,e.length)}function Qs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=-62135596800,eg=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*eg);return new it(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Zp)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eg}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Zp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new it(0,0))}static max(){return new ge(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="__name__";class vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=vn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return we(e.length,n.length)}static compareSegments(e,n){const r=vn.isNumericId(e),s=vn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?vn.extractNumericId(e).compare(vn.extractNumericId(n)):Ou(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class Qe extends vn{construct(e,n,r){return new Qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const ER=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends vn{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return ER.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tg}static keyField(){return new _t([tg])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new oe(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new oe(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Qe.fromString(e))}static fromName(e){return new ue(Qe.fromString(e).popFirst(5))}static empty(){return new ue(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=-1;function TR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new kr(s,ue.empty(),e)}function bR(t){return new kr(t.readTime,t.key,wo)}class kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kr(ge.min(),ue.empty(),wo)}static max(){return new kr(ge.max(),ue.empty(),wo)}}function IR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==AR)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function CR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function di(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Dl.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=-1;function Ol(t){return t==null}function Xa(t){return t===0&&1/t==-1/0}function RR(t){return typeof t=="number"&&Number.isInteger(t)&&!Xa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="";function kR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ng(e)),e=PR(t.get(n),e);return ng(e)}function PR(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case _v:n+="";break;default:n+=i}}return n}function ng(t){return t+_v+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ua(this.root,e,this.comparator,!0)}}class ua{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??gt.RED,this.left=s??gt.EMPTY,this.right=i??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new gt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sg(this.data.getIterator())}getIteratorFrom(e){return new sg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class sg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new ot(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vv("Invalid base64 string: "+i):i}}(e);return new vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const xR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(De(!!t,39018),typeof t=="string"){let e=0;const n=xR.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xr(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="server_timestamp",Ev="__type__",Tv="__previous_value__",bv="__local_write_time__";function Oh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ev])===null||n===void 0?void 0:n.stringValue)===wv}function Vl(t){const e=t.mapValue.fields[Tv];return Oh(e)?Vl(e):e}function Eo(t){const e=Pr(t.mapValue.fields[bv].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,s,i,o,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Za="(default)";class To{constructor(e,n){this.projectId=e,this.database=n||Za}static empty(){return new To("","")}get isDefaultDatabase(){return this.database===Za}isEqual(e){return e instanceof To&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="__type__",DR="__max__",ha={mapValue:{}},Av="__vector__",el="value";function Nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oh(t)?4:VR(t)?9007199254740991:OR(t)?10:11:fe(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=Nr(t);if(n!==Nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eo(t).isEqual(Eo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Pr(s.timestampValue),a=Pr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return xr(s.bytesValue).isEqual(xr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ye(s.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ye(s.integerValue)===Ye(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ye(s.doubleValue),a=Ye(i.doubleValue);return o===a?Xa(o)===Xa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qs(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(rg(o)!==rg(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xn(o[c],a[c])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function bo(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function Js(t,e){if(t===e)return 0;const n=Nr(t),r=Nr(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ye(i.integerValue||i.doubleValue),c=Ye(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return ig(t.timestampValue,e.timestampValue);case 4:return ig(Eo(t),Eo(e));case 5:return Ou(t.stringValue,e.stringValue);case 6:return function(i,o){const a=xr(i),c=xr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=we(a[u],c[u]);if(h!==0)return h}return we(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=we(Ye(i.latitude),Ye(o.latitude));return a!==0?a:we(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return og(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const f=i.fields||{},g=o.fields||{},_=(a=f[el])===null||a===void 0?void 0:a.arrayValue,A=(c=g[el])===null||c===void 0?void 0:c.arrayValue,k=we(((u=_==null?void 0:_.values)===null||u===void 0?void 0:u.length)||0,((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:og(_,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ha.mapValue&&o===ha.mapValue)return 0;if(i===ha.mapValue)return 1;if(o===ha.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const g=Ou(c[f],h[f]);if(g!==0)return g;const _=Js(a[c[f]],u[h[f]]);if(_!==0)return _}return we(c.length,h.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{Pe:n})}}function ig(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Pr(t),r=Pr(e),s=we(n.seconds,r.seconds);return s!==0?s:we(n.nanos,r.nanos)}function og(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Js(n[s],r[s]);if(i)return i}return we(n.length,r.length)}function Ys(t){return Vu(t)}function Vu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vu(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vu(n.fields[o])}`;return s+"}"}(t.mapValue):fe(61005,{value:t})}function Ra(t){switch(Nr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vl(t);return e?16+Ra(e):16;case 5:return 2*t.stringValue.length;case 6:return xr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ra(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Fr(r.fields,(i,o)=>{s+=i.length+Ra(o)}),s}(t.mapValue);default:throw fe(13486,{value:t})}}function Mu(t){return!!t&&"integerValue"in t}function Vh(t){return!!t&&"arrayValue"in t}function ag(t){return!!t&&"nullValue"in t}function lg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ka(t){return!!t&&"mapValue"in t}function OR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Iv])===null||n===void 0?void 0:n.stringValue)===Av}function eo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ka(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eo(n)}setAll(e){let n=_t.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=eo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ka(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ka(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Bt(eo(this.value))}}function Sv(t){const e=[];return Fr(t.fields,(n,r)=>{const s=new _t([n]);if(ka(r)){const i=Sv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,ge.min(),ge.min(),ge.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,ge.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,ge.min(),ge.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,ge.min(),ge.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.position=e,this.inclusive=n}}function cg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),n.key):r=Js(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ug(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n="asc"){this.field=e,this.dir=n}}function MR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{}class st extends Cv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FR(e,n,r):n==="array-contains"?new $R(e,r):n==="in"?new jR(e,r):n==="not-in"?new qR(e,r):n==="array-contains-any"?new zR(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UR(e,r):new BR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Js(n,this.value)):n!==null&&Nr(this.value)===Nr(n)&&this.matchesComparison(Js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends Cv{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Nn(e,n)}matches(e){return Rv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Rv(t){return t.op==="and"}function kv(t){return LR(t)&&Rv(t)}function LR(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function Lu(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Ys(t.value);if(kv(t))return t.filters.map(e=>Lu(e)).join(",");{const e=t.filters.map(n=>Lu(n)).join(",");return`${t.op}(${e})`}}function Pv(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Pv(o,s.filters[a]),!0):!1}(t,e):void fe(19439)}function xv(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Ys(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(xv).join(" ,")+"}"}(t):"Filter"}class FR extends st{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class UR extends st{constructor(e,n){super(e,"in",n),this.keys=Nv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BR extends st{constructor(e,n){super(e,"not-in",n),this.keys=Nv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Nv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class $R extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vh(n)&&bo(n.arrayValue,this.value)}}class jR extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bo(this.value.arrayValue,n)}}class qR extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bo(this.value.arrayValue,n)}}class zR extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function hg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new HR(t,e,n,r,s,i,o)}function Mh(t){const e=_e(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lu(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ol(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ys(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ys(r)).join(",")),e.Ie=n}return e.Ie}function Lh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Pv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ug(t.startAt,e.startAt)&&ug(t.endAt,e.endAt)}function Fu(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function KR(t,e,n,r,s,i,o,a){return new Ml(t,e,n,r,s,i,o,a)}function Ll(t){return new Ml(t)}function dg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GR(t){return t.collectionGroup!==null}function to(t){const e=_e(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ot(_t.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new nl(i,r))}),n.has(_t.keyField().canonicalString())||e.Ee.push(new nl(_t.keyField(),r))}return e.Ee}function Sn(t){const e=_e(t);return e.de||(e.de=WR(e,to(t))),e.de}function WR(t,e){if(t.limitType==="F")return hg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new nl(s.field,i)});const n=t.endAt?new tl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tl(t.startAt.position,t.startAt.inclusive):null;return hg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uu(t,e,n){return new Ml(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fl(t,e){return Lh(Sn(t),Sn(e))&&t.limitType===e.limitType}function Dv(t){return`${Mh(Sn(t))}|lt:${t.limitType}`}function Rs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xv(s)).join(", ")}]`),Ol(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ys(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ys(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function Ul(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ue.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of to(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=cg(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,to(r),s)||r.endAt&&!function(o,a,c){const u=cg(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,to(r),s))}(t,e)}function QR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ov(t){return(e,n)=>{let r=!1;for(const s of to(t)){const i=JR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function JR(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Js(c,u):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return yv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Ge(ue.comparator);function Yn(){return YR}const Vv=new Ge(ue.comparator);function Ui(...t){let e=Vv;for(const n of t)e=e.insert(n.key,n);return e}function Mv(t){let e=Vv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return no()}function Lv(){return no()}function no(){return new us(t=>t.toString(),(t,e)=>t.isEqual(e))}const XR=new Ge(ue.comparator),ZR=new ot(ue.comparator);function Ie(...t){let e=ZR;for(const n of t)e=e.add(n);return e}const ek=new ot(we);function tk(){return ek}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xa(e)?"-0":e}}function Fv(t){return{integerValue:""+t}}function nk(t,e){return RR(e)?Fv(e):Fh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this._=void 0}}function rk(t,e,n){return t instanceof Io?function(s,i){const o={fields:{[Ev]:{stringValue:wv},[bv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Oh(i)&&(i=Vl(i)),i&&(o.fields[Tv]=i),{mapValue:o}}(n,e):t instanceof Xs?Bv(t,e):t instanceof Zs?$v(t,e):function(s,i){const o=Uv(s,i),a=fg(o)+fg(s.Re);return Mu(o)&&Mu(s.Re)?Fv(a):Fh(s.serializer,a)}(t,e)}function sk(t,e,n){return t instanceof Xs?Bv(t,e):t instanceof Zs?$v(t,e):n}function Uv(t,e){return t instanceof rl?function(r){return Mu(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Io extends Bl{}class Xs extends Bl{constructor(e){super(),this.elements=e}}function Bv(t,e){const n=jv(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zs extends Bl{constructor(e){super(),this.elements=e}}function $v(t,e){let n=jv(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class rl extends Bl{constructor(e,n){super(),this.serializer=e,this.Re=n}}function fg(t){return Ye(t.integerValue||t.doubleValue)}function jv(t){return Vh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.field=e,this.transform=n}}function ik(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xs&&s instanceof Xs||r instanceof Zs&&s instanceof Zs?Qs(r.elements,s.elements,xn):r instanceof rl&&s instanceof rl?xn(r.Re,s.Re):r instanceof Io&&s instanceof Io}(t.transform,e.transform)}class ok{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $l{}function qv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hv(t.key,Cn.none()):new Mo(t.key,t.data,Cn.none());{const n=t.data,r=Bt.empty();let s=new ot(_t.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ur(t.key,r,new Wt(s.toArray()),Cn.none())}}function ak(t,e,n){t instanceof Mo?function(s,i,o){const a=s.value.clone(),c=gg(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ur?function(s,i,o){if(!Pa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=gg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(zv(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ro(t,e,n,r){return t instanceof Mo?function(i,o,a,c){if(!Pa(i.precondition,o))return a;const u=i.value.clone(),h=mg(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ur?function(i,o,a,c){if(!Pa(i.precondition,o))return a;const u=mg(i.fieldTransforms,c,o),h=o.data;return h.setAll(zv(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Pa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function lk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Uv(r.transform,s||null);i!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,i))}return n||null}function pg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Qs(r,s,(i,o)=>ik(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mo extends $l{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ur extends $l{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function zv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gg(t,e,n){const r=new Map;De(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,sk(o,a,n[s]))}return r}function mg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,rk(i,o,e))}return r}class Hv extends $l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ck extends $l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ak(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ro(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ro(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Lv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=qv(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Qs(this.mutations,e.mutations,(n,r)=>pg(n,r))&&Qs(this.baseMutations,e.baseMutations,(n,r)=>pg(n,r))}}class Bh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return XR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Bh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,Se;function fk(t){switch(t){case z.OK:return fe(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function Kv(t){if(t===void 0)return Jn("GRPC error has no .code"),z.UNKNOWN;switch(t){case tt.OK:return z.OK;case tt.CANCELLED:return z.CANCELLED;case tt.UNKNOWN:return z.UNKNOWN;case tt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case tt.INTERNAL:return z.INTERNAL;case tt.UNAVAILABLE:return z.UNAVAILABLE;case tt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case tt.NOT_FOUND:return z.NOT_FOUND;case tt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case tt.ABORTED:return z.ABORTED;case tt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case tt.DATA_LOSS:return z.DATA_LOSS;default:return fe(39323,{code:t})}}(Se=tt||(tt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new Ar([4294967295,4294967295],0);function _g(t){const e=gv().encode(t),n=new av;return n.update(e),new Uint8Array(n.digest())}function yg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([s,i],0)]}class $h{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bi(`Invalid padding: ${n}`);if(r<0)throw new Bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bi(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ar.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Ar.fromNumber(r)));return s.compare(pk)===1&&(s=new Ar([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=_g(e),[r,s]=yg(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new $h(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=_g(e),[r,s]=yg(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Lo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jl(ge.min(),s,new Ge(we),Yn(),Ie())}}class Lo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Lo(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class Gv{constructor(e,n){this.targetId=e,this.Ce=n}}class Wv{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class vg{constructor(){this.Fe=0,this.Me=wg(),this.xe=vt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ie(),n=Ie(),r=Ie();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:fe(38017,{changeType:i})}}),new Lo(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=wg()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,De(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class gk{constructor(e){this.ze=e,this.je=new Map,this.He=Yn(),this.Je=da(),this.Ye=da(),this.Ze=new Ge(we)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(Fu(i))if(r===0){const o=new ue(i.path);this.tt(n,o,Rt.newNoDocument(o,ge.min()))}else De(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=xr(r).toUint8Array()}catch(c){if(c instanceof vv)return Ws("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new $h(o,s,i)}catch(c){return Ws(c instanceof Bi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Fu(a.target)){const c=new ue(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Rt.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=Ie();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new jl(e,n,this.Ze,this.He,r);return this.He=Yn(),this.Je=da(),this.Ye=da(),this.Ze=new Ge(we),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new vg,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ot(we),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ot(we),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new vg),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function da(){return new Ge(ue.comparator)}function wg(){return new Ge(ue.comparator)}const mk={asc:"ASCENDING",desc:"DESCENDING"},_k={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yk={and:"AND",or:"OR"};class vk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bu(t,e){return t.useProto3Json||Ol(e)?e:{value:e}}function sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wk(t,e){return sl(t,e.toTimestamp())}function Rn(t){return De(!!t,49232),ge.fromTimestamp(function(n){const r=Pr(n);return new it(r.seconds,r.nanos)}(t))}function jh(t,e){return $u(t,e).canonicalString()}function $u(t,e){const n=function(s){return new Qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Jv(t){const e=Qe.fromString(t);return De(tw(e),10190,{key:e.toString()}),e}function ju(t,e){return jh(t.databaseId,e.path)}function Vc(t,e){const n=Jv(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(Xv(n))}function Yv(t,e){return jh(t.databaseId,e)}function Ek(t){const e=Jv(t);return e.length===4?Qe.emptyPath():Xv(e)}function qu(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xv(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Eg(t,e,n){return{name:ju(t,e),fields:n.value.mapValue.fields}}function Tk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(De(h===void 0||typeof h=="string",58123),vt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?z.UNKNOWN:Kv(u.code);return new oe(h,u.message||"")}(o);n=new Wv(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vc(t,r.document.name),i=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):ge.min(),a=new Bt({mapValue:{fields:r.document.fields}}),c=Rt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new xa(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Vc(t,r.document),i=r.readTime?Rn(r.readTime):ge.min(),o=Rt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new xa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Vc(t,r.document),i=r.removedTargetIds||[];n=new xa([],i,s,null)}else{if(!("filter"in e))return fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new dk(s,i),a=r.targetId;n=new Gv(a,o)}}return n}function bk(t,e){let n;if(e instanceof Mo)n={update:Eg(t,e.key,e.value)};else if(e instanceof Hv)n={delete:ju(t,e.key)};else if(e instanceof Ur)n={update:Eg(t,e.key,e.data),updateMask:Nk(e.fieldMask)};else{if(!(e instanceof ck))return fe(16599,{ft:e.type});n={verify:ju(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Io)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:wk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe(27497)}(t,e.precondition)),n}function Ik(t,e){return t&&t.length>0?(De(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Rn(s.updateTime):Rn(i);return o.isEqual(ge.min())&&(o=Rn(i)),new ok(o,s.transformResults||[])}(n,e))):[]}function Ak(t,e){return{documents:[Yv(t,e.path)]}}function Sk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Yv(t,s);const i=function(u){if(u.length!==0)return ew(Nn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:ks(g.field),direction:kk(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bu(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:s}}function Ck(t){let e=Ek(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const g=Zv(f);return g instanceof Nn&&kv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(A){return new nl(Ps(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Ol(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){const g=!!f.before,_=f.values||[];return new tl(_,g)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const g=!f.before,_=f.values||[];return new tl(_,g)}(n.endAt)),KR(e,s,o,i,a,"F",c,u)}function Rk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ps(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ps(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ps(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ps(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(Ps(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>Zv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function kk(t){return mk[t]}function Pk(t){return _k[t]}function xk(t){return yk[t]}function ks(t){return{fieldPath:t.canonicalString()}}function Ps(t){return _t.fromServerFormat(t.fieldPath)}function ew(t){return t instanceof st?function(n){if(n.op==="=="){if(lg(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NAN"}};if(ag(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lg(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NAN"}};if(ag(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(n.field),op:Pk(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>ew(s));return r.length===1?r[0]:{compositeFilter:{op:xk(n.op),filters:r}}}(t):fe(54877,{filter:t})}function Nk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=ge.min(),o=ge.min(),a=vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.wt=e}}function Ok(t){const e=Ck({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.yn=new Mk}addToCollectionParentIndex(e,n){return this.yn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(kr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class Mk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ot(Qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ot(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nw=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(nw,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new ei(0)}static ir(){return new ei(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="LruGarbageCollector",Lk=1048576;function Ig([t,e],[n,r]){const s=we(t,n);return s===0?we(e,r):s}class Fk{constructor(e){this.cr=e,this.buffer=new ot(Ig),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ig(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Uk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){te(bg,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){di(n)?te(bg,"Ignoring IndexedDB error during garbage collection: ",n):await hi(n)}await this.Ir(3e5)})}}class Bk{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Dl.le);const r=new Fk(n);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Tg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tg):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Cs()<=be.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function $k(t,e){return new Bk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.changes=new us(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ro(r.mutation,s,Wt.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ui();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Yn();const o=no(),a=function(){return no()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Ur)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ro(h.mutation,u,h.mutation.getFieldMask(),it.now())):o.set(u.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new qk(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=no();let s=new Ge((o,a)=>o-a),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Wt.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||Ie()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=Lv();h.forEach(g=>{if(!i.has(g)){const _=qv(n.get(g),r.get(g));_!==null&&f.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(Yr());let a=wo,c=i;return o.next(u=>j.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ie())).next(h=>({batchId:a,changes:Mv(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let s=Ui();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ui();return this.indexManager.getCollectionParents(e,i).next(a=>j.forEach(a,c=>{const u=function(f,g){return new Ml(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Rt.newInvalidDocument(h)))});let a=Ui();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&ro(h.mutation,u,Wt.empty(),it.now()),Ul(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return j.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:Ok(s.bundledQuery),readTime:Rn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.overlays=new Ge(ue.comparator),this.Or=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=Yr(),i=n.length+1,o=new ue(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ge((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Yr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Yr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return j.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hk(n,r));let i=this.Or.get(n);i===void 0&&(i=Ie(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.Nr=new ot(at.Br),this.Lr=new ot(at.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new at(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new at(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new ue(new Qe([])),r=new at(n,e),s=new at(n,e+1),i=[];return this.Lr.forEachInRange([r,s],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new ue(new Qe([])),r=new at(n,e),s=new at(n,e+1);let i=Ie();return this.Lr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new at(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class at{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return ue.comparator(e.key,n.key)||we(e.Gr,n.Gr)}static kr(e,n){return we(e.Gr,n.Gr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new ot(at.Br)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uk(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.zr=this.zr.add(new at(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Dh:this.Jn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new at(n,0),s=new at(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],o=>{const a=this.jr(o.Gr);i.push(a)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(we);return n.forEach(s=>{const i=new at(s,0),o=new at(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],a=>{r=r.add(a.Gr)})}),j.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ue.isDocumentKey(i)||(i=i.child(""));const o=new at(new ue(i),0);let a=new ot(we);return this.zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Gr)),!0)},o),j.resolve(this.Jr(a))}Jr(e){const n=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return j.forEach(n.mutations,s=>{const i=new at(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new at(n,0),s=this.zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.Zr=e,this.docs=function(){return new Ge(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const o=n.path,a=new ue(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||IR(bR(h),r)<=0||(s.has(h.key)||Ul(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){fe(9500)}Xr(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Jk(this)}getSize(e){return j.resolve(this.size)}}class Jk extends jk{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.persistence=e,this.ei=new us(n=>Mh(n),Lh),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.ti=0,this.ni=new qh,this.targetCount=0,this.ri=ei.rr()}forEachTarget(e,n){return this.ei.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),j.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new ei(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.ar(n),j.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.ii={},this.overlays={},this.si=new Dl(0),this.oi=!1,this.oi=!0,this._i=new Gk,this.referenceDelegate=e(this),this.ai=new Yk(this),this.indexManager=new Vk,this.remoteDocumentCache=function(s){return new Qk(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new Dk(n),this.ci=new Hk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new Wk(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new Xk(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,n){return j.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class Xk extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class zh{constructor(e){this.persistence=e,this.Ti=new qh,this.Ii=null}static Ei(e){return new zh(e)}get di(){if(this.Ii)return this.Ii;throw fe(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,r=>{const s=ue.fromPath(r);return this.Ai(e,s).next(i=>{i||n.removeEntry(s,ge.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return j.or([()=>j.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class il{constructor(e,n){this.persistence=e,this.Ri=new us(r=>kR(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=$k(this,n)}static Ei(e,n){return new il(e,n)}li(){}hi(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return j.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?j.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,o=>this.gr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),j.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ra(e.data.value)),n}gr(e,n,r){return j.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=s}static Ps(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Hh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return kA()?8:CR(Pt())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Zk;return this.fs(e,n,o).next(a=>{if(i.result=a,this.Is)return this.gs(e,n,o,a.size)})}).next(()=>i.result)}gs(e,n,r,s){return r.documentReadCount<this.Es?(Cs()<=be.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),j.resolve()):(Cs()<=be.DEBUG&&te("QueryEngine","Query:",Rs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Cs()<=be.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):j.resolve())}Rs(e,n){if(dg(n))return j.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Uu(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ps(n,a);return this.ys(n,u,o,c.readTime)?this.Rs(e,Uu(n,null,"F")):this.ws(e,u,n,c)}))})))}Vs(e,n,r,s){return dg(n)||s.isEqual(ge.min())?j.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(n,i);return this.ys(n,o,r,s)?j.resolve(null):(Cs()<=be.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Rs(n)),this.ws(e,o,n,TR(s,wo)).next(a=>a))})}ps(e,n){let r=new ot(Ov(e));return n.forEach((s,i)=>{Ul(e,i)&&(r=r.add(i))}),r}ys(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,n,r){return Cs()<=be.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Rs(n)),this.As.getDocumentsMatchingQuery(e,n,kr.min(),r)}ws(e,n,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="LocalStore",tP=3e8;class nP{constructor(e,n,r,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new Ge(we),this.Ds=new us(i=>Mh(i),Lh),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zk(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function rP(t,e,n,r){return new nP(t,e,n,r)}async function sw(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=Ie();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ms:u,removedBatchIds:o,addedBatchIds:a}))})})}function sP(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,g=f.keys();let _=j.resolve();return g.forEach(A=>{_=_.next(()=>h.getEntry(c,A)).next(k=>{const P=u.docVersions.get(A);De(P!==null,48541),k.version.compareTo(P)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ie();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function iw(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function iP(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const a=[];e.targetChanges.forEach((h,f)=>{const g=s.get(f);if(!g)return;a.push(n.ai.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.ai.addMatchingKeys(i,h.addedDocuments,f)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(vt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(f,_),function(k,P,N){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=tP?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(g,_,h)&&a.push(n.ai.updateTargetData(i,_))});let c=Yn(),u=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(oP(i,o,e.documentUpdates).next(h=>{c=h.xs,u=h.Os})),!r.isEqual(ge.min())){const h=n.ai.getLastRemoteSnapshotVersion(i).next(f=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ss=s,i))}function oP(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):te(Kh,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{xs:o,Os:s}})}function aP(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lP(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.ai.allocateTargetId(r).next(o=>(s=new wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function zu(t,e,n){const r=_e(t),s=r.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!di(o))throw o;te(Kh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function Ag(t,e,n){const r=_e(t);let s=ge.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=_e(c),g=f.Ds.get(h);return g!==void 0?j.resolve(f.Ss.get(g)):f.ai.getTargetData(u,h)}(r,o,Sn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,n?s:ge.min(),n?i:Ie())).next(a=>(cP(r,QR(e),a),{documents:a,Ns:i})))}function cP(t,e,n){let r=t.vs.get(e)||ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class Sg{constructor(){this.activeTargetIds=tk()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uP{constructor(){this.So=new Sg,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Sg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="ConnectivityMonitor";class Rg{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){te(Cg,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){te(Cg,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa=null;function Hu(){return fa===null?fa=function(){return 268435456+Math.round(2147483648*Math.random())}():fa++,"0x"+fa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="RestConnection",dP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fP{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Za?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,n,r,s,i){const o=Hu(),a=this.$o(e,n.toUriEncodedString());te(Mc,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,s,i);const{host:u}=new URL(a),h=kl(u);return this.Ko(e,a,c,r,h).then(f=>(te(Mc,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ws(Mc,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Wo(e,n,r,s,i,o){return this.Qo(e,n,r,s,i)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ui}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,n){const r=dP[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class gP extends fP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,s,i){const o=Hu();return new Promise((a,c)=>{const u=new lv;u.setWithCredentials(!0),u.listenOnce(cv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ca.NO_ERROR:const f=u.getResponseJson();te(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Ca.TIMEOUT:te(It,`RPC '${e}' ${o} timed out`),c(new oe(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ca.HTTP_ERROR:const g=u.getStatus();if(te(It,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const k=function(N){const V=N.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(V)>=0?V:z.UNKNOWN}(A.status);c(new oe(k,A.message))}else c(new oe(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new oe(z.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{s_:e,streamId:o,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{te(It,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);te(It,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}a_(e,n,r){const s=Hu(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dv(),a=hv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");te(It,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let g=!1,_=!1;const A=new pP({Go:P=>{_?te(It,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(te(It,`Opening RPC '${e}' stream ${s} transport.`),f.open(),g=!0),te(It,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},zo:()=>f.close()}),k=(P,N,V)=>{P.listen(N,M=>{try{V(M)}catch(O){setTimeout(()=>{throw O},0)}})};return k(f,Fi.EventType.OPEN,()=>{_||(te(It,`RPC '${e}' stream ${s} transport opened.`),A.t_())}),k(f,Fi.EventType.CLOSE,()=>{_||(_=!0,te(It,`RPC '${e}' stream ${s} transport closed`),A.r_())}),k(f,Fi.EventType.ERROR,P=>{_||(_=!0,Ws(It,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),A.r_(new oe(z.UNAVAILABLE,"The operation could not be completed")))}),k(f,Fi.EventType.MESSAGE,P=>{var N;if(!_){const V=P.data[0];De(!!V,16349);const M=V,O=(M==null?void 0:M.error)||((N=M[0])===null||N===void 0?void 0:N.error);if(O){te(It,`RPC '${e}' stream ${s} received error:`,O);const J=O.status;let U=function(v){const b=tt[v];if(b!==void 0)return Kv(b)}(J),T=O.message;U===void 0&&(U=z.INTERNAL,T="Unknown error status: "+J+" with message "+O.message),_=!0,A.r_(new oe(U,T)),f.close()}else te(It,`RPC '${e}' stream ${s} received:`,V),A.i_(V)}}),k(a,uv.STAT_EVENT,P=>{P.stat===Du.PROXY?te(It,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Du.NOPROXY&&te(It,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.n_()},0),A}}function Lc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){return new vk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="PersistentStream";class aw{constructor(e,n,r,s,i,o,a,c){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new ow(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{e(()=>{const s=new oe(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return te(kg,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(te(kg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mP extends aw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=Tk(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Rn(o.readTime):ge.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=qu(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Fu(c)?{documents:Ak(i,c)}:{query:Sk(i,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Qv(i,o.resumeToken);const u=Bu(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=sl(i,o.snapshotVersion.toTimestamp());const u=Bu(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Rk(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=qu(this.serializer),n.removeTarget=e,this.F_(n)}}class _P extends aw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=Ik(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.j_(r,n)}H_(){const e={};e.database=qu(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bk(this.serializer,r))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{}class vP extends yP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,$u(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(z.UNKNOWN,i.toString())})}Wo(e,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,$u(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(z.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class wP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Jn(n),this.ea=!1):te("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="RemoteStore";class EP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{hs(this)&&(te(is,"Restarting streams for network reachability change."),await async function(c){const u=_e(c);u.aa.add(4),await Fo(u),u.la.set("Unknown"),u.aa.delete(4),await zl(u)}(this))})}),this.la=new wP(r,s)}}async function zl(t){if(hs(t))for(const e of t.ua)await e(!0)}async function Fo(t){for(const e of t.ua)await e(!1)}function lw(t,e){const n=_e(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),Jh(n)?Qh(n):fi(n).b_()&&Wh(n,e))}function Gh(t,e){const n=_e(t),r=fi(n);n._a.delete(e),r.b_()&&cw(n,e),n._a.size===0&&(r.b_()?r.v_():hs(n)&&n.la.set("Unknown"))}function Wh(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fi(t).U_(e)}function cw(t,e){t.ha.Ke(e),fi(t).K_(e)}function Qh(t){t.ha=new gk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),fi(t).start(),t.la.ta()}function Jh(t){return hs(t)&&!fi(t).w_()&&t._a.size>0}function hs(t){return _e(t).aa.size===0}function uw(t){t.ha=void 0}async function TP(t){t.la.set("Online")}async function bP(t){t._a.forEach((e,n)=>{Wh(t,e)})}async function IP(t,e){uw(t),Jh(t)?(t.la.ia(e),Qh(t)):t.la.set("Unknown")}async function AP(t,e,n){if(t.la.set("Online"),e instanceof Wv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s._a.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s._a.delete(a),s.ha.removeTarget(a))}(t,e)}catch(r){te(is,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ol(t,r)}else if(e instanceof xa?t.ha.Xe(e):e instanceof Gv?t.ha.ot(e):t.ha.nt(e),!n.isEqual(ge.min()))try{const r=await iw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.ha.It(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i._a.get(u);h&&i._a.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i._a.get(c);if(!h)return;i._a.set(c,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),cw(i,c);const f=new wr(h.target,c,u,h.sequenceNumber);Wh(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te(is,"Failed to raise snapshot:",r),await ol(t,r)}}async function ol(t,e,n){if(!di(e))throw e;t.aa.add(1),await Fo(t),t.la.set("Offline"),n||(n=()=>iw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te(is,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await zl(t)})}function hw(t,e){return e().catch(n=>ol(t,n,e))}async function Hl(t){const e=_e(t),n=Dr(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:Dh;for(;SP(e);)try{const s=await aP(e.localStore,r);if(s===null){e.oa.length===0&&n.v_();break}r=s.batchId,CP(e,s)}catch(s){await ol(e,s)}dw(e)&&fw(e)}function SP(t){return hs(t)&&t.oa.length<10}function CP(t,e){t.oa.push(e);const n=Dr(t);n.b_()&&n.W_&&n.G_(e.mutations)}function dw(t){return hs(t)&&!Dr(t).w_()&&t.oa.length>0}function fw(t){Dr(t).start()}async function RP(t){Dr(t).H_()}async function kP(t){const e=Dr(t);for(const n of t.oa)e.G_(n.mutations)}async function PP(t,e,n){const r=t.oa.shift(),s=Bh.from(r,e,n);await hw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hl(t)}async function xP(t,e){e&&Dr(t).W_&&await async function(r,s){if(function(o){return fk(o)&&o!==z.ABORTED}(s.code)){const i=r.oa.shift();Dr(r).D_(),await hw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Hl(r)}}(t,e),dw(t)&&fw(t)}async function Pg(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),te(is,"RemoteStore received new credentials");const r=hs(n);n.aa.add(3),await Fo(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await zl(n)}async function NP(t,e){const n=_e(t);e?(n.aa.delete(2),await zl(n)):e||(n.aa.add(2),await Fo(n),n.la.set("Unknown"))}function fi(t){return t.Pa||(t.Pa=function(n,r,s){const i=_e(n);return i.Y_(),new mP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:TP.bind(null,t),Jo:bP.bind(null,t),Zo:IP.bind(null,t),Q_:AP.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),Jh(t)?Qh(t):t.la.set("Unknown")):(await t.Pa.stop(),uw(t))})),t.Pa}function Dr(t){return t.Ta||(t.Ta=function(n,r,s){const i=_e(n);return i.Y_(),new _P(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:RP.bind(null,t),Zo:xP.bind(null,t),z_:kP.bind(null,t),j_:PP.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Hl(t)):(await t.Ta.stop(),t.oa.length>0&&(te(is,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Yh(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xh(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),di(t))return new oe(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{static emptySet(e){return new $s(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=Ui(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $s)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $s;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.Ia=new Ge(ue.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):fe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class ti{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ti(e,n,$s.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class OP{constructor(){this.queries=Ng(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=_e(n),i=s.queries;s.queries=Ng(),i.forEach((o,a)=>{for(const c of a.Ra)c.onError(r)})})(this,new oe(z.ABORTED,"Firestore shutting down"))}}function Ng(){return new us(t=>Dv(t),Fl)}async function pw(t,e){const n=_e(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new DP,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Xh(o,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&Zh(n)}async function gw(t,e){const n=_e(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function VP(t,e){const n=_e(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Ra)a.pa(s)&&(r=!0);o.Aa=s}}r&&Zh(n)}function MP(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(e)}function Zh(t){t.fa.forEach(e=>{e.next()})}var Ku,Dg;(Dg=Ku||(Ku={})).ya="default",Dg.Cache="cache";class mw{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ti(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=ti.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Ku.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.key=e}}class yw{constructor(e){this.key=e}}class LP{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ie(),this.mutatedKeys=Ie(),this.Ua=Ov(e),this.Ka=new $s(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new xg,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const g=s.get(h),_=Ul(this.query,f)?f:null,A=!!g&&this.mutatedKeys.has(g.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;g&&_?g.data.isEqual(_.data)?A!==k&&(r.track({type:3,doc:_}),P=!0):this.ja(g,_)||(r.track({type:2,doc:_}),P=!0,(c&&this.Ua(_,c)>0||u&&this.Ua(_,u)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),P=!0):g&&!_&&(r.track({type:1,doc:g}),P=!0,(c||u)&&(a=!0)),P&&(_?(o=o.add(_),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:a,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((h,f)=>function(_,A){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Vt:P})}};return k(_)-k(A)}(h.type,f.type)||this.Ua(h.doc,f.doc)),this.Ha(r),s=s!=null&&s;const a=n&&!s?this.Ja():[],c=this.$a.size===0&&this.current&&!s?1:0,u=c!==this.Qa;return this.Qa=c,o.length!==0||u?{snapshot:new ti(this.query,e.Ka,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new xg,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ie(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new yw(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new _w(r))}),n}Xa(e){this.qa=e.Ns,this.$a=Ie();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return ti.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const ed="SyncEngine";class FP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UP{constructor(e){this.key=e,this.tu=!1}}class BP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new us(a=>Dv(a),Fl),this.iu=new Map,this.su=new Set,this.ou=new Ge(ue.comparator),this._u=new Map,this.au=new qh,this.uu={},this.cu=new Map,this.lu=ei.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function $P(t,e,n=!0){const r=Iw(t);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await vw(r,e,n,!0),s}async function jP(t,e){const n=Iw(t);await vw(n,e,!0,!1)}async function vw(t,e,n,r){const s=await lP(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await qP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&lw(t.remoteStore,s),a}async function qP(t,e,n,r,s){t.Pu=(f,g,_)=>async function(k,P,N,V){let M=P.view.Ga(N);M.ys&&(M=await Ag(k.localStore,P.query,!1).then(({documents:T})=>P.view.Ga(T,M)));const O=V&&V.targetChanges.get(P.targetId),J=V&&V.targetMismatches.get(P.targetId)!=null,U=P.view.applyChanges(M,k.isPrimaryClient,O,J);return Vg(k,P.targetId,U.Ya),U.snapshot}(t,f,g,_);const i=await Ag(t.localStore,e,!0),o=new LP(e,i.Ns),a=o.Ga(i.documents),c=Lo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);Vg(t,n,u.Ya);const h=new FP(e,n,o);return t.ru.set(e,h),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),u.snapshot}async function zP(t,e,n){const r=_e(t),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(o=>!Fl(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await zu(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gh(r.remoteStore,s.targetId),Gu(r,s.targetId)}).catch(hi)):(Gu(r,s.targetId),await zu(r.localStore,s.targetId,!0))}async function HP(t,e){const n=_e(t),r=n.ru.get(e),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gh(n.remoteStore,r.targetId))}async function KP(t,e,n){const r=ZP(t);try{const s=await function(o,a){const c=_e(o),u=it.now(),h=a.reduce((_,A)=>_.add(A.key),Ie());let f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=Yn(),k=Ie();return c.Cs.getEntries(_,h).next(P=>{A=P,A.forEach((N,V)=>{V.isValidDocument()||(k=k.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,A)).next(P=>{f=P;const N=[];for(const V of a){const M=lk(V,f.get(V.key).overlayedDocument);M!=null&&N.push(new Ur(V.key,M,Sv(M.value.mapValue),Cn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,N,a)}).next(P=>{g=P;const N=P.applyToLocalDocumentSet(f,k);return c.documentOverlayCache.saveOverlays(_,P.batchId,N)})}).then(()=>({batchId:g.batchId,changes:Mv(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.uu[o.currentUser.toKey()];u||(u=new Ge(we)),u=u.insert(a,c),o.uu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Uo(r,s.changes),await Hl(r.remoteStore)}catch(s){const i=Xh(s,"Failed to persist write");n.reject(i)}}async function ww(t,e){const n=_e(t);try{const r=await iP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n._u.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.tu=!0:s.modifiedDocuments.size>0?De(o.tu,14607):s.removedDocuments.size>0&&(De(o.tu,42227),o.tu=!1))}),await Uo(n,r,e)}catch(r){await hi(r)}}function Og(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,o)=>{const a=o.view.ga(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=_e(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const g of f.Ra)g.ga(a)&&(u=!0)}),u&&Zh(c)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GP(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r._u.get(e),i=s&&s.key;if(i){let o=new Ge(ue.comparator);o=o.insert(i,Rt.newNoDocument(i,ge.min()));const a=Ie().add(i),c=new jl(ge.min(),new Map,new Ge(we),o,a);await ww(r,c),r.ou=r.ou.remove(i),r._u.delete(e),td(r)}else await zu(r.localStore,e,!1).then(()=>Gu(r,e,n)).catch(hi)}async function WP(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await sP(n.localStore,e);Tw(n,r,null),Ew(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uo(n,s)}catch(s){await hi(s)}}async function QP(t,e,n){const r=_e(t);try{const s=await function(o,a){const c=_e(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(De(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);Tw(r,e,n),Ew(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Uo(r,s)}catch(s){await hi(s)}}function Ew(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function Tw(t,e,n){const r=_e(t);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function Gu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||bw(t,r)})}function bw(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(Gh(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),td(t))}function Vg(t,e,n){for(const r of n)r instanceof _w?(t.au.addReference(r.key,e),JP(t,r)):r instanceof yw?(te(ed,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||bw(t,r.key)):fe(19791,{Iu:r})}function JP(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(te(ed,"New document in limbo: "+n),t.su.add(r),td(t))}function td(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new ue(Qe.fromString(e)),r=t.lu.next();t._u.set(r,new UP(n)),t.ou=t.ou.insert(n,r),lw(t.remoteStore,new wr(Sn(Ll(n.path)),r,"TargetPurposeLimboResolution",Dl.le))}}async function Uo(t,e,n){const r=_e(t),s=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,c)=>{o.push(r.Pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Hh.Ps(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.nu.Q_(s),await async function(c,u){const h=_e(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>j.forEach(u,g=>j.forEach(g.ls,_=>h.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>j.forEach(g.hs,_=>h.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!di(f))throw f;te(Kh,"Failed to update sequence numbers: "+f)}for(const f of u){const g=f.targetId;if(!f.fromCache){const _=h.Ss.get(g),A=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(A);h.Ss=h.Ss.insert(g,k)}}}(r.localStore,i))}async function YP(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){te(ed,"User change. New user:",e.toKey());const r=await sw(n.localStore,e);n.currentUser=e,function(i,o){i.cu.forEach(a=>{a.forEach(c=>{c.reject(new oe(z.CANCELLED,o))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uo(n,r.Ms)}}function XP(t,e){const n=_e(t),r=n._u.get(e);if(r&&r.tu)return Ie().add(r.key);{let s=Ie();const i=n.iu.get(e);if(!i)return s;for(const o of i){const a=n.ru.get(o);s=s.unionWith(a.view.Wa)}return s}}function Iw(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GP.bind(null,e),e.nu.Q_=VP.bind(null,e.eventManager),e.nu.Tu=MP.bind(null,e.eventManager),e}function ZP(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QP.bind(null,e),e}class al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ql(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return rP(this.persistence,new eP,e.initialUser,this.serializer)}Ru(e){return new rw(zh.Ei,this.serializer)}Au(e){return new uP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}al.provider={build:()=>new al};class ex extends al{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){De(this.persistence.referenceDelegate instanceof il,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Uk(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new rw(r=>il.Ei(r,n),this.serializer)}}class Wu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Og(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YP.bind(null,this.syncEngine),await NP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OP}()}createDatastore(e){const n=ql(e.databaseInfo.databaseId),r=function(i){return new gP(i)}(e.databaseInfo);return function(i,o,a,c){return new vP(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new EP(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Og(this.syncEngine,n,0),function(){return Rg.C()?new Rg:new hP}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,h){const f=new BP(s,i,o,a,c,u);return h&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=_e(s);te(is,"RemoteStore shutting down."),i.aa.add(5),await Fo(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wu.provider={build:()=>new Wu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class tx{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=At.UNAUTHENTICATED,this.clientId=mv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{te(Or,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te(Or,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fc(t,e){t.asyncQueue.verifyOperationInProgress(),te(Or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await sw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Mg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nx(t);te(Or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Pg(e.remoteStore,s)),t._onlineComponents=e}async function nx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(Or,"Using user provided OfflineComponentProvider");try{await Fc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ws("Error using user provided cache. Falling back to memory cache: "+n),await Fc(t,new al)}}else te(Or,"Using default OfflineComponentProvider"),await Fc(t,new ex(void 0));return t._offlineComponents}async function Sw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(Or,"Using user provided OnlineComponentProvider"),await Mg(t,t._uninitializedComponentsProvider._online)):(te(Or,"Using default OnlineComponentProvider"),await Mg(t,new Wu))),t._onlineComponents}function rx(t){return Sw(t).then(e=>e.syncEngine)}async function Qu(t){const e=await Sw(t),n=e.eventManager;return n.onListen=$P.bind(null,e.syncEngine),n.onUnlisten=zP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HP.bind(null,e.syncEngine),n}function sx(t,e,n={}){const r=new Sr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Aw({next:g=>{h.yu(),o.enqueueAndForget(()=>gw(i,f));const _=g.docs.has(a);!_&&g.fromCache?u.reject(new oe(z.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&c&&c.source==="server"?u.reject(new oe(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new mw(Ll(a.path),h,{includeMetadataChanges:!0,Fa:!0});return pw(i,f)}(await Qu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e,n){if(!n)throw new oe(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ox(t,e,n,r){if(e===!0&&r===!0)throw new oe(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fg(t){if(!ue.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nd(t);throw new oe(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="firestore.googleapis.com",Ug=!0;class Bg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rw,this.ssl=Ug}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Ug;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Lk)throw new oe(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ox("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fR;switch(r.type){case"firstParty":return new _R(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lg.get(n);r&&(te("ComponentProvider","Removing Datastore"),Lg.delete(n),r.terminate())}(this),Promise.resolve()}}function ax(t,e,n,r={}){var s;t=kn(t,rd);const i=kl(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&vy(`https://${c}`),o.host!==Rw&&o.host!==c&&Ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Gn(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=At.MOCK_USER;else{h=TA(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new oe(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new At(g)}t._authCredentials=new pR(new pv(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kl(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Ao extends Kl{constructor(e,n,r){super(e,n,Ll(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new ue(e))}withConverter(e){return new Ao(this.firestore,e,this._path)}}function Ts(t,e,...n){if(t=yt(t),arguments.length===1&&(e=mv.newId()),ix("doc","path",e),t instanceof rd){const r=Qe.fromString(e,...n);return Fg(r),new jt(t,null,new ue(r))}{if(!(t instanceof jt||t instanceof Ao))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return Fg(r),new jt(t.firestore,t instanceof Ao?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="AsyncQueue";class jg{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new ow(this,"async_queue_retry"),this.ju=()=>{const r=Lc();r&&te($g,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=Lc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=Lc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Sr;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!di(e))throw e;te($g,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Jn("INTERNAL UNHANDLED ERROR: ",qg(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=Yh.createAndSchedule(this,e,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&fe(47125,{ec:qg(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function qg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ni extends rd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jg(e),this._firestoreClient=void 0,await e}}}function lx(t,e){const n=typeof t=="object"?t:by(),r=typeof t=="string"?t:Za,s=Th(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=wA("firestore");i&&ax(s,...i)}return s}function sd(t){if(t._terminated)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cx(t),t._firestoreClient}function cx(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,h){return new NR(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Cw(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new tx(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ri(vt.fromBase64String(e))}catch(n){throw new oe(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ri(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=/^__.*__$/;class hx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mo(e,this.data,n,this.fieldTransforms)}}class kw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Pw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{oc:t})}}class Wl{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Wl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return ll(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Pw(this.oc)&&ux.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class dx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ql(e)}dc(e,n,r,s=!1){return new Wl({oc:e,methodName:n,Ec:r,path:_t.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xw(t){const e=t._freezeSettings(),n=ql(t._databaseId);return new dx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fx(t,e,n,r,s,i={}){const o=t.dc(i.merge||i.mergeFields?2:0,e,n,s);ud("Data must be an object, but it was:",o,r);const a=Dw(r,o);let c,u;if(i.merge)c=new Wt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const g=Ju(e,f,n);if(!o.contains(g))throw new oe(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Vw(h,g)||h.push(g)}c=new Wt(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new hx(new Bt(a),c,u)}class Ql extends pi{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ql}}function Nw(t,e,n){return new Wl({oc:3,Ec:e.settings.Ec,methodName:t._methodName,cc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ad extends pi{_toFieldTransform(e){return new Uh(e.path,new Io)}isEqual(e){return e instanceof ad}}class ld extends pi{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Nw(this,e,!0),r=this.Ac.map(i=>gi(i,n)),s=new Xs(r);return new Uh(e.path,s)}isEqual(e){return e instanceof ld&&Gn(this.Ac,e.Ac)}}class cd extends pi{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Nw(this,e,!0),r=this.Ac.map(i=>gi(i,n)),s=new Zs(r);return new Uh(e.path,s)}isEqual(e){return e instanceof cd&&Gn(this.Ac,e.Ac)}}function px(t,e,n,r){const s=t.dc(1,e,n);ud("Data must be an object, but it was:",s,r);const i=[],o=Bt.empty();Fr(r,(c,u)=>{const h=hd(e,c,n);u=yt(u);const f=s.hc(h);if(u instanceof Ql)i.push(h);else{const g=gi(u,f);g!=null&&(i.push(h),o.set(h,g))}});const a=new Wt(i);return new kw(o,a,s.fieldTransforms)}function gx(t,e,n,r,s,i){const o=t.dc(1,e,n),a=[Ju(e,r,n)],c=[s];if(i.length%2!=0)throw new oe(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Ju(e,i[g])),c.push(i[g+1]);const u=[],h=Bt.empty();for(let g=a.length-1;g>=0;--g)if(!Vw(u,a[g])){const _=a[g];let A=c[g];A=yt(A);const k=o.hc(_);if(A instanceof Ql)u.push(_);else{const P=gi(A,k);P!=null&&(u.push(_),h.set(_,P))}}const f=new Wt(u);return new kw(h,f,o.fieldTransforms)}function gi(t,e){if(Ow(t=yt(t)))return ud("Unsupported field value:",e,t),Dw(t,e);if(t instanceof pi)return function(r,s){if(!Pw(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=gi(a,s.Pc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:sl(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sl(s.serializer,i)}}if(r instanceof id)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ri)return{bytesValue:Qv(s.serializer,r._byteString)};if(r instanceof jt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof od)return function(o,a){return{mapValue:{fields:{[Iv]:{stringValue:Av},[el]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Tc("VectorValues must only contain numeric values.");return Fh(a.serializer,u)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${nd(r)}`)}(t,e)}function Dw(t,e){const n={};return yv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(r,s)=>{const i=gi(s,e.uc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Ow(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof id||t instanceof ri||t instanceof jt||t instanceof pi||t instanceof od)}function ud(t,e,n){if(!Ow(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=nd(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function Ju(t,e,n){if((e=yt(e))instanceof Gl)return e._internalPath;if(typeof e=="string")return hd(t,e);throw ll("Field path arguments must be of type string or ",t,!1,void 0,n)}const mx=new RegExp("[~\\*/\\[\\]]");function hd(t,e,n){if(e.search(mx)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gl(...e.split("."))._internalPath}catch{throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ll(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new oe(z.INVALID_ARGUMENT,a+t+c)}function Vw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _x(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _x extends Mw{data(){return super.data()}}function Lw(t,e){return typeof e=="string"?hd(t,e):e instanceof Gl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vx{convertValue(e,n="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[el].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ye(o.doubleValue));return new od(i)}convertGeoPoint(e){return new id(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eo(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Qe.fromString(e);De(tw(r),9688,{name:e});const s=new To(r.get(1),r.get(3)),i=new ue(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fw extends Mw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Na extends Fw{data(e={}){return super.data(e)}}class Ex{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new $i(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Na(this._firestore,this._userDataWriter,r.key,r,new $i(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Na(s._firestore,s._userDataWriter,a.doc.key,a.doc,new $i(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Na(s._firestore,s._userDataWriter,a.doc.key,a.doc,new $i(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Tx(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Tx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){t=kn(t,jt);const e=kn(t.firestore,ni);return sx(sd(e),t._key).then(n=>$w(e,t,n))}class Uw extends vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function Ix(t,e,n){t=kn(t,jt);const r=kn(t.firestore,ni),s=wx(t.converter,e,n);return Bw(r,[fx(xw(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Cn.none())])}function pa(t,e,n,...r){t=kn(t,jt);const s=kn(t.firestore,ni),i=xw(s);let o;return o=typeof(e=yt(e))=="string"||e instanceof Gl?gx(i,"updateDoc",t._key,e,n,r):px(i,"updateDoc",t._key,e),Bw(s,[o.toMutation(t._key,Cn.exists(!0))])}function Ax(t,...e){var n,r,s;t=yt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||zg(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(zg(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof jt)u=kn(t.firestore,ni),h=Ll(t._key.path),c={next:f=>{e[o]&&e[o]($w(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=kn(t,Kl);u=kn(f.firestore,ni),h=f._query;const g=new Uw(u);c={next:_=>{e[o]&&e[o](new Ex(u,g,f,_))},error:e[o+1],complete:e[o+2]},yx(t._query)}return function(g,_,A,k){const P=new Aw(k),N=new mw(_,P,A);return g.asyncQueue.enqueueAndForget(async()=>pw(await Qu(g),N)),()=>{P.yu(),g.asyncQueue.enqueueAndForget(async()=>gw(await Qu(g),N))}}(sd(u),h,a,c)}function Bw(t,e){return function(r,s){const i=new Sr;return r.asyncQueue.enqueueAndForget(async()=>KP(await rx(r),s,i)),i.promise}(sd(t),e)}function $w(t,e,n){const r=n.docs.get(e._key),s=new Uw(t);return new Fw(t,s,e._key,r,new $i(n.hasPendingWrites,n.fromCache),e.converter)}function ga(){return new ad("serverTimestamp")}function Hg(...t){return new ld("arrayUnion",t)}function Kg(...t){return new cd("arrayRemove",t)}(function(e,n=!0){(function(s){ui=s})(li),Ks(new ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ni(new gR(r.getProvider("auth-internal")),new yR(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new oe(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new To(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ir(Qp,Jp,e),Ir(Qp,Jp,"esm2017")})();const Sx={apiKey:"AIzaSyC4pVxXXGuEmormtasU5v2W8dhuAjt76vI",authDomain:"tools-authentication-7e702.firebaseapp.com",projectId:"tools-authentication-7e702",storageBucket:"tools-authentication-7e702.firebasestorage.app",messagingSenderId:"653077360519",appId:"1:653077360519:web:10d1c65b49d8f37ca5ed22"},jw=Ty(Sx),gr=hR(jw),bs=lx(jw);var Cx=function(t){return function(e){return!!e&&typeof e=="object"}(t)&&!function(e){var n=Object.prototype.toString.call(e);return n==="[object RegExp]"||n==="[object Date]"||function(r){return r.$$typeof===Rx}(e)}(t)},Rx=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function ji(t,e){return e.clone!==!1&&e.isMergeableObject(t)?si(Array.isArray(t)?[]:{},t,e):t}function kx(t,e,n){return t.concat(e).map(function(r){return ji(r,n)})}function Gg(t){return Object.keys(t).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(n){return e.propertyIsEnumerable(n)}):[]}(t))}function Wg(t,e){try{return e in t}catch{return!1}}function si(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||kx,n.isMergeableObject=n.isMergeableObject||Cx,n.cloneUnlessOtherwiseSpecified=ji;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):function(s,i,o){var a={};return o.isMergeableObject(s)&&Gg(s).forEach(function(c){a[c]=ji(s[c],o)}),Gg(i).forEach(function(c){(function(u,h){return Wg(u,h)&&!(Object.hasOwnProperty.call(u,h)&&Object.propertyIsEnumerable.call(u,h))})(s,c)||(a[c]=Wg(s,c)&&o.isMergeableObject(i[c])?function(u,h){if(!h.customMerge)return si;var f=h.customMerge(u);return typeof f=="function"?f:si}(c,o)(s[c],i[c],o):ji(i[c],o))}),a}(t,e,n):ji(e,n)}si.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,r){return si(n,r,e)},{})};var Px=si;function xx(t){var e=(t=t||{}).storage||window&&window.localStorage,n=t.key||"vuex";function r(h,f){var g=f.getItem(h);try{return typeof g=="string"?JSON.parse(g):typeof g=="object"?g:void 0}catch{}}function s(){return!0}function i(h,f,g){return g.setItem(h,JSON.stringify(f))}function o(h,f){return Array.isArray(f)?f.reduce(function(g,_){return function(P,N,V,M){return!/^(__proto__|constructor|prototype)$/.test(N)&&((N=N.split?N.split("."):N.slice(0)).slice(0,-1).reduce(function(O,J){return O[J]=O[J]||{}},P)[N.pop()]=V),P}(g,_,(A=h,(A=((k=_).split?k.split("."):k).reduce(function(P,N){return P&&P[N]},A))===void 0?void 0:A));var A,k},{}):h}function a(h){return function(f){return h.subscribe(f)}}(t.assertStorage||function(){e.setItem("@@",1),e.removeItem("@@")})(e);var c,u=function(){return(t.getState||r)(n,e)};return t.fetchBeforeUse&&(c=u()),function(h){t.fetchBeforeUse||(c=u()),typeof c=="object"&&c!==null&&(h.replaceState(t.overwrite?c:Px(h.state,c,{arrayMerge:t.arrayMerger||function(f,g){return g},clone:!1})),(t.rehydrated||function(){})(h)),(t.subscriber||a)(h)(function(f,g){(t.filter||s)(f)&&(t.setState||i)(n,(t.reducer||o)(g,t.paths),e)})}}class Nx{constructor(){this.listeners=new Map,this.userId=null}init(e){return e?(this.userId=e,!0):!1}cleanup(){this.listeners.forEach(e=>e()),this.listeners.clear(),this.userId=null}async getData(e){if(!this.userId)return null;try{const n=Ts(bs,"users",this.userId,"data",e),r=await bx(n);return r.exists()?r.data():(console.log(`Aucune donne ${e} trouve pour l'utilisateur`),null)}catch(n){return console.error(`Erreur lors de la rcupration des donnes ${e}:`,n),null}}async saveData(e,n){if(!this.userId)return!1;try{const r=Ts(bs,"users",this.userId,"data",e);return await Ix(r,{...n,updatedAt:ga()},{merge:!0}),!0}catch(r){return console.error(`Erreur lors de la sauvegarde des donnes ${e}:`,r),!1}}listenForChanges(e,n){if(!this.userId)return()=>{};this.listeners.has(e)&&(this.listeners.get(e)(),this.listeners.delete(e));const r=Ts(bs,"users",this.userId,"data",e),s=Ax(r,i=>{i.exists()?n(i.data()):n(null)},i=>{console.error(`Erreur lors de l'coute des changements ${e}:`,i)});return this.listeners.set(e,s),s}async addToArray(e,n,r){if(!this.userId)return!1;try{const s=Ts(bs,"users",this.userId,"data",e);return await pa(s,{[n]:Hg(r),updatedAt:ga()}),!0}catch(s){return console.error(`Erreur lors de l'ajout  ${n}:`,s),!1}}async removeFromArray(e,n,r){if(!this.userId)return!1;try{const s=Ts(bs,"users",this.userId,"data",e);return await pa(s,{[n]:Kg(r),updatedAt:ga()}),!0}catch(s){return console.error(`Erreur lors de la suppression de ${n}:`,s),!1}}async updateInArray(e,n,r,s){if(!this.userId)return!1;try{const i=Ts(bs,"users",this.userId,"data",e);return await pa(i,{[n]:Kg(r)}),await pa(i,{[n]:Hg(s),updatedAt:ga()}),!0}catch(i){return console.error(`Erreur lors de la mise  jour dans ${n}:`,i),!1}}}const lr=new Nx,qi=OI({state:{user:null,authIsReady:!1,authError:null,userPreferences:{darkMode:null,theme:"blue",fontSize:100,language:"fr"},syncStatus:{isEnabled:!0,lastSynced:null,hasPendingChanges:!1}},getters:{isLoggedIn(t){return!!t.user},userName(t){var e,n;return((e=t.user)==null?void 0:e.displayName)||((n=t.user)==null?void 0:n.email)||"Utilisateur"},userEmail(t){var e;return(e=t.user)==null?void 0:e.email},authError(t){return t.authError},isSyncEnabled(t){return t.syncStatus.isEnabled}},mutations:{setUser(t,e){t.user=e},setAuthIsReady(t,e){t.authIsReady=e},setAuthError(t,e){t.authError=e},clearAuthError(t){t.authError=null},setUserPreference(t,{key:e,value:n}){t.userPreferences[e]=n},setSyncEnabled(t,e){t.syncStatus.isEnabled=e},setLastSynced(t,e){t.syncStatus.lastSynced=e},setHasPendingChanges(t,e){t.syncStatus.hasPendingChanges=e},updateSyncedData(t,{dataType:e,data:n}){switch(e){case"links":n&&n.items&&localStorage.setItem("pinned-links",JSON.stringify(n.items));break;case"preferences":if(n){for(const[r,s]of Object.entries(n))t.userPreferences.hasOwnProperty(r)&&(t.userPreferences[r]=s);Object.entries(n).forEach(([r,s])=>{r==="darkMode"?localStorage.setItem("darkMode",s):r==="theme"?localStorage.setItem("colorTheme",s):r==="fontSize"?localStorage.setItem("fontSize",s):r==="language"&&localStorage.setItem("language",s)})}break}}},actions:{async register({commit:t,dispatch:e},{email:n,password:r,displayName:s}){try{t("clearAuthError");const i=await QS(gr,n,r);if(i)return s&&await Jy(i.user,{displayName:s}),t("setUser",i.user),lr.init(i.user.uid),await e("syncUserData","preferences"),!0}catch(i){let o="Erreur lors de l'inscription";throw i.code==="auth/email-already-in-use"?o="Cette adresse email est dj utilise":i.code==="auth/invalid-email"?o="Adresse email invalide":i.code==="auth/weak-password"&&(o="Mot de passe trop faible"),t("setAuthError",o),new Error(o)}},async login({commit:t,dispatch:e,state:n},{email:r,password:s}){try{t("clearAuthError");const i=await JS(gr,r,s);if(i)return t("setUser",i.user),lr.init(i.user.uid),n.syncStatus.isEnabled&&await e("fetchUserData"),!0}catch(i){let o="Erreur lors de la connexion";throw i.code==="auth/user-not-found"||i.code==="auth/wrong-password"?o="Identifiants incorrects":i.code==="auth/too-many-requests"&&(o="Trop de tentatives choues. Veuillez ressayer plus tard."),t("setAuthError",o),new Error(o)}},async logout({commit:t}){try{return lr.cleanup(),await eC(gr),t("setUser",null),!0}catch(e){throw console.error("Erreur lors de la dconnexion:",e),e}},async resetPassword({commit:t},e){},async updateUserProfile({commit:t},e){},async setUserPreference({commit:t,dispatch:e,state:n},r){t("setUserPreference",r),r.key==="darkMode"?localStorage.setItem("darkMode",r.value):r.key==="theme"?localStorage.setItem("colorTheme",r.value):r.key==="fontSize"?localStorage.setItem("fontSize",r.value):r.key==="language"&&localStorage.setItem("language",r.value),n.syncStatus.isEnabled&&n.user&&e("syncUserData","preferences")},toggleSync({commit:t,dispatch:e,state:n},r){t("setSyncEnabled",r),r&&n.user&&e("syncAllData")},async fetchUserData({commit:t,dispatch:e}){if(gr.currentUser)try{const n=await lr.getData("preferences");n?t("updateSyncedData",{dataType:"preferences",data:n}):e("syncUserData","preferences");const r=await lr.getData("links");return r?t("updateSyncedData",{dataType:"links",data:r}):e("syncUserData","links"),t("setLastSynced",new Date().toISOString()),t("setHasPendingChanges",!1),!0}catch(n){return console.error("Erreur lors de la rcupration des donnes:",n),!1}},async syncUserData({commit:t,state:e},n){if(!gr.currentUser||!e.syncStatus.isEnabled)return!1;try{let r=null;switch(n){case"preferences":r=e.userPreferences;break;case"links":const s=localStorage.getItem("pinned-links");s?r={items:JSON.parse(s)}:r={items:[]};break}return r?(await lr.saveData(n,r),t("setLastSynced",new Date().toISOString()),t("setHasPendingChanges",!1),!0):!1}catch(r){return console.error(`Erreur lors de la synchronisation des donnes ${n}:`,r),t("setHasPendingChanges",!0),!1}},async syncAllData({dispatch:t}){await Promise.all([t("syncUserData","preferences"),t("syncUserData","links")])},setupSyncListeners({commit:t}){gr.currentUser&&(lr.listenForChanges("preferences",e=>{e&&t("updateSyncedData",{dataType:"preferences",data:e})}),lr.listenForChanges("links",e=>{e&&t("updateSyncedData",{dataType:"links",data:e})}))}},plugins:[xx({paths:["user","userPreferences","syncStatus"],storage:window.localStorage})]}),Dx={name:"Dashboard",data(){return{favoriteTools:[{name:"Markdown",path:"/markdown",icon:"fas fa-file-alt"},{name:"QR Code",path:"/qrcode",icon:"fas fa-qrcode"},{name:"Convertisseur",path:"/converter",icon:"fas fa-exchange-alt"},{name:"Calculatrice",path:"/calculator",icon:"fas fa-calculator"}],recentTools:[],tips:["Vous pouvez utiliser le convertisseur pour transformer rapidement des units de mesure.","Le prvisualisateur Markdown vous permet de rdiger des documents formats facilement.","Gnrez des QR codes personnaliss pour partager des informations rapidement.","La calculatrice garde un historique de vos calculs prcdents.","Utilisez le mode sombre pour rduire la fatigue oculaire la nuit."],currentTipIndex:0}},computed:{currentTip(){return this.tips[this.currentTipIndex]}},methods:{nextTip(){this.currentTipIndex=(this.currentTipIndex+1)%this.tips.length,localStorage.setItem("currentTipIndex",this.currentTipIndex)},loadRecentTools(){try{const t=JSON.parse(localStorage.getItem("recentPaths")||"[]");this.recentTools=t.filter(e=>e.path!=="/"),this.recentTools.length===0&&(this.recentTools=[{name:"MarkdownPreviewer",path:"/markdown",icon:"fas fa-file-alt",date:new Date().toLocaleString()}])}catch(t){console.error("Erreur lors du chargement de l'historique:",t),this.recentTools=[],localStorage.setItem("recentPaths","[]")}}},mounted(){this.loadRecentTools();const t=localStorage.getItem("currentTipIndex");t!==null?this.currentTipIndex=parseInt(t):this.currentTipIndex=Math.floor(Math.random()*this.tips.length),this.$watch(()=>this.$route.path,()=>{this.loadRecentTools()})}},Ox={class:"dashboard"},Vx={class:"dashboard-grid"},Mx={class:"dashboard-card favorites"},Lx={class:"tools-grid"},Fx={class:"tool-icon"},Ux={class:"tool-name"},Bx={class:"dashboard-card recent"},$x={class:"recent-list"},jx={key:0,class:"empty-list"},qx={class:"recent-icon"},zx={class:"recent-info"},Hx={class:"recent-name"},Kx={class:"recent-date"},Gx={class:"dashboard-card tips"},Wx={class:"tip-content"},Qx={class:"tip-text"};function Jx(t,e,n,r,s,i){const o=js("router-link");return re(),se("div",Ox,[e[8]||(e[8]=m("h1",null,"Tableau de bord",-1)),m("div",Vx,[m("div",Mx,[e[1]||(e[1]=m("h2",null,"Outils favoris",-1)),m("div",Lx,[(re(!0),se(nt,null,bn(s.favoriteTools,a=>(re(),ho(o,{key:a.name,to:a.path,class:"tool-card"},{default:En(()=>[m("div",Fx,[m("i",{class:He(a.icon)},null,2)]),m("span",Ux,Ee(a.name),1)]),_:2},1032,["to"]))),128))])]),m("div",Bx,[e[3]||(e[3]=m("h2",null,"Rcemment utiliss",-1)),m("div",$x,[s.recentTools.length===0?(re(),se("div",jx," Aucun outil utilis rcemment ")):lt("",!0),(re(!0),se(nt,null,bn(s.recentTools,(a,c)=>(re(),ho(o,{key:c,to:a.path,class:"recent-item"},{default:En(()=>[m("div",qx,[m("i",{class:He(a.icon||"fas fa-circle")},null,2)]),m("div",zx,[m("span",Hx,Ee(a.name),1),m("span",Kx,Ee(a.date),1)]),e[2]||(e[2]=m("i",{class:"fas fa-chevron-right recent-arrow"},null,-1))]),_:2},1032,["to"]))),128))])]),m("div",Gx,[e[6]||(e[6]=m("h2",null,"Astuces",-1)),m("div",Wx,[e[4]||(e[4]=m("div",{class:"tip-icon"},[m("i",{class:"fas fa-lightbulb"})],-1)),m("p",Qx,Ee(i.currentTip),1)]),m("button",{class:"next-tip",onClick:e[0]||(e[0]=(...a)=>i.nextTip&&i.nextTip(...a))},e[5]||(e[5]=[et(" Astuce suivante "),m("i",{class:"fas fa-arrow-right"},null,-1)]))]),e[7]||(e[7]=Ba('<div class="dashboard-card updates" data-v-ed6bba9f><div class="update-header" data-v-ed6bba9f><h2 data-v-ed6bba9f>Mises  jour</h2><span class="update-badge" data-v-ed6bba9f>Nouveau</span></div><div class="update-list" data-v-ed6bba9f><div class="update-item" data-v-ed6bba9f><div class="update-info" data-v-ed6bba9f><span class="update-title" data-v-ed6bba9f>Version 1.0.0 disponible</span><span class="update-date" data-v-ed6bba9f>10 mai 2023</span></div><p class="update-description" data-v-ed6bba9f> Premire version de l&#39;application avec les outils Markdown, QR Code, Convertisseur et Calculatrice. </p></div></div></div>',1))])])}const Yx=fn(Dx,[["render",Jx],["__scopeId","data-v-ed6bba9f"]]);function dd(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ds=dd();function qw(t){ds=t}const so={exec:()=>null};function Oe(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Mt.caret,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,e)};return r}const Mt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Xx=/^(?:[ \t]*(?:\n|$))+/,Zx=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,eN=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Bo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,tN=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,fd=/(?:[*+-]|\d{1,9}[.)])/,zw=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Hw=Oe(zw).replace(/bull/g,fd).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),nN=Oe(zw).replace(/bull/g,fd).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),pd=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,rN=/^[^\n]+/,gd=/(?!\s*\])(?:\\.|[^\[\]\\])+/,sN=Oe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",gd).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),iN=Oe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,fd).getRegex(),Jl="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",md=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,oN=Oe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",md).replace("tag",Jl).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Kw=Oe(pd).replace("hr",Bo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jl).getRegex(),aN=Oe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Kw).getRegex(),_d={blockquote:aN,code:Zx,def:sN,fences:eN,heading:tN,hr:Bo,html:oN,lheading:Hw,list:iN,newline:Xx,paragraph:Kw,table:so,text:rN},Qg=Oe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Bo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jl).getRegex(),lN={..._d,lheading:nN,table:Qg,paragraph:Oe(pd).replace("hr",Bo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Qg).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jl).getRegex()},cN={..._d,html:Oe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",md).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:so,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Oe(pd).replace("hr",Bo).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Hw).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},uN=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,hN=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Gw=/^( {2,}|\\)\n(?!\s*$)/,dN=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Yl=/[\p{P}\p{S}]/u,yd=/[\s\p{P}\p{S}]/u,Ww=/[^\s\p{P}\p{S}]/u,fN=Oe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,yd).getRegex(),Qw=/(?!~)[\p{P}\p{S}]/u,pN=/(?!~)[\s\p{P}\p{S}]/u,gN=/(?:[^\s\p{P}\p{S}]|~)/u,mN=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Jw=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,_N=Oe(Jw,"u").replace(/punct/g,Yl).getRegex(),yN=Oe(Jw,"u").replace(/punct/g,Qw).getRegex(),Yw="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",vN=Oe(Yw,"gu").replace(/notPunctSpace/g,Ww).replace(/punctSpace/g,yd).replace(/punct/g,Yl).getRegex(),wN=Oe(Yw,"gu").replace(/notPunctSpace/g,gN).replace(/punctSpace/g,pN).replace(/punct/g,Qw).getRegex(),EN=Oe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ww).replace(/punctSpace/g,yd).replace(/punct/g,Yl).getRegex(),TN=Oe(/\\(punct)/,"gu").replace(/punct/g,Yl).getRegex(),bN=Oe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),IN=Oe(md).replace("(?:-->|$)","-->").getRegex(),AN=Oe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",IN).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),cl=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,SN=Oe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",cl).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Xw=Oe(/^!?\[(label)\]\[(ref)\]/).replace("label",cl).replace("ref",gd).getRegex(),Zw=Oe(/^!?\[(ref)\](?:\[\])?/).replace("ref",gd).getRegex(),CN=Oe("reflink|nolink(?!\\()","g").replace("reflink",Xw).replace("nolink",Zw).getRegex(),vd={_backpedal:so,anyPunctuation:TN,autolink:bN,blockSkip:mN,br:Gw,code:hN,del:so,emStrongLDelim:_N,emStrongRDelimAst:vN,emStrongRDelimUnd:EN,escape:uN,link:SN,nolink:Zw,punctuation:fN,reflink:Xw,reflinkSearch:CN,tag:AN,text:dN,url:so},RN={...vd,link:Oe(/^!?\[(label)\]\((.*?)\)/).replace("label",cl).getRegex(),reflink:Oe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",cl).getRegex()},Yu={...vd,emStrongRDelimAst:wN,emStrongLDelim:yN,url:Oe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},kN={...Yu,br:Oe(Gw).replace("{2,}","*").getRegex(),text:Oe(Yu.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ma={normal:_d,gfm:lN,pedantic:cN},Ni={normal:vd,gfm:Yu,breaks:kN,pedantic:RN},PN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jg=t=>PN[t];function _n(t,e){if(e){if(Mt.escapeTest.test(t))return t.replace(Mt.escapeReplace,Jg)}else if(Mt.escapeTestNoEncode.test(t))return t.replace(Mt.escapeReplaceNoEncode,Jg);return t}function Yg(t){try{t=encodeURI(t).replace(Mt.percentDecode,"%")}catch{return null}return t}function Xg(t,e){var i;const n=t.replace(Mt.findPipe,(o,a,c)=>{let u=!1,h=a;for(;--h>=0&&c[h]==="\\";)u=!u;return u?"|":" |"}),r=n.split(Mt.splitPipe);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Mt.slashPipe,"|");return r}function Di(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function xN(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function Zg(t,e,n,r,s){const i=e.href,o=e.title||null,a=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;const c={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,c}function NN(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const s=r[1];return e.split(`
`).map(i=>{const o=i.match(n.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}class ul{constructor(e){Be(this,"options");Be(this,"rules");Be(this,"lexer");this.options=e||ds}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Di(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],s=NN(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:s}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){const s=Di(r,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Di(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let r=Di(n[0],`
`).split(`
`),s="",i="";const o=[];for(;r.length>0;){let a=!1;const c=[];let u;for(u=0;u<r.length;u++)if(this.rules.other.blockquoteStart.test(r[u]))c.push(r[u]),a=!0;else if(!a)c.push(r[u]);else break;r=r.slice(u);const h=c.join(`
`),f=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${h}`:h,i=i?`${i}
${f}`:f;const g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,o,!0),this.lexer.state.top=g,r.length===0)break;const _=o.at(-1);if((_==null?void 0:_.type)==="code")break;if((_==null?void 0:_.type)==="blockquote"){const A=_,k=A.raw+`
`+r.join(`
`),P=this.blockquote(k);o[o.length-1]=P,s=s.substring(0,s.length-A.raw.length)+P.raw,i=i.substring(0,i.length-A.text.length)+P.text;break}else if((_==null?void 0:_.type)==="list"){const A=_,k=A.raw+`
`+r.join(`
`),P=this.list(k);o[o.length-1]=P,s=s.substring(0,s.length-_.raw.length)+P.raw,i=i.substring(0,i.length-A.raw.length)+P.raw,r=k.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:o,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const s=r.length>1,i={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");const o=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let u=!1,h="",f="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;h=n[0],e=e.substring(h.length);let g=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,V=>" ".repeat(3*V.length)),_=e.split(`
`,1)[0],A=!g.trim(),k=0;if(this.options.pedantic?(k=2,f=g.trimStart()):A?k=n[1].length+1:(k=n[2].search(this.rules.other.nonSpaceChar),k=k>4?1:k,f=g.slice(k),k+=n[1].length),A&&this.rules.other.blankLine.test(_)&&(h+=_+`
`,e=e.substring(_.length+1),u=!0),!u){const V=this.rules.other.nextBulletRegex(k),M=this.rules.other.hrRegex(k),O=this.rules.other.fencesBeginRegex(k),J=this.rules.other.headingBeginRegex(k),U=this.rules.other.htmlBeginRegex(k);for(;e;){const T=e.split(`
`,1)[0];let y;if(_=T,this.options.pedantic?(_=_.replace(this.rules.other.listReplaceNesting,"  "),y=_):y=_.replace(this.rules.other.tabCharGlobal,"    "),O.test(_)||J.test(_)||U.test(_)||V.test(_)||M.test(_))break;if(y.search(this.rules.other.nonSpaceChar)>=k||!_.trim())f+=`
`+y.slice(k);else{if(A||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||O.test(g)||J.test(g)||M.test(g))break;f+=`
`+_}!A&&!_.trim()&&(A=!0),h+=T+`
`,e=e.substring(T.length+1),g=y.slice(k)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let P=null,N;this.options.gfm&&(P=this.rules.other.listIsTask.exec(f),P&&(N=P[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:h,task:!!P,checked:N,loose:!1,text:f,tokens:[]}),i.raw+=h}const c=i.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){const h=i.items[u].tokens.filter(g=>g.type==="space"),f=h.length>0&&h.some(g=>this.rules.other.anyLine.test(g.raw));i.loose=f}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:i}}}table(e){var a;const n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const r=Xg(n[1]),s=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===s.length){for(const c of s)this.rules.other.tableAlignRight.test(c)?o.align.push("right"):this.rules.other.tableAlignCenter.test(c)?o.align.push("center"):this.rules.other.tableAlignLeft.test(c)?o.align.push("left"):o.align.push(null);for(let c=0;c<r.length;c++)o.header.push({text:r[c],tokens:this.lexer.inline(r[c]),header:!0,align:o.align[c]});for(const c of i)o.rows.push(Xg(c,o.header.length).map((u,h)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:o.align[h]})));return o}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const o=Di(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=xN(n[2],"()");if(o===-2)return;if(o>-1){const c=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let s=n[2],i="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(s);o&&(s=o[1],i=o[3])}else i=n[3]?n[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?s=s.slice(1):s=s.slice(1,-1)),Zg(n,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const s=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=n[s.toLowerCase()];if(!i){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return Zg(r,i,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...s[0]].length-1;let a,c,u=o,h=0;const f=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,n=n.slice(-1*e.length+o);(s=f.exec(n))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(c=[...a].length,s[3]||s[4]){u+=c;continue}else if((s[5]||s[6])&&o%3&&!((o+c)%3)){h+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+h);const g=[...s[0]][0].length,_=e.slice(0,o+s.index+g+c);if(Math.min(o,c)%2){const k=_.slice(1,-1);return{type:"em",raw:_,text:k,tokens:this.lexer.inlineTokens(k)}}const A=_.slice(2,-2);return{type:"strong",raw:_,text:A,tokens:this.lexer.inlineTokens(A)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(r),i=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return s&&i&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,s;return n[2]==="@"?(r=n[1],s="mailto:"+r):(r=n[1],s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let s,i;if(n[2]==="@")s=n[0],i="mailto:"+s;else{let o;do o=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(o!==n[0]);s=n[0],n[1]==="www."?i="http://"+n[0]:i=n[0]}return{type:"link",raw:n[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){const r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}}class Zt{constructor(e){Be(this,"tokens");Be(this,"options");Be(this,"state");Be(this,"tokenizer");Be(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ds,this.options.tokenizer=this.options.tokenizer||new ul,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Mt,block:ma.normal,inline:Ni.normal};this.options.pedantic?(n.block=ma.pedantic,n.inline=Ni.pedantic):this.options.gfm&&(n.block=ma.gfm,this.options.breaks?n.inline=Ni.breaks:n.inline=Ni.gfm),this.tokenizer.rules=n}static get rules(){return{block:ma,inline:Ni}}static lex(e,n){return new Zt(n).lex(e)}static lexInline(e,n){return new Zt(n).inlineTokens(e)}lex(e){e=e.replace(Mt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var s,i,o;for(this.options.pedantic&&(e=e.replace(Mt.tabCharGlobal,"    ").replace(Mt.spaceLine,""));e;){let a;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(u=>(a=u.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const u=n.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let c=e;if((o=this.options.extensions)!=null&&o.startBlock){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startBlock.forEach(g=>{f=g.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(c=e.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){const u=n.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a),r=c.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,c,u;let r=e,s=null;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)h.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let h;if((c=(a=this.options.extensions)==null?void 0:a.inline)!=null&&c.some(g=>(h=g.call({lexer:this},e,n))?(e=e.substring(h.raw.length),n.push(h),!0):!1))continue;if(h=this.tokenizer.escape(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.tag(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.link(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(h.raw.length);const g=n.at(-1);h.type==="text"&&(g==null?void 0:g.type)==="text"?(g.raw+=h.raw,g.text+=h.text):n.push(h);continue}if(h=this.tokenizer.emStrong(e,r,o)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.codespan(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.br(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.del(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.autolink(e)){e=e.substring(h.raw.length),n.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(e))){e=e.substring(h.raw.length),n.push(h);continue}let f=e;if((u=this.options.extensions)!=null&&u.startInline){let g=1/0;const _=e.slice(1);let A;this.options.extensions.startInline.forEach(k=>{A=k.call({lexer:this},_),typeof A=="number"&&A>=0&&(g=Math.min(g,A))}),g<1/0&&g>=0&&(f=e.substring(0,g+1))}if(h=this.tokenizer.inlineText(f)){e=e.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(o=h.raw.slice(-1)),i=!0;const g=n.at(-1);(g==null?void 0:g.type)==="text"?(g.raw+=h.raw,g.text+=h.text):n.push(h);continue}if(e){const g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return n}}class hl{constructor(e){Be(this,"options");Be(this,"parser");this.options=e||ds}space(e){return""}code({text:e,lang:n,escaped:r}){var o;const s=(o=(n||"").match(Mt.notSpaceStart))==null?void 0:o[0],i=e.replace(Mt.endingNewline,"")+`
`;return s?'<pre><code class="language-'+_n(s)+'">'+(r?i:_n(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:_n(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,r=e.start;let s="";for(let a=0;a<e.items.length;a++){const c=e.items[a];s+=this.listitem(c)}const i=n?"ol":"ul",o=n&&r!==1?' start="'+r+'"':"";return"<"+i+o+`>
`+s+"</"+i+`>
`}listitem(e){var r;let n="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+_n(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):n+=s+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let i=0;i<e.header.length;i++)r+=this.tablecell(e.header[i]);n+=this.tablerow({text:r});let s="";for(let i=0;i<e.rows.length;i++){const o=e.rows[i];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${_n(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){const s=this.parser.parseInline(r),i=Yg(e);if(i===null)return s;e=i;let o='<a href="'+e+'"';return n&&(o+=' title="'+_n(n)+'"'),o+=">"+s+"</a>",o}image({href:e,title:n,text:r,tokens:s}){s&&(r=this.parser.parseInline(s,this.parser.textRenderer));const i=Yg(e);if(i===null)return _n(r);e=i;let o=`<img src="${e}" alt="${r}"`;return n&&(o+=` title="${_n(n)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:_n(e.text)}}class wd{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class en{constructor(e){Be(this,"options");Be(this,"renderer");Be(this,"textRenderer");this.options=e||ds,this.options.renderer=this.options.renderer||new hl,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new wd}static parse(e,n){return new en(n).parse(e)}static parseInline(e,n){return new en(n).parseInline(e)}parse(e,n=!0){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const u=a,h=this.options.extensions.renderers[u.type].call({parser:this},u);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=h||"";continue}}const c=a;switch(c.type){case"space":{r+=this.renderer.space(c);continue}case"hr":{r+=this.renderer.hr(c);continue}case"heading":{r+=this.renderer.heading(c);continue}case"code":{r+=this.renderer.code(c);continue}case"table":{r+=this.renderer.table(c);continue}case"blockquote":{r+=this.renderer.blockquote(c);continue}case"list":{r+=this.renderer.list(c);continue}case"html":{r+=this.renderer.html(c);continue}case"paragraph":{r+=this.renderer.paragraph(c);continue}case"text":{let u=c,h=this.renderer.text(u);for(;o+1<e.length&&e[o+1].type==="text";)u=e[++o],h+=`
`+this.renderer.text(u);n?r+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):r+=h;continue}default:{const u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(e,n=this.renderer){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=u||"";continue}}const c=a;switch(c.type){case"escape":{r+=n.text(c);break}case"html":{r+=n.html(c);break}case"link":{r+=n.link(c);break}case"image":{r+=n.image(c);break}case"strong":{r+=n.strong(c);break}case"em":{r+=n.em(c);break}case"codespan":{r+=n.codespan(c);break}case"br":{r+=n.br(c);break}case"del":{r+=n.del(c);break}case"text":{r+=n.text(c);break}default:{const u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}}class io{constructor(e){Be(this,"options");Be(this,"block");this.options=e||ds}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Zt.lex:Zt.lexInline}provideParser(){return this.block?en.parse:en.parseInline}}Be(io,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class DN{constructor(...e){Be(this,"defaults",dd());Be(this,"options",this.setOptions);Be(this,"parse",this.parseMarkdown(!0));Be(this,"parseInline",this.parseMarkdown(!1));Be(this,"Parser",en);Be(this,"Renderer",hl);Be(this,"TextRenderer",wd);Be(this,"Lexer",Zt);Be(this,"Tokenizer",ul);Be(this,"Hooks",io);this.use(...e)}walkTokens(e,n){var s,i;let r=[];for(const o of e)switch(r=r.concat(n.call(this,o)),o.type){case"table":{const a=o;for(const c of a.header)r=r.concat(this.walkTokens(c.tokens,n));for(const c of a.rows)for(const u of c)r=r.concat(this.walkTokens(u.tokens,n));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=o;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(c=>{const u=a[c].flat(1/0);r=r.concat(this.walkTokens(u,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=n.renderers[i.name];o?n.renderers[i.name]=function(...a){let c=i.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=n[i.level];o?o.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),s.extensions=n),r.renderer){const i=this.defaults.renderer||new hl(this.defaults);for(const o in r.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,c=r.renderer[a],u=i[a];i[a]=(...h)=>{let f=c.apply(i,h);return f===!1&&(f=u.apply(i,h)),f||""}}s.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new ul(this.defaults);for(const o in r.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,c=r.tokenizer[a],u=i[a];i[a]=(...h)=>{let f=c.apply(i,h);return f===!1&&(f=u.apply(i,h)),f}}s.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new io;for(const o in r.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,c=r.hooks[a],u=i[a];io.passThroughHooks.has(o)?i[a]=h=>{if(this.defaults.async)return Promise.resolve(c.call(i,h)).then(g=>u.call(i,g));const f=c.call(i,h);return u.call(i,f)}:i[a]=(...h)=>{let f=c.apply(i,h);return f===!1&&(f=u.apply(i,h)),f}}s.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,o=r.walkTokens;s.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),i&&(c=c.concat(i.call(this,a))),c}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Zt.lex(e,n??this.defaults)}parser(e,n){return en.parse(e,n??this.defaults)}parseMarkdown(e){return(r,s)=>{const i={...s},o={...this.defaults,...i},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const c=o.hooks?o.hooks.provideLexer():e?Zt.lex:Zt.lexInline,u=o.hooks?o.hooks.provideParser():e?en.parse:en.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(h=>c(h,o)).then(h=>o.hooks?o.hooks.processAllTokens(h):h).then(h=>o.walkTokens?Promise.all(this.walkTokens(h,o.walkTokens)).then(()=>h):h).then(h=>u(h,o)).then(h=>o.hooks?o.hooks.postprocess(h):h).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let h=c(r,o);o.hooks&&(h=o.hooks.processAllTokens(h)),o.walkTokens&&this.walkTokens(h,o.walkTokens);let f=u(h,o);return o.hooks&&(f=o.hooks.postprocess(f)),f}catch(h){return a(h)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+_n(r.message+"",!0)+"</pre>";return n?Promise.resolve(s):s}if(n)return Promise.reject(r);throw r}}}const os=new DN;function Me(t,e){return os.parse(t,e)}Me.options=Me.setOptions=function(t){return os.setOptions(t),Me.defaults=os.defaults,qw(Me.defaults),Me};Me.getDefaults=dd;Me.defaults=ds;Me.use=function(...t){return os.use(...t),Me.defaults=os.defaults,qw(Me.defaults),Me};Me.walkTokens=function(t,e){return os.walkTokens(t,e)};Me.parseInline=os.parseInline;Me.Parser=en;Me.parser=en.parse;Me.Renderer=hl;Me.TextRenderer=wd;Me.Lexer=Zt;Me.lexer=Zt.lex;Me.Tokenizer=ul;Me.Hooks=io;Me.parse=Me;Me.options;Me.setOptions;Me.use;Me.walkTokens;Me.parseInline;en.parse;Zt.lex;const ON={setup(){const t=he(localStorage.getItem("markdownText")||`# Bienvenue dans le prvisualisateur Markdown

crivez du Markdown  gauche et voyez l'aperu  droite.

## Fonctionnalits

- Prvisualisation en temps rel
- Sauvegarde automatique
- Mode plein cran
- Copie du HTML gnr`),e=he(""),n=he(!1),r=()=>{e.value=Me(t.value),localStorage.setItem("markdownText",t.value)},s=()=>{confirm("tes-vous sr de vouloir effacer tout le texte?")&&(t.value="",r())},i=()=>{navigator.clipboard.writeText(e.value).then(()=>alert("HTML copi dans le presse-papier!")).catch(a=>alert("Erreur lors de la copie: "+a))},o=()=>{n.value=!n.value};return ls(()=>{r();const a=document.querySelector(".resize-handle"),c=document.querySelector(".editor-container");if(a&&c){let u,h;const f=A=>{u=A.clientX,h=parseInt(document.defaultView.getComputedStyle(c).width,10),document.addEventListener("mousemove",g),document.addEventListener("mouseup",_)},g=A=>{const k=h+(A.clientX-u),P=c.parentNode.offsetWidth,N=Math.max(200,Math.min(P-200,k));c.style.width=`${N}px`},_=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",_)};a.addEventListener("mousedown",f)}}),{markdownText:t,htmlPreview:e,isFullscreen:n,updatePreview:r,clearText:s,copyHTML:i,toggleFullscreen:o}}},VN={class:"markdown-container"},MN={class:"toolbar"},LN={class:"editor-container"},FN=["innerHTML"];function UN(t,e,n,r,s,i){return re(),se("div",VN,[m("div",MN,[m("button",{class:"tool-btn",onClick:e[0]||(e[0]=(...o)=>r.clearText&&r.clearText(...o))},e[5]||(e[5]=[m("i",{class:"fas fa-trash-alt"},null,-1),et(" Effacer ")])),m("button",{class:"tool-btn",onClick:e[1]||(e[1]=(...o)=>r.copyHTML&&r.copyHTML(...o))},e[6]||(e[6]=[m("i",{class:"fas fa-copy"},null,-1),et(" Copier HTML ")])),m("button",{class:"tool-btn",onClick:e[2]||(e[2]=(...o)=>r.toggleFullscreen&&r.toggleFullscreen(...o))},[m("i",{class:He(r.isFullscreen?"fas fa-compress":"fas fa-expand")},null,2)])]),m("div",{class:He(["editor-preview-container",{fullscreen:r.isFullscreen}])},[m("div",LN,[Pe(m("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.markdownText=o),class:"markdown-editor",placeholder:"crivez du Markdown ici...",onInput:e[4]||(e[4]=(...o)=>r.updatePreview&&r.updatePreview(...o))},null,544),[[Xe,r.markdownText]]),e[7]||(e[7]=m("div",{class:"resize-handle"},null,-1))]),m("div",{class:"preview-container",innerHTML:r.htmlPreview},null,8,FN)],2)])}const BN=fn(ON,[["render",UN],["__scopeId","data-v-333d8f11"]]);function $N(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Is={},Uc,em;function jN(){return em||(em=1,Uc=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Uc}var Bc={},cr={},tm;function fs(){if(tm)return cr;tm=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return cr.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},cr.getSymbolTotalCodewords=function(r){return e[r]},cr.getBCHDigit=function(n){let r=0;for(;n!==0;)r++,n>>>=1;return r},cr.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},cr.isKanjiModeEnabled=function(){return typeof t<"u"},cr.toSJIS=function(r){return t(r)},cr}var $c={},nm;function Ed(){return nm||(nm=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}}($c)),$c}var jc,rm;function qN(){if(rm)return jc;rm=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let r=0;r<n;r++)this.putBit((e>>>n-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},jc=t,jc}var qc,sm;function zN(){if(sm)return qc;sm=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,n,r,s){const i=e*this.size+n;this.data[i]=r,s&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,n){return this.data[e*this.size+n]},t.prototype.xor=function(e,n,r){this.data[e*this.size+n]^=r},t.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},qc=t,qc}var zc={},im;function HN(){return im||(im=1,function(t){const e=fs().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const s=[],i=t.getRowColCoords(r),o=i.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||s.push([i[a],i[c]]);return s}}(zc)),zc}var Hc={},om;function KN(){if(om)return Hc;om=1;const t=fs().getSymbolSize,e=7;return Hc.getPositions=function(r){const s=t(r);return[[0,0],[s-e,0],[0,s-e]]},Hc}var Kc={},am;function GN(){return am||(am=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,c=0,u=null,h=null;for(let f=0;f<i;f++){a=c=0,u=h=null;for(let g=0;g<i;g++){let _=s.get(f,g);_===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=_,a=1),_=s.get(g,f),_===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=_,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let c=0;c<i-1;c++){const u=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,c=0;for(let u=0;u<i;u++){a=c=0;for(let h=0;h<i;h++)a=a<<1&2047|s.get(u,h),h>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|s.get(h,u),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)i.isReserved(c,a)||i.xor(c,a,n(s,c,a))},t.getBestMask=function(s,i){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){i(u),t.applyMask(u,s);const h=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(u,s),h<c&&(c=h,a=u)}return a}}(Kc)),Kc}var _a={},lm;function eE(){if(lm)return _a;lm=1;const t=Ed(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return _a.getBlocksCount=function(s,i){switch(i){case t.L:return e[(s-1)*4+0];case t.M:return e[(s-1)*4+1];case t.Q:return e[(s-1)*4+2];case t.H:return e[(s-1)*4+3];default:return}},_a.getTotalCodewordsCount=function(s,i){switch(i){case t.L:return n[(s-1)*4+0];case t.M:return n[(s-1)*4+1];case t.Q:return n[(s-1)*4+2];case t.H:return n[(s-1)*4+3];default:return}},_a}var Gc={},Oi={},cm;function WN(){if(cm)return Oi;cm=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let s=0;s<255;s++)t[s]=r,e[r]=s,r<<=1,r&256&&(r^=285);for(let s=255;s<512;s++)t[s]=t[s-255]}(),Oi.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Oi.exp=function(r){return t[r]},Oi.mul=function(r,s){return r===0||s===0?0:t[e[r]+e[s]]},Oi}var um;function QN(){return um||(um=1,function(t){const e=WN();t.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(r[o],s[a]);return i},t.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}}(Gc)),Gc}var Wc,hm;function JN(){if(hm)return Wc;hm=1;const t=QN();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(r.length+this.degree);s.set(r);const i=t.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(i,o),a}return i},Wc=e,Wc}var Qc={},Jc={},Yc={},dm;function tE(){return dm||(dm=1,Yc.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Yc}var mn={},fm;function nE(){if(fm)return mn;fm=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;mn.KANJI=new RegExp(n,"g"),mn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),mn.BYTE=new RegExp(r,"g"),mn.NUMERIC=new RegExp(t,"g"),mn.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+n+"$"),i=new RegExp("^"+t+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return mn.testKanji=function(c){return s.test(c)},mn.testNumeric=function(c){return i.test(c)},mn.testAlphanumeric=function(c){return o.test(c)},mn}var pm;function ps(){return pm||(pm=1,function(t){const e=tE(),n=nE();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,o){if(t.isValid(i))return i;try{return r(i)}catch{return o}}}(Jc)),Jc}var gm;function YN(){return gm||(gm=1,function(t){const e=fs(),n=eE(),r=Ed(),s=ps(),i=tE(),o=7973,a=e.getBCHDigit(o);function c(g,_,A){for(let k=1;k<=40;k++)if(_<=t.getCapacity(k,A,g))return k}function u(g,_){return s.getCharCountIndicator(g,_)+4}function h(g,_){let A=0;return g.forEach(function(k){const P=u(k.mode,_);A+=P+k.getBitsLength()}),A}function f(g,_){for(let A=1;A<=40;A++)if(h(g,A)<=t.getCapacity(A,_,s.MIXED))return A}t.from=function(_,A){return i.isValid(_)?parseInt(_,10):A},t.getCapacity=function(_,A,k){if(!i.isValid(_))throw new Error("Invalid QR Code version");typeof k>"u"&&(k=s.BYTE);const P=e.getSymbolTotalCodewords(_),N=n.getTotalCodewordsCount(_,A),V=(P-N)*8;if(k===s.MIXED)return V;const M=V-u(k,_);switch(k){case s.NUMERIC:return Math.floor(M/10*3);case s.ALPHANUMERIC:return Math.floor(M/11*2);case s.KANJI:return Math.floor(M/13);case s.BYTE:default:return Math.floor(M/8)}},t.getBestVersionForData=function(_,A){let k;const P=r.from(A,r.M);if(Array.isArray(_)){if(_.length>1)return f(_,P);if(_.length===0)return 1;k=_[0]}else k=_;return c(k.mode,k.getLength(),P)},t.getEncodedBits=function(_){if(!i.isValid(_)||_<7)throw new Error("Invalid QR Code version");let A=_<<12;for(;e.getBCHDigit(A)-a>=0;)A^=o<<e.getBCHDigit(A)-a;return _<<12|A}}(Qc)),Qc}var Xc={},mm;function XN(){if(mm)return Xc;mm=1;const t=fs(),e=1335,n=21522,r=t.getBCHDigit(e);return Xc.getEncodedBits=function(i,o){const a=i.bit<<3|o;let c=a<<10;for(;t.getBCHDigit(c)-r>=0;)c^=e<<t.getBCHDigit(c)-r;return(a<<10|c)^n},Xc}var Zc={},eu,_m;function ZN(){if(_m)return eu;_m=1;const t=ps();function e(n){this.mode=t.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),r.put(o,10);const a=this.data.length-s;a>0&&(i=this.data.substr(s),o=parseInt(i,10),r.put(o,a*3+1))},eu=e,eu}var tu,ym;function eD(){if(ym)return tu;ym=1;const t=ps(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(r){this.mode=t.ALPHANUMERIC,this.data=r}return n.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=e.indexOf(this.data[i])*45;o+=e.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(e.indexOf(this.data[i]),6)},tu=n,tu}var nu,vm;function tD(){if(vm)return nu;vm=1;const t=ps();function e(n){this.mode=t.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let r=0,s=this.data.length;r<s;r++)n.put(this.data[r],8)},nu=e,nu}var ru,wm;function nD(){if(wm)return ru;wm=1;const t=ps(),e=fs();function n(r){this.mode=t.KANJI,this.data=r}return n.getBitsLength=function(s){return s*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let s;for(s=0;s<this.data.length;s++){let i=e.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),r.put(i,13)}},ru=n,ru}var su={exports:{}},Em;function rD(){return Em||(Em=1,function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,u,h,f,g,_,A,k,P;!a.empty();){c=a.pop(),u=c.value,f=c.cost,g=n[u]||{};for(h in g)g.hasOwnProperty(h)&&(_=g[h],A=f+_,k=o[h],P=typeof o[h]>"u",(P||k>A)&&(o[h]=A,a.push(h,A),i[h]=u))}if(typeof s<"u"&&typeof o[s]>"u"){var N=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(N)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(su)),su.exports}var Tm;function sD(){return Tm||(Tm=1,function(t){const e=ps(),n=ZN(),r=eD(),s=tD(),i=nD(),o=nE(),a=fs(),c=rD();function u(N){return unescape(encodeURIComponent(N)).length}function h(N,V,M){const O=[];let J;for(;(J=N.exec(M))!==null;)O.push({data:J[0],index:J.index,mode:V,length:J[0].length});return O}function f(N){const V=h(o.NUMERIC,e.NUMERIC,N),M=h(o.ALPHANUMERIC,e.ALPHANUMERIC,N);let O,J;return a.isKanjiModeEnabled()?(O=h(o.BYTE,e.BYTE,N),J=h(o.KANJI,e.KANJI,N)):(O=h(o.BYTE_KANJI,e.BYTE,N),J=[]),V.concat(M,O,J).sort(function(T,y){return T.index-y.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function g(N,V){switch(V){case e.NUMERIC:return n.getBitsLength(N);case e.ALPHANUMERIC:return r.getBitsLength(N);case e.KANJI:return i.getBitsLength(N);case e.BYTE:return s.getBitsLength(N)}}function _(N){return N.reduce(function(V,M){const O=V.length-1>=0?V[V.length-1]:null;return O&&O.mode===M.mode?(V[V.length-1].data+=M.data,V):(V.push(M),V)},[])}function A(N){const V=[];for(let M=0;M<N.length;M++){const O=N[M];switch(O.mode){case e.NUMERIC:V.push([O,{data:O.data,mode:e.ALPHANUMERIC,length:O.length},{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.ALPHANUMERIC:V.push([O,{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.KANJI:V.push([O,{data:O.data,mode:e.BYTE,length:u(O.data)}]);break;case e.BYTE:V.push([{data:O.data,mode:e.BYTE,length:u(O.data)}])}}return V}function k(N,V){const M={},O={start:{}};let J=["start"];for(let U=0;U<N.length;U++){const T=N[U],y=[];for(let v=0;v<T.length;v++){const b=T[v],S=""+U+v;y.push(S),M[S]={node:b,lastCount:0},O[S]={};for(let I=0;I<J.length;I++){const E=J[I];M[E]&&M[E].node.mode===b.mode?(O[E][S]=g(M[E].lastCount+b.length,b.mode)-g(M[E].lastCount,b.mode),M[E].lastCount+=b.length):(M[E]&&(M[E].lastCount=b.length),O[E][S]=g(b.length,b.mode)+4+e.getCharCountIndicator(b.mode,V))}}J=y}for(let U=0;U<J.length;U++)O[J[U]].end=0;return{map:O,table:M}}function P(N,V){let M;const O=e.getBestModeForData(N);if(M=e.from(V,O),M!==e.BYTE&&M.bit<O.bit)throw new Error('"'+N+'" cannot be encoded with mode '+e.toString(M)+`.
 Suggested mode is: `+e.toString(O));switch(M===e.KANJI&&!a.isKanjiModeEnabled()&&(M=e.BYTE),M){case e.NUMERIC:return new n(N);case e.ALPHANUMERIC:return new r(N);case e.KANJI:return new i(N);case e.BYTE:return new s(N)}}t.fromArray=function(V){return V.reduce(function(M,O){return typeof O=="string"?M.push(P(O,null)):O.data&&M.push(P(O.data,O.mode)),M},[])},t.fromString=function(V,M){const O=f(V,a.isKanjiModeEnabled()),J=A(O),U=k(J,M),T=c.find_path(U.map,"start","end"),y=[];for(let v=1;v<T.length-1;v++)y.push(U.table[T[v]].node);return t.fromArray(_(y))},t.rawSplit=function(V){return t.fromArray(f(V,a.isKanjiModeEnabled()))}}(Zc)),Zc}var bm;function iD(){if(bm)return Bc;bm=1;const t=fs(),e=Ed(),n=qN(),r=zN(),s=HN(),i=KN(),o=GN(),a=eE(),c=JN(),u=YN(),h=XN(),f=ps(),g=sD();function _(U,T){const y=U.size,v=i.getPositions(T);for(let b=0;b<v.length;b++){const S=v[b][0],I=v[b][1];for(let E=-1;E<=7;E++)if(!(S+E<=-1||y<=S+E))for(let ee=-1;ee<=7;ee++)I+ee<=-1||y<=I+ee||(E>=0&&E<=6&&(ee===0||ee===6)||ee>=0&&ee<=6&&(E===0||E===6)||E>=2&&E<=4&&ee>=2&&ee<=4?U.set(S+E,I+ee,!0,!0):U.set(S+E,I+ee,!1,!0))}}function A(U){const T=U.size;for(let y=8;y<T-8;y++){const v=y%2===0;U.set(y,6,v,!0),U.set(6,y,v,!0)}}function k(U,T){const y=s.getPositions(T);for(let v=0;v<y.length;v++){const b=y[v][0],S=y[v][1];for(let I=-2;I<=2;I++)for(let E=-2;E<=2;E++)I===-2||I===2||E===-2||E===2||I===0&&E===0?U.set(b+I,S+E,!0,!0):U.set(b+I,S+E,!1,!0)}}function P(U,T){const y=U.size,v=u.getEncodedBits(T);let b,S,I;for(let E=0;E<18;E++)b=Math.floor(E/3),S=E%3+y-8-3,I=(v>>E&1)===1,U.set(b,S,I,!0),U.set(S,b,I,!0)}function N(U,T,y){const v=U.size,b=h.getEncodedBits(T,y);let S,I;for(S=0;S<15;S++)I=(b>>S&1)===1,S<6?U.set(S,8,I,!0):S<8?U.set(S+1,8,I,!0):U.set(v-15+S,8,I,!0),S<8?U.set(8,v-S-1,I,!0):S<9?U.set(8,15-S-1+1,I,!0):U.set(8,15-S-1,I,!0);U.set(v-8,8,1,!0)}function V(U,T){const y=U.size;let v=-1,b=y-1,S=7,I=0;for(let E=y-1;E>0;E-=2)for(E===6&&E--;;){for(let ee=0;ee<2;ee++)if(!U.isReserved(b,E-ee)){let Le=!1;I<T.length&&(Le=(T[I]>>>S&1)===1),U.set(b,E-ee,Le),S--,S===-1&&(I++,S=7)}if(b+=v,b<0||y<=b){b-=v,v=-v;break}}}function M(U,T,y){const v=new n;y.forEach(function(ee){v.put(ee.mode.bit,4),v.put(ee.getLength(),f.getCharCountIndicator(ee.mode,U)),ee.write(v)});const b=t.getSymbolTotalCodewords(U),S=a.getTotalCodewordsCount(U,T),I=(b-S)*8;for(v.getLengthInBits()+4<=I&&v.put(0,4);v.getLengthInBits()%8!==0;)v.putBit(0);const E=(I-v.getLengthInBits())/8;for(let ee=0;ee<E;ee++)v.put(ee%2?17:236,8);return O(v,U,T)}function O(U,T,y){const v=t.getSymbolTotalCodewords(T),b=a.getTotalCodewordsCount(T,y),S=v-b,I=a.getBlocksCount(T,y),E=v%I,ee=I-E,Le=Math.floor(v/I),Ve=Math.floor(S/I),Te=Ve+1,ve=Le-Ve,xt=new c(ve);let Nt=0;const ut=new Array(I),qe=new Array(I);let Fe=0;const pn=new Uint8Array(U.buffer);for(let G=0;G<I;G++){const ne=G<ee?Ve:Te;ut[G]=pn.slice(Nt,Nt+ne),qe[G]=xt.encode(ut[G]),Nt+=ne,Fe=Math.max(Fe,ne)}const Lt=new Uint8Array(v);let ht=0,F,Y;for(F=0;F<Fe;F++)for(Y=0;Y<I;Y++)F<ut[Y].length&&(Lt[ht++]=ut[Y][F]);for(F=0;F<ve;F++)for(Y=0;Y<I;Y++)Lt[ht++]=qe[Y][F];return Lt}function J(U,T,y,v){let b;if(Array.isArray(U))b=g.fromArray(U);else if(typeof U=="string"){let Le=T;if(!Le){const Ve=g.rawSplit(U);Le=u.getBestVersionForData(Ve,y)}b=g.fromString(U,Le||40)}else throw new Error("Invalid data");const S=u.getBestVersionForData(b,y);if(!S)throw new Error("The amount of data is too big to be stored in a QR Code");if(!T)T=S;else if(T<S)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+S+`.
`);const I=M(T,y,b),E=t.getSymbolSize(T),ee=new r(E);return _(ee,T),A(ee),k(ee,T),N(ee,y,0),T>=7&&P(ee,T),V(ee,I),isNaN(v)&&(v=o.getBestMask(ee,N.bind(null,ee,y))),o.applyMask(v,ee),N(ee,y,v),{modules:ee,version:T,errorCorrectionLevel:y,maskPattern:v,segments:b}}return Bc.create=function(T,y){if(typeof T>"u"||T==="")throw new Error("No input text");let v=e.M,b,S;return typeof y<"u"&&(v=e.from(y.errorCorrectionLevel,e.M),b=u.from(y.version),S=o.from(y.maskPattern),y.toSJISFunc&&t.setToSJISFunction(y.toSJISFunc)),J(T,b,v,S)},Bc}var iu={},ou={},Im;function rE(){return Im||(Im=1,function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){const o=s.modules.size,a=s.modules.data,c=t.getScale(o,i),u=Math.floor((o+i.margin*2)*c),h=i.margin*c,f=[i.color.light,i.color.dark];for(let g=0;g<u;g++)for(let _=0;_<u;_++){let A=(g*u+_)*4,k=i.color.light;if(g>=h&&_>=h&&g<u-h&&_<u-h){const P=Math.floor((g-h)/c),N=Math.floor((_-h)/c);k=f[a[P*o+N]?1:0]}r[A++]=k.r,r[A++]=k.g,r[A++]=k.b,r[A]=k.a}}}(ou)),ou}var Am;function oD(){return Am||(Am=1,function(t){const e=rE();function n(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=r()),c=e.getOptions(c);const h=e.getImageWidth(i.modules.size,c),f=u.getContext("2d"),g=f.createImageData(h,h);return e.qrToImageData(g.data,i,c),n(f,u,h),f.putImageData(g,0,0),u},t.renderToDataURL=function(i,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(i,o,c),h=c.type||"image/png",f=c.rendererOpts||{};return u.toDataURL(h,f.quality)}}(iu)),iu}var au={},Sm;function aD(){if(Sm)return au;Sm=1;const t=rE();function e(s,i){const o=s.a/255,a=i+'="'+s.hex+'"';return o<1?a+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function n(s,i,o){let a=s+i;return typeof o<"u"&&(a+=" "+o),a}function r(s,i,o){let a="",c=0,u=!1,h=0;for(let f=0;f<s.length;f++){const g=Math.floor(f%i),_=Math.floor(f/i);!g&&!u&&(u=!0),s[f]?(h++,f>0&&g>0&&s[f-1]||(a+=u?n("M",g+o,.5+_+o):n("m",c,0),c=0,u=!1),g+1<i&&s[f+1]||(a+=n("h",h),h=0)):c++}return a}return au.render=function(i,o,a){const c=t.getOptions(o),u=i.modules.size,h=i.modules.data,f=u+c.margin*2,g=c.color.light.a?"<path "+e(c.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",_="<path "+e(c.color.dark,"stroke")+' d="'+r(h,u,c.margin)+'"/>',A='viewBox="0 0 '+f+" "+f+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+A+' shape-rendering="crispEdges">'+g+_+`</svg>
`;return typeof a=="function"&&a(null,P),P},au}var Cm;function lD(){if(Cm)return Is;Cm=1;const t=jN(),e=iD(),n=oD(),r=aD();function s(i,o,a,c,u){const h=[].slice.call(arguments,1),f=h.length,g=typeof h[f-1]=="function";if(!g&&!t())throw new Error("Callback required as last argument");if(g){if(f<2)throw new Error("Too few arguments provided");f===2?(u=a,a=o,o=c=void 0):f===3&&(o.getContext&&typeof u>"u"?(u=c,c=void 0):(u=c,c=a,a=o,o=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(a=o,o=c=void 0):f===2&&!o.getContext&&(c=a,a=o,o=void 0),new Promise(function(_,A){try{const k=e.create(a,c);_(i(k,o,c))}catch(k){A(k)}})}try{const _=e.create(a,c);u(null,i(_,o,c))}catch(_){u(_)}}return Is.create=e.create,Is.toCanvas=s.bind(null,n.render),Is.toDataURL=s.bind(null,n.renderToDataURL),Is.toString=s.bind(null,function(i,o,a){return r.render(i,a)}),Is}var cD=lD();const uD=$N(cD),hD={name:"QrCodeGenerator",setup(){const t=he(""),e=he("#000000"),n=he("#FFFFFF"),r=he(200),s=he(null),i=he(!1),o=he(""),a=he("success"),c=he(!1),u=(A,k="success")=>{o.value=A,a.value=k,i.value=!0,setTimeout(()=>{i.value=!1},3e3)},h=()=>{if(!t.value)return;const A=s.value,k={width:r.value,margin:1,color:{dark:e.value,light:n.value}};uD.toCanvas(A,t.value,k,P=>{P&&(console.error("Erreur lors de la gnration du QR code:",P),u("Erreur lors de la gnration du QR Code","error"))}),localStorage.setItem("qrcode-text",t.value),localStorage.setItem("qrcode-fg-color",e.value),localStorage.setItem("qrcode-bg-color",n.value),localStorage.setItem("qrcode-size",r.value)},f=()=>{if(t.value)try{const A=s.value,k=document.createElement("a");let P="qrcode";t.value.length<=20?P=`qrcode-${t.value.replace(/[^a-z0-9]/gi,"-")}`:P=`qrcode-${new Date().getTime()}`,k.download=`${P}.png`,k.href=A.toDataURL("image/png"),k.click(),u("QR Code tlcharg avec succs")}catch(A){console.error("Erreur lors du tlchargement:",A),u("Erreur lors du tlchargement","error")}},g=async()=>{if(t.value)try{const A=s.value;A.toBlob(async k=>{try{if(navigator.clipboard&&navigator.clipboard.write){const P=new ClipboardItem({"image/png":k});await navigator.clipboard.write([P]),u("QR Code copi dans le presse-papier")}else{const P=A.toDataURL("image/png"),N=document.createElement("textarea");N.value=P,document.body.appendChild(N),N.select(),document.execCommand("copy"),document.body.removeChild(N),u("Lien du QR Code copi dans le presse-papier")}}catch(P){console.error("Erreur lors de la copie:",P),u("Impossible de copier le QR Code","error")}})}catch(A){console.error("Erreur lors de la cration du blob:",A),u("Impossible de copier le QR Code","error")}},_=async()=>{if(!(!t.value||!c.value))try{s.value.toBlob(async k=>{try{const P=new File([k],"qrcode.png",{type:"image/png"}),N={title:"Partager QR Code",text:`QR Code pour: ${t.value.substring(0,50)}${t.value.length>50?"...":""}`,files:[P]};navigator.canShare&&navigator.canShare(N)?(await navigator.share(N),u("QR Code partag avec succs")):(await navigator.share({title:"Partager QR Code",text:`Voici mon QR Code pour: ${t.value.substring(0,50)}${t.value.length>50?"...":""}`}),u("Lien de partage envoy"))}catch(P){P.name!=="AbortError"&&(console.error("Erreur lors du partage:",P),u("Impossible de partager le QR Code","error"))}})}catch(A){console.error("Erreur lors de la cration du blob:",A),u("Impossible de partager le QR Code","error")}};return ls(()=>{t.value=localStorage.getItem("qrcode-text")||"",e.value=localStorage.getItem("qrcode-fg-color")||"#000000",n.value=localStorage.getItem("qrcode-bg-color")||"#FFFFFF",r.value=parseInt(localStorage.getItem("qrcode-size"))||200,c.value=!!navigator.share,t.value&&setTimeout(()=>{h()},100)}),{text:t,fgColor:e,bgColor:n,size:r,qrCanvas:s,showToast:i,toastMessage:o,toastType:a,canShare:c,generateQRCode:h,downloadQRCode:f,copyToClipboard:g,shareQRCode:_}}},dD={class:"qr-code-container"},fD={class:"qr-form"},pD={class:"form-group"},gD={class:"form-group color-inputs"},mD={class:"form-group"},_D={for:"sizeRange"},yD={ref:"qrCanvas"},vD={key:0,class:"empty-state"},wD={class:"qr-actions"},ED=["disabled"],TD=["disabled"],bD=["disabled"];function ID(t,e,n,r,s,i){return re(),se("div",dD,[e[18]||(e[18]=m("h1",null,"Gnrateur de QR Code",-1)),m("div",fD,[m("div",pD,[e[11]||(e[11]=m("label",{for:"qrInput"},"Texte ou URL",-1)),Pe(m("textarea",{id:"qrInput","onUpdate:modelValue":e[0]||(e[0]=o=>r.text=o),placeholder:"Entrez le texte  convertir en QR Code",onInput:e[1]||(e[1]=(...o)=>r.generateQRCode&&r.generateQRCode(...o)),class:"text-input"},null,544),[[Xe,r.text]])]),m("div",gD,[m("div",null,[e[12]||(e[12]=m("label",{for:"fgColor"},"Couleur",-1)),Pe(m("input",{type:"color",id:"fgColor","onUpdate:modelValue":e[2]||(e[2]=o=>r.fgColor=o),onChange:e[3]||(e[3]=(...o)=>r.generateQRCode&&r.generateQRCode(...o))},null,544),[[Xe,r.fgColor]])]),m("div",null,[e[13]||(e[13]=m("label",{for:"bgColor"},"Fond",-1)),Pe(m("input",{type:"color",id:"bgColor","onUpdate:modelValue":e[4]||(e[4]=o=>r.bgColor=o),onChange:e[5]||(e[5]=(...o)=>r.generateQRCode&&r.generateQRCode(...o))},null,544),[[Xe,r.bgColor]])])]),m("div",mD,[m("label",_D,"Taille: "+Ee(r.size)+"px",1),Pe(m("input",{type:"range",id:"sizeRange","onUpdate:modelValue":e[6]||(e[6]=o=>r.size=o),min:"100",max:"300",step:"10",onChange:e[7]||(e[7]=(...o)=>r.generateQRCode&&r.generateQRCode(...o))},null,544),[[Xe,r.size,void 0,{number:!0}]])])]),m("div",{class:"qr-preview",style:oi({backgroundColor:r.bgColor})},[m("canvas",yD,null,512),r.text?lt("",!0):(re(),se("div",vD,e[14]||(e[14]=[m("i",{class:"fas fa-qrcode"},null,-1),m("p",null,"Entrez du texte pour gnrer un QR code",-1)])))],4),m("div",wD,[m("button",{onClick:e[8]||(e[8]=(...o)=>r.downloadQRCode&&r.downloadQRCode(...o)),class:"btn download-btn",disabled:!r.text},e[15]||(e[15]=[m("i",{class:"fas fa-download"},null,-1),et(" Tlcharger ")]),8,ED),m("button",{onClick:e[9]||(e[9]=(...o)=>r.copyToClipboard&&r.copyToClipboard(...o)),class:"btn copy-btn",disabled:!r.text},e[16]||(e[16]=[m("i",{class:"fas fa-copy"},null,-1),et(" Copier ")]),8,TD),m("button",{onClick:e[10]||(e[10]=(...o)=>r.shareQRCode&&r.shareQRCode(...o)),class:"btn share-btn",disabled:!r.text||!r.canShare},e[17]||(e[17]=[m("i",{class:"fas fa-share-alt"},null,-1),et(" Partager ")]),8,bD)]),r.showToast?(re(),se("div",{key:0,class:He(["toast",r.toastType])},Ee(r.toastMessage),3)):lt("",!0)])}const AD=fn(hD,[["render",ID],["__scopeId","data-v-19be0f62"]]),SD={name:"Converter",data(){return{activeTab:0,tabs:[{name:"Longueur",icon:"fas fa-ruler"},{name:"Poids",icon:"fas fa-weight-hanging"},{name:"Temprature",icon:"fas fa-thermometer-half"}],lengthFrom:"",lengthTo:"",lengthFromUnit:"m",lengthToUnit:"cm",lengthFormula:"",weightFrom:"",weightTo:"",weightFromUnit:"kg",weightToUnit:"g",weightFormula:"",tempFrom:"",tempTo:"",tempFromUnit:"C",tempToUnit:"F",tempFormula:""}},methods:{convert(t){if(t==="length"){if(!this.lengthFrom){this.lengthTo="",this.lengthFormula="";return}let e;switch(this.lengthFromUnit){case"m":e=parseFloat(this.lengthFrom);break;case"km":e=parseFloat(this.lengthFrom)*1e3;break;case"cm":e=parseFloat(this.lengthFrom)/100;break;case"mm":e=parseFloat(this.lengthFrom)/1e3;break;case"ft":e=parseFloat(this.lengthFrom)*.3048;break;case"in":e=parseFloat(this.lengthFrom)*.0254;break}switch(this.lengthToUnit){case"m":this.lengthTo=e;break;case"km":this.lengthTo=e/1e3;break;case"cm":this.lengthTo=e*100;break;case"mm":this.lengthTo=e*1e3;break;case"ft":this.lengthTo=e/.3048;break;case"in":this.lengthTo=e/.0254;break}this.lengthTo=parseFloat(this.lengthTo).toFixed(4),this.lengthFormula=`${this.lengthFrom} ${this.lengthFromUnit} = ${this.lengthTo} ${this.lengthToUnit}`}else if(t==="weight"){if(!this.weightFrom){this.weightTo="",this.weightFormula="";return}let e;switch(this.weightFromUnit){case"kg":e=parseFloat(this.weightFrom);break;case"g":e=parseFloat(this.weightFrom)/1e3;break;case"lb":e=parseFloat(this.weightFrom)*.453592;break;case"oz":e=parseFloat(this.weightFrom)*.0283495;break}switch(this.weightToUnit){case"kg":this.weightTo=e;break;case"g":this.weightTo=e*1e3;break;case"lb":this.weightTo=e/.453592;break;case"oz":this.weightTo=e/.0283495;break}this.weightTo=parseFloat(this.weightTo).toFixed(4),this.weightFormula=`${this.weightFrom} ${this.weightFromUnit} = ${this.weightTo} ${this.weightToUnit}`}else if(t==="temp"){if(!this.tempFrom){this.tempTo="",this.tempFormula="";return}let e;switch(this.tempFromUnit){case"C":e=parseFloat(this.tempFrom);break;case"F":e=(parseFloat(this.tempFrom)-32)*5/9;break;case"K":e=parseFloat(this.tempFrom)-273.15;break}switch(this.tempToUnit){case"C":this.tempTo=e;break;case"F":this.tempTo=e*9/5+32;break;case"K":this.tempTo=e+273.15;break}this.tempTo=parseFloat(this.tempTo).toFixed(2),this.tempFormula=`${this.tempFrom} ${this.tempFromUnit} = ${this.tempTo} ${this.tempToUnit}`}},convertReverse(t){if(t==="length"){const e=this.lengthFrom;this.lengthFrom=this.lengthTo,this.lengthTo=e,this.convert(t);const n=this.lengthTo;this.lengthTo=this.lengthFrom,this.lengthFrom=n}else if(t==="weight"){const e=this.weightFrom;this.weightFrom=this.weightTo,this.weightTo=e,this.convert(t);const n=this.weightTo;this.weightTo=this.weightFrom,this.weightFrom=n}else if(t==="temp"){const e=this.tempFrom;this.tempFrom=this.tempTo,this.tempTo=e,this.convert(t);const n=this.tempTo;this.tempTo=this.tempFrom,this.tempFrom=n}},swap(t){if(t==="length"){const e=this.lengthFromUnit;this.lengthFromUnit=this.lengthToUnit,this.lengthToUnit=e,this.convert("length")}else if(t==="weight"){const e=this.weightFromUnit;this.weightFromUnit=this.weightToUnit,this.weightToUnit=e,this.convert("weight")}else if(t==="temp"){const e=this.tempFromUnit;this.tempFromUnit=this.tempToUnit,this.tempToUnit=e,this.convert("temp")}}}},CD={class:"converter"},RD={class:"converter-card"},kD={class:"converter-header"},PD={class:"converter-tabs"},xD=["onClick"],ND={class:"converter-body"},DD={key:0,class:"converter-content"},OD={class:"converter-inputs"},VD={class:"input-group"},MD={class:"input-group"},LD={class:"conversion-formula"},FD={key:1,class:"converter-content"},UD={class:"converter-inputs"},BD={class:"input-group"},$D={class:"input-group"},jD={class:"conversion-formula"},qD={key:2,class:"converter-content"},zD={class:"converter-inputs"},HD={class:"input-group"},KD={class:"input-group"},GD={class:"conversion-formula"};function WD(t,e,n,r,s,i){return re(),se("div",CD,[e[42]||(e[42]=m("h1",null,"Convertisseur universel",-1)),m("div",RD,[m("div",kD,[m("div",PD,[(re(!0),se(nt,null,bn(s.tabs,(o,a)=>(re(),se("button",{key:a,class:He(["tab-button",{active:s.activeTab===a}]),onClick:c=>s.activeTab=a},[m("i",{class:He(o.icon)},null,2),et(" "+Ee(o.name),1)],10,xD))),128))])]),m("div",ND,[s.activeTab===0?(re(),se("div",DD,[m("div",OD,[m("div",VD,[e[28]||(e[28]=m("label",{for:"length-from"},"De",-1)),Pe(m("input",{type:"number",id:"length-from","onUpdate:modelValue":e[0]||(e[0]=o=>s.lengthFrom=o),onInput:e[1]||(e[1]=o=>i.convert("length")),placeholder:"Entrez une valeur"},null,544),[[Xe,s.lengthFrom]]),Pe(m("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.lengthFromUnit=o),onChange:e[3]||(e[3]=o=>i.convert("length"))},e[27]||(e[27]=[Ba('<option value="m" data-v-03ce3359>Mtres</option><option value="km" data-v-03ce3359>Kilomtres</option><option value="cm" data-v-03ce3359>Centimtres</option><option value="mm" data-v-03ce3359>Millimtres</option><option value="ft" data-v-03ce3359>Pieds</option><option value="in" data-v-03ce3359>Pouces</option>',6)]),544),[[fr,s.lengthFromUnit]])]),m("div",{class:"swap-button",onClick:e[4]||(e[4]=o=>i.swap("length"))},e[29]||(e[29]=[m("i",{class:"fas fa-exchange-alt"},null,-1)])),m("div",MD,[e[31]||(e[31]=m("label",{for:"length-to"},"Vers",-1)),Pe(m("input",{type:"number",id:"length-to","onUpdate:modelValue":e[5]||(e[5]=o=>s.lengthTo=o),onInput:e[6]||(e[6]=o=>i.convertReverse("length")),placeholder:"Rsultat"},null,544),[[Xe,s.lengthTo]]),Pe(m("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.lengthToUnit=o),onChange:e[8]||(e[8]=o=>i.convert("length"))},e[30]||(e[30]=[Ba('<option value="m" data-v-03ce3359>Mtres</option><option value="km" data-v-03ce3359>Kilomtres</option><option value="cm" data-v-03ce3359>Centimtres</option><option value="mm" data-v-03ce3359>Millimtres</option><option value="ft" data-v-03ce3359>Pieds</option><option value="in" data-v-03ce3359>Pouces</option>',6)]),544),[[fr,s.lengthToUnit]])])]),m("div",LD,[m("p",null,Ee(s.lengthFormula),1)])])):lt("",!0),s.activeTab===1?(re(),se("div",FD,[m("div",UD,[m("div",BD,[e[33]||(e[33]=m("label",{for:"weight-from"},"De",-1)),Pe(m("input",{type:"number",id:"weight-from","onUpdate:modelValue":e[9]||(e[9]=o=>s.weightFrom=o),onInput:e[10]||(e[10]=o=>i.convert("weight")),placeholder:"Entrez une valeur"},null,544),[[Xe,s.weightFrom]]),Pe(m("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.weightFromUnit=o),onChange:e[12]||(e[12]=o=>i.convert("weight"))},e[32]||(e[32]=[m("option",{value:"kg"},"Kilogrammes",-1),m("option",{value:"g"},"Grammes",-1),m("option",{value:"lb"},"Livres",-1),m("option",{value:"oz"},"Onces",-1)]),544),[[fr,s.weightFromUnit]])]),m("div",{class:"swap-button",onClick:e[13]||(e[13]=o=>i.swap("weight"))},e[34]||(e[34]=[m("i",{class:"fas fa-exchange-alt"},null,-1)])),m("div",$D,[e[36]||(e[36]=m("label",{for:"weight-to"},"Vers",-1)),Pe(m("input",{type:"number",id:"weight-to","onUpdate:modelValue":e[14]||(e[14]=o=>s.weightTo=o),onInput:e[15]||(e[15]=o=>i.convertReverse("weight")),placeholder:"Rsultat"},null,544),[[Xe,s.weightTo]]),Pe(m("select",{"onUpdate:modelValue":e[16]||(e[16]=o=>s.weightToUnit=o),onChange:e[17]||(e[17]=o=>i.convert("weight"))},e[35]||(e[35]=[m("option",{value:"kg"},"Kilogrammes",-1),m("option",{value:"g"},"Grammes",-1),m("option",{value:"lb"},"Livres",-1),m("option",{value:"oz"},"Onces",-1)]),544),[[fr,s.weightToUnit]])])]),m("div",jD,[m("p",null,Ee(s.weightFormula),1)])])):lt("",!0),s.activeTab===2?(re(),se("div",qD,[m("div",zD,[m("div",HD,[e[38]||(e[38]=m("label",{for:"temp-from"},"De",-1)),Pe(m("input",{type:"number",id:"temp-from","onUpdate:modelValue":e[18]||(e[18]=o=>s.tempFrom=o),onInput:e[19]||(e[19]=o=>i.convert("temp")),placeholder:"Entrez une valeur"},null,544),[[Xe,s.tempFrom]]),Pe(m("select",{"onUpdate:modelValue":e[20]||(e[20]=o=>s.tempFromUnit=o),onChange:e[21]||(e[21]=o=>i.convert("temp"))},e[37]||(e[37]=[m("option",{value:"C"},"Celsius",-1),m("option",{value:"F"},"Fahrenheit",-1),m("option",{value:"K"},"Kelvin",-1)]),544),[[fr,s.tempFromUnit]])]),m("div",{class:"swap-button",onClick:e[22]||(e[22]=o=>i.swap("temp"))},e[39]||(e[39]=[m("i",{class:"fas fa-exchange-alt"},null,-1)])),m("div",KD,[e[41]||(e[41]=m("label",{for:"temp-to"},"Vers",-1)),Pe(m("input",{type:"number",id:"temp-to","onUpdate:modelValue":e[23]||(e[23]=o=>s.tempTo=o),onInput:e[24]||(e[24]=o=>i.convertReverse("temp")),placeholder:"Rsultat"},null,544),[[Xe,s.tempTo]]),Pe(m("select",{"onUpdate:modelValue":e[25]||(e[25]=o=>s.tempToUnit=o),onChange:e[26]||(e[26]=o=>i.convert("temp"))},e[40]||(e[40]=[m("option",{value:"C"},"Celsius",-1),m("option",{value:"F"},"Fahrenheit",-1),m("option",{value:"K"},"Kelvin",-1)]),544),[[fr,s.tempToUnit]])])]),m("div",GD,[m("p",null,Ee(s.tempFormula),1)])])):lt("",!0)])])])}const QD=fn(SD,[["render",WD],["__scopeId","data-v-03ce3359"]]),JD={name:"Calculator",data(){return{currentValue:"0",previousValue:null,calculation:"",operator:null,waitingForOperand:!1,history:[]}},methods:{appendNumber(t){this.waitingForOperand?(this.currentValue=String(t),this.waitingForOperand=!1):this.currentValue=this.currentValue==="0"?String(t):this.currentValue+t},appendDecimal(){if(this.waitingForOperand){this.currentValue="0.",this.waitingForOperand=!1;return}this.currentValue.includes(".")||(this.currentValue+=".")},invertSign(){const t=parseFloat(this.currentValue);this.currentValue=String(-t)},percentage(){const t=parseFloat(this.currentValue)/100;this.currentValue=String(t)},setOperator(t){const e=parseFloat(this.currentValue);if(this.operator&&this.waitingForOperand){this.operator=t;return}if(this.previousValue===null)this.previousValue=e;else if(this.operator){const n=this.performCalculation(this.previousValue,e,this.operator);this.currentValue=String(n),this.previousValue=n}this.waitingForOperand=!0,this.operator=t,this.calculation=`${this.previousValue} ${this.operator} `},calculate(){const t=parseFloat(this.currentValue);if(this.previousValue===null||this.operator===null)return;const e=`${this.previousValue} ${this.operator} ${t}`,n=this.performCalculation(this.previousValue,t,this.operator);this.history.unshift({calculation:e,result:n}),this.currentValue=String(n),this.calculation=e,this.previousValue=null,this.operator=null,this.waitingForOperand=!0,this.history.length>10&&this.history.pop()},performCalculation(t,e,n){switch(n){case"+":return t+e;case"-":return t-e;case"*":return t*e;case"/":return e!==0?t/e:"Error";default:return e}},clear(){this.currentValue="0",this.previousValue=null,this.calculation="",this.operator=null,this.waitingForOperand=!1},clearEntry(){this.currentValue="0"},clearHistory(){this.history=[]},useHistoryItem(t){this.currentValue=String(t.result),this.previousValue=null,this.operator=null,this.waitingForOperand=!1,this.calculation=""}}},YD={class:"calculator-page"},XD={class:"calculator"},ZD={class:"calculator-display"},e2={class:"calculation"},t2={class:"result"},n2={class:"calculator-keypad"},r2={class:"calculator-row"},s2={class:"calculator-row"},i2={class:"calculator-row"},o2={class:"calculator-row"},a2={class:"calculator-row"},l2={class:"calculator-history"},c2={class:"history-list"},u2={key:0,class:"empty-history"},h2=["onClick"],d2={class:"history-calculation"},f2={class:"history-result"};function p2(t,e,n,r,s,i){return re(),se("div",YD,[m("div",XD,[m("div",ZD,[m("div",e2,Ee(s.calculation),1),m("div",t2,Ee(s.currentValue),1)]),m("div",n2,[m("div",r2,[m("button",{class:"function-key",onClick:e[0]||(e[0]=(...o)=>i.clear&&i.clear(...o))},"C"),m("button",{class:"function-key",onClick:e[1]||(e[1]=(...o)=>i.clearEntry&&i.clearEntry(...o))},"CE"),m("button",{class:"function-key",onClick:e[2]||(e[2]=(...o)=>i.percentage&&i.percentage(...o))},"%"),m("button",{class:"operator-key",onClick:e[3]||(e[3]=o=>i.setOperator("/"))},"/")]),m("div",s2,[m("button",{class:"number-key",onClick:e[4]||(e[4]=o=>i.appendNumber(7))},"7"),m("button",{class:"number-key",onClick:e[5]||(e[5]=o=>i.appendNumber(8))},"8"),m("button",{class:"number-key",onClick:e[6]||(e[6]=o=>i.appendNumber(9))},"9"),m("button",{class:"operator-key",onClick:e[7]||(e[7]=o=>i.setOperator("*"))},"")]),m("div",i2,[m("button",{class:"number-key",onClick:e[8]||(e[8]=o=>i.appendNumber(4))},"4"),m("button",{class:"number-key",onClick:e[9]||(e[9]=o=>i.appendNumber(5))},"5"),m("button",{class:"number-key",onClick:e[10]||(e[10]=o=>i.appendNumber(6))},"6"),m("button",{class:"operator-key",onClick:e[11]||(e[11]=o=>i.setOperator("-"))},"-")]),m("div",o2,[m("button",{class:"number-key",onClick:e[12]||(e[12]=o=>i.appendNumber(1))},"1"),m("button",{class:"number-key",onClick:e[13]||(e[13]=o=>i.appendNumber(2))},"2"),m("button",{class:"number-key",onClick:e[14]||(e[14]=o=>i.appendNumber(3))},"3"),m("button",{class:"operator-key",onClick:e[15]||(e[15]=o=>i.setOperator("+"))},"+")]),m("div",a2,[m("button",{class:"number-key",onClick:e[16]||(e[16]=o=>i.appendNumber(0))},"0"),m("button",{class:"number-key",onClick:e[17]||(e[17]=(...o)=>i.appendDecimal&&i.appendDecimal(...o))},"."),m("button",{class:"number-key",onClick:e[18]||(e[18]=(...o)=>i.invertSign&&i.invertSign(...o))},"+/-"),m("button",{class:"equal-key",onClick:e[19]||(e[19]=(...o)=>i.calculate&&i.calculate(...o))},"=")])]),m("div",l2,[e[22]||(e[22]=m("h3",null,"Historique",-1)),m("div",c2,[s.history.length===0?(re(),se("div",u2," Pas d'historique ")):(re(!0),se(nt,{key:1},bn(s.history,(o,a)=>(re(),se("div",{key:a,class:"history-item",onClick:c=>i.useHistoryItem(o)},[m("div",d2,Ee(o.calculation),1),m("div",f2,"= "+Ee(o.result),1)],8,h2))),128))]),s.history.length>0?(re(),se("button",{key:0,class:"clear-history",onClick:e[20]||(e[20]=(...o)=>i.clearHistory&&i.clearHistory(...o))},e[21]||(e[21]=[m("i",{class:"fas fa-trash-alt"},null,-1),et(" Effacer l'historique ")]))):lt("",!0)])])])}const g2=fn(JD,[["render",p2],["__scopeId","data-v-224b5b81"]]),m2={name:"Settings",setup(){const t=Sl(),e=Al(),n=he(localStorage.getItem("darkMode")==="true"),r=he(localStorage.getItem("colorTheme")||"blue"),s=he(parseInt(localStorage.getItem("fontSize"))||100),i=he(localStorage.getItem("language")||"fr"),o=he(localStorage.getItem("notifications")!=="false"),a=he(localStorage.getItem("autoSave")!=="false"),c=he(!1),u=he(""),h=he("success"),f=he(null),g=rt(()=>{var b;return((b=t.state.user)==null?void 0:b.email)||"utilisateur@example.com"}),_=[{name:"blue",color:"#4361ee"},{name:"purple",color:"#8b5cf6"},{name:"green",color:"#10b981"},{name:"red",color:"#ef4444"},{name:"orange",color:"#f59e0b"}],A=(b,S="success")=>{f.value&&clearTimeout(f.value),u.value=b,h.value=S,c.value=!0,f.value=setTimeout(()=>{c.value=!1},3e3)},k=()=>{localStorage.setItem("darkMode",n.value),n.value?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode"),window.dispatchEvent(new CustomEvent("theme-changed",{detail:{isDarkMode:n.value}})),A("Mode d'affichage mis  jour")},P=b=>{r.value=b,localStorage.setItem("colorTheme",b);const S=_.find(E=>E.name===b).color;document.documentElement.style.setProperty("--primary-color",S);let I;switch(b){case"blue":I="#3f37c9";break;case"purple":I="#7c3aed";break;case"green":I="#059669";break;case"red":I="#dc2626";break;case"orange":I="#d97706";break;default:I="#3f37c9"}document.documentElement.style.setProperty("--secondary-color",I),A("Thme de couleur mis  jour")},N=()=>{s.value<150&&(s.value+=10,M(),A("Taille de police augmente"))},V=()=>{s.value>80&&(s.value-=10,M(),A("Taille de police diminue"))},M=()=>{localStorage.setItem("fontSize",s.value),document.documentElement.style.fontSize=`${s.value}%`},O=()=>{localStorage.setItem("notifications",o.value),A("Prfrences de notification mises  jour")},J=()=>{localStorage.setItem("autoSave",a.value),A("Prfrences de sauvegarde mises  jour")},U=()=>{localStorage.setItem("language",i.value),A("Langue mise  jour")},T=async()=>{try{t.state.user&&t.state.user.email?(await WS(gr,t.state.user.email),A("Email de rinitialisation de mot de passe envoy","success")):A("Aucun utilisateur connect","error")}catch(b){A("Erreur lors de l'envoi de l'email","error"),console.error(b)}},y=async()=>{try{const b=prompt("Entrez votre nom d'affichage:");b&&t.state.user&&(await Jy(t.state.user,{displayName:b}),A("Profil mis  jour avec succs","success"))}catch(b){A("Erreur lors de la mise  jour du profil","error"),console.error(b)}},v=async()=>{try{await t.dispatch("logout"),e.push("/login"),A("Dconnexion russie","success")}catch(b){A("Erreur lors de la dconnexion","error"),console.error(b)}};return ls(()=>{M(),r.value&&P(r.value)}),{isDarkMode:n,activeTheme:r,fontSize:s,language:i,notificationsEnabled:o,autoSave:a,colorThemes:_,userEmail:g,showToast:c,toastMessage:u,toastType:h,toggleDarkMode:k,setColorTheme:P,increaseFontSize:N,decreaseFontSize:V,saveNotificationSettings:O,saveAutoSaveSettings:J,saveLanguageSettings:U,changePassword:T,editProfile:y,logout:v}}},_2={class:"settings-page"},y2={class:"settings-section"},v2={class:"setting-item"},w2={class:"setting-control"},E2={class:"toggle"},T2={class:"setting-item"},b2={class:"setting-control"},I2={class:"color-themes"},A2=["onClick"],S2={class:"setting-item"},C2={class:"setting-control"},R2={class:"font-size-control"},k2={class:"font-size-value"},P2={class:"settings-section"},x2={class:"setting-item"},N2={class:"setting-control"},D2={class:"setting-item"},O2={class:"setting-control"},V2={class:"toggle"},M2={class:"setting-item"},L2={class:"setting-control"},F2={class:"toggle"},U2={class:"settings-section"},B2={class:"user-profile-settings"},$2={class:"user-details"},j2={class:"user-email"},q2={class:"setting-actions"};function z2(t,e,n,r,s,i){return re(),se("div",_2,[e[31]||(e[31]=m("h1",null,"Paramtres",-1)),m("div",y2,[e[17]||(e[17]=m("h2",null,"Apparence",-1)),m("div",v2,[e[14]||(e[14]=m("div",{class:"setting-label"},[m("span",{class:"setting-title"},"Mode sombre"),m("span",{class:"setting-description"},"Activer le mode sombre pour l'interface")],-1)),m("div",w2,[m("label",E2,[Pe(m("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>r.isDarkMode=o),onChange:e[1]||(e[1]=(...o)=>r.toggleDarkMode&&r.toggleDarkMode(...o))},null,544),[[Ji,r.isDarkMode]]),e[13]||(e[13]=m("span",{class:"toggle-slider"},null,-1))])])]),m("div",T2,[e[15]||(e[15]=m("div",{class:"setting-label"},[m("span",{class:"setting-title"},"Thme de couleur"),m("span",{class:"setting-description"},"Choisir le thme principal de l'application")],-1)),m("div",b2,[m("div",I2,[(re(!0),se(nt,null,bn(r.colorThemes,o=>(re(),se("button",{key:o.name,class:He(["color-theme-btn",{active:r.activeTheme===o.name}]),style:oi({backgroundColor:o.color}),onClick:a=>r.setColorTheme(o.name)},null,14,A2))),128))])])]),m("div",S2,[e[16]||(e[16]=m("div",{class:"setting-label"},[m("span",{class:"setting-title"},"Taille de la police"),m("span",{class:"setting-description"},"Ajuster la taille du texte dans l'application")],-1)),m("div",C2,[m("div",R2,[m("button",{class:"font-size-btn",onClick:e[2]||(e[2]=(...o)=>r.decreaseFontSize&&r.decreaseFontSize(...o))},"A-"),m("span",k2,Ee(r.fontSize)+"%",1),m("button",{class:"font-size-btn",onClick:e[3]||(e[3]=(...o)=>r.increaseFontSize&&r.increaseFontSize(...o))},"A+")])])])]),m("div",P2,[e[24]||(e[24]=m("h2",null,"Gnral",-1)),m("div",x2,[e[19]||(e[19]=m("div",{class:"setting-label"},[m("span",{class:"setting-title"},"Langue"),m("span",{class:"setting-description"},"Choisir la langue de l'interface")],-1)),m("div",N2,[Pe(m("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.language=o),class:"select-control",onChange:e[5]||(e[5]=(...o)=>r.saveLanguageSettings&&r.saveLanguageSettings(...o))},e[18]||(e[18]=[m("option",{value:"fr"},"Franais",-1),m("option",{value:"en"},"English",-1),m("option",{value:"es"},"Espaol",-1),m("option",{value:"de"},"Deutsch",-1)]),544),[[fr,r.language]])])]),m("div",D2,[e[21]||(e[21]=m("div",{class:"setting-label"},[m("span",{class:"setting-title"},"Notifications"),m("span",{class:"setting-description"},"Activer les notifications de l'application")],-1)),m("div",O2,[m("label",V2,[Pe(m("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=o=>r.notificationsEnabled=o),onChange:e[7]||(e[7]=(...o)=>r.saveNotificationSettings&&r.saveNotificationSettings(...o))},null,544),[[Ji,r.notificationsEnabled]]),e[20]||(e[20]=m("span",{class:"toggle-slider"},null,-1))])])]),m("div",M2,[e[23]||(e[23]=m("div",{class:"setting-label"},[m("span",{class:"setting-title"},"Sauvegarde automatique"),m("span",{class:"setting-description"},"Sauvegarder automatiquement les donnes")],-1)),m("div",L2,[m("label",F2,[Pe(m("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=o=>r.autoSave=o),onChange:e[9]||(e[9]=(...o)=>r.saveAutoSaveSettings&&r.saveAutoSaveSettings(...o))},null,544),[[Ji,r.autoSave]]),e[22]||(e[22]=m("span",{class:"toggle-slider"},null,-1))])])])]),m("div",U2,[e[30]||(e[30]=m("h2",null,"Compte",-1)),m("div",B2,[e[26]||(e[26]=m("div",{class:"user-avatar"},[m("i",{class:"fas fa-user-circle"})],-1)),m("div",$2,[m("h3",null,Ee(r.userEmail),1),e[25]||(e[25]=m("p",null,"Utilisateur",-1)),m("p",j2,Ee(r.userEmail),1)])]),m("div",q2,[m("button",{class:"action-btn",onClick:e[10]||(e[10]=(...o)=>r.changePassword&&r.changePassword(...o))},e[27]||(e[27]=[m("i",{class:"fas fa-key"},null,-1),et(" Changer le mot de passe ")])),m("button",{class:"action-btn",onClick:e[11]||(e[11]=(...o)=>r.editProfile&&r.editProfile(...o))},e[28]||(e[28]=[m("i",{class:"fas fa-edit"},null,-1),et(" Modifier le profil ")])),m("button",{class:"action-btn danger",onClick:e[12]||(e[12]=(...o)=>r.logout&&r.logout(...o))},e[29]||(e[29]=[m("i",{class:"fas fa-sign-out-alt"},null,-1),et(" Dconnexion ")]))])]),e[32]||(e[32]=Ba('<div class="settings-section" data-v-6f5f1362><h2 data-v-6f5f1362> propos</h2><div class="about-info" data-v-6f5f1362><p class="app-info" data-v-6f5f1362><strong data-v-6f5f1362>Tools</strong> v1.0.0</p><p class="app-description" data-v-6f5f1362>Une collection d&#39;outils utiles pour vos tches quotidiennes</p><p class="copyright" data-v-6f5f1362> 2024 Alexis - Tous droits rservs</p></div></div>',1)),r.showToast?(re(),se("div",{key:0,class:He(["toast",{success:r.toastType==="success",error:r.toastType==="error"}])},Ee(r.toastMessage),3)):lt("",!0)])}const H2=fn(m2,[["render",z2],["__scopeId","data-v-6f5f1362"]]),K2={name:"LinkBoard",setup(){const t=he([]),e=he(localStorage.getItem("link-board-view")||"grid"),n=he("all"),r=he(!1),s=he(!1),i=he(!1),o=he(-1),a=he(-1),c=he(!1),u=he(""),h=he("success"),f=he({title:"",url:"",description:"",category:""});ls(()=>{const T=localStorage.getItem("pinned-links");T&&(t.value=JSON.parse(T))}),Hn(e,T=>{localStorage.setItem("link-board-view",T)}),Hn(t,T=>{localStorage.setItem("pinned-links",JSON.stringify(T))},{deep:!0});const g=rt(()=>{const T=t.value.map(y=>y.category).filter(Boolean);return[...new Set(T)]}),_=rt(()=>n.value==="all"?t.value:t.value.filter(T=>T.category===n.value)),A=T=>{try{return new URL(T).hostname}catch{return T}},k=T=>{try{const y=new URL(T.url);return y.hostname.includes("github")?"fab fa-github":y.hostname.includes("youtube")?"fab fa-youtube":y.hostname.includes("google")?"fab fa-google":y.hostname.includes("facebook")?"fab fa-facebook":y.hostname.includes("twitter")||y.hostname.includes("x.com")?"fab fa-twitter":y.hostname.includes("instagram")?"fab fa-instagram":y.hostname.includes("linkedin")?"fab fa-linkedin":y.hostname.includes("reddit")?"fab fa-reddit":y.hostname.includes("twitch")?"fab fa-twitch":y.hostname.includes("discord")?"fab fa-discord":y.hostname.includes("slack")?"fab fa-slack":y.hostname.includes("apple")?"fab fa-apple":y.hostname.includes("microsoft")?"fab fa-microsoft":y.hostname.includes("amazon")?"fab fa-amazon":"fas fa-globe"}catch{return"fas fa-link"}},P=T=>{const y={Dveloppement:"#3b82f6",Productivit:"#10b981",Social:"#8b5cf6",Divertissement:"#f59e0b",Education:"#ef4444",Finance:"#22c55e",Shopping:"#ec4899",Actualit:"#6366f1"};if(T.category&&y[T.category])return y[T.category];try{const v=new URL(T.url);return v.hostname.includes("github")?"#24292e":v.hostname.includes("youtube")?"#ff0000":v.hostname.includes("google")?"#4285F4":v.hostname.includes("facebook")?"#1877f2":v.hostname.includes("twitter")||v.hostname.includes("x.com")?"#1da1f2":v.hostname.includes("instagram")?"#c13584":v.hostname.includes("linkedin")?"#0077b5":v.hostname.includes("reddit")?"#ff4500":"#64748b"}catch{return"#64748b"}},N=(T,y="success")=>{u.value=T,h.value=y,c.value=!0,setTimeout(()=>{c.value=!1},3e3)},V=()=>{r.value=!1,s.value=!1,i.value=!1,f.value={title:"",url:"",description:"",category:""}};return{links:t,viewMode:e,currentCategory:n,showAddModal:r,showEditModal:s,showDeleteModal:i,currentLink:f,showToast:c,toastMessage:u,toastType:h,uniqueCategories:g,filteredLinks:_,closeModals:V,editLink:T=>{o.value=T,f.value={...t.value[T]},s.value=!0},confirmDelete:T=>{a.value=T,i.value=!0},deleteLink:()=>{a.value>=0&&(t.value.splice(a.value,1),N("Lien supprim avec succs"),i.value=!1,a.value=-1)},saveLink:()=>{if(!f.value.title.trim()){N("Veuillez entrer un titre","error");return}if(!f.value.url.trim()){N("Veuillez entrer une URL","error");return}!f.value.url.startsWith("http://")&&!f.value.url.startsWith("https://")&&(f.value.url="https://"+f.value.url),s.value?(t.value[o.value]={...f.value},N("Lien mis  jour avec succs")):(t.value.push({...f.value}),N("Nouveau lien ajout")),V()},formatUrl:A,getLinkIcon:k,getLinkColor:P}}},G2={class:"link-board"},W2={class:"board-controls"},Q2={class:"view-controls"},J2={class:"categories-container"},Y2={class:"categories"},X2=["onClick"],Z2={key:0,class:"empty-board"},eO={key:0},tO={key:1},nO={class:"link-content"},rO={class:"link-title"},sO={key:0,class:"link-description"},iO={class:"link-url"},oO={class:"link-category"},aO={class:"link-actions"},lO=["href"],cO=["onClick"],uO=["onClick"],hO={class:"modal-header"},dO={class:"modal-body"},fO={class:"form-group"},pO={class:"form-group"},gO={class:"form-group"},mO={class:"form-group"},_O={class:"category-input"},yO={id:"categories"},vO=["value"],wO={class:"modal-footer"},EO={class:"modal-header"},TO={class:"modal-body"},bO={class:"delete-link-title"},IO={class:"modal-footer"};function AO(t,e,n,r,s,i){var o;return re(),se("div",G2,[e[33]||(e[33]=m("h1",null,"Mes liens",-1)),m("div",W2,[m("button",{class:"btn add-btn",onClick:e[0]||(e[0]=a=>r.showAddModal=!0)},e[18]||(e[18]=[m("i",{class:"fas fa-plus"},null,-1),et(" Ajouter un lien ")])),m("div",Q2,[m("button",{class:He(["view-btn",{active:r.viewMode==="grid"}]),onClick:e[1]||(e[1]=a=>r.viewMode="grid"),title:"Vue en grille"},e[19]||(e[19]=[m("i",{class:"fas fa-th"},null,-1)]),2),m("button",{class:He(["view-btn",{active:r.viewMode==="list"}]),onClick:e[2]||(e[2]=a=>r.viewMode="list"),title:"Vue en liste"},e[20]||(e[20]=[m("i",{class:"fas fa-list"},null,-1)]),2)])]),m("div",J2,[m("div",Y2,[m("button",{class:He(["category-btn",{active:r.currentCategory==="all"}]),onClick:e[3]||(e[3]=a=>r.currentCategory="all")}," Tous ",2),(re(!0),se(nt,null,bn(r.uniqueCategories,a=>(re(),se("button",{key:a,class:He(["category-btn",{active:r.currentCategory===a}]),onClick:c=>r.currentCategory=a},Ee(a),11,X2))),128))])]),r.filteredLinks.length===0?(re(),se("div",Z2,[e[21]||(e[21]=m("i",{class:"fas fa-link"},null,-1)),r.links.length===0?(re(),se("p",eO,`Vous n'avez pas encore ajout de liens. Commencez par cliquer sur "Ajouter un lien".`)):(re(),se("p",tO,"Aucun lien ne correspond  la catgorie slectionne."))])):lt("",!0),m("div",{class:He(["links-container",{"grid-view":r.viewMode==="grid","list-view":r.viewMode==="list"}])},[(re(!0),se(nt,null,bn(r.filteredLinks,(a,c)=>(re(),se("div",{key:c,class:"link-card"},[m("div",{class:"link-icon",style:oi({backgroundColor:r.getLinkColor(a)})},[m("i",{class:He(r.getLinkIcon(a))},null,2)],4),m("div",nO,[m("h3",rO,Ee(a.title),1),a.description&&r.viewMode==="grid"?(re(),se("p",sO,Ee(a.description),1)):lt("",!0),m("span",iO,Ee(r.formatUrl(a.url)),1),m("div",oO,Ee(a.category),1)]),m("div",aO,[m("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",class:"action-btn open-link"},e[22]||(e[22]=[m("i",{class:"fas fa-external-link-alt"},null,-1)]),8,lO),m("button",{class:"action-btn edit-link",onClick:u=>r.editLink(c)},e[23]||(e[23]=[m("i",{class:"fas fa-edit"},null,-1)]),8,cO),m("button",{class:"action-btn delete-link",onClick:u=>r.confirmDelete(c)},e[24]||(e[24]=[m("i",{class:"fas fa-trash-alt"},null,-1)]),8,uO)])]))),128))],2),r.showAddModal||r.showEditModal?(re(),se("div",{key:1,class:"modal-overlay",onClick:e[12]||(e[12]=(...a)=>r.closeModals&&r.closeModals(...a))},[m("div",{class:"modal",onClick:e[11]||(e[11]=go(()=>{},["stop"]))},[m("div",hO,[m("h2",null,Ee(r.showEditModal?"Modifier le lien":"Ajouter un lien"),1),m("button",{class:"close-modal",onClick:e[4]||(e[4]=(...a)=>r.closeModals&&r.closeModals(...a))},e[25]||(e[25]=[m("i",{class:"fas fa-times"},null,-1)]))]),m("div",dO,[m("div",fO,[e[26]||(e[26]=m("label",{for:"link-title"},"Titre",-1)),Pe(m("input",{type:"text",id:"link-title","onUpdate:modelValue":e[5]||(e[5]=a=>r.currentLink.title=a),placeholder:"Nom du site web",required:""},null,512),[[Xe,r.currentLink.title]])]),m("div",pO,[e[27]||(e[27]=m("label",{for:"link-url"},"URL",-1)),Pe(m("input",{type:"url",id:"link-url","onUpdate:modelValue":e[6]||(e[6]=a=>r.currentLink.url=a),placeholder:"https://exemple.com",required:""},null,512),[[Xe,r.currentLink.url]])]),m("div",gO,[e[28]||(e[28]=m("label",{for:"link-description"},"Description (optionnelle)",-1)),Pe(m("textarea",{id:"link-description","onUpdate:modelValue":e[7]||(e[7]=a=>r.currentLink.description=a),placeholder:"Description brve du site"},null,512),[[Xe,r.currentLink.description]])]),m("div",mO,[e[29]||(e[29]=m("label",{for:"link-category"},"Catgorie",-1)),m("div",_O,[Pe(m("input",{type:"text",id:"link-category","onUpdate:modelValue":e[8]||(e[8]=a=>r.currentLink.category=a),placeholder:"Dveloppement, Productivit, etc.",list:"categories"},null,512),[[Xe,r.currentLink.category]]),m("datalist",yO,[(re(!0),se(nt,null,bn(r.uniqueCategories,a=>(re(),se("option",{key:a,value:a},null,8,vO))),128))])])])]),m("div",wO,[m("button",{class:"btn btn-secondary",onClick:e[9]||(e[9]=(...a)=>r.closeModals&&r.closeModals(...a))},"Annuler"),m("button",{class:"btn btn-primary",onClick:e[10]||(e[10]=(...a)=>r.saveLink&&r.saveLink(...a))},Ee(r.showEditModal?"Mettre  jour":"Ajouter"),1)])])])):lt("",!0),r.showDeleteModal?(re(),se("div",{key:2,class:"modal-overlay",onClick:e[17]||(e[17]=a=>r.showDeleteModal=!1)},[m("div",{class:"modal delete-modal",onClick:e[16]||(e[16]=go(()=>{},["stop"]))},[m("div",EO,[e[31]||(e[31]=m("h2",null,"Supprimer le lien",-1)),m("button",{class:"close-modal",onClick:e[13]||(e[13]=a=>r.showDeleteModal=!1)},e[30]||(e[30]=[m("i",{class:"fas fa-times"},null,-1)]))]),m("div",TO,[e[32]||(e[32]=m("p",null,"tes-vous sr de vouloir supprimer ce lien ?",-1)),m("p",bO,Ee((o=r.links[t.deleteIndex])==null?void 0:o.title),1)]),m("div",IO,[m("button",{class:"btn btn-secondary",onClick:e[14]||(e[14]=a=>r.showDeleteModal=!1)},"Annuler"),m("button",{class:"btn btn-danger",onClick:e[15]||(e[15]=(...a)=>r.deleteLink&&r.deleteLink(...a))},"Supprimer")])])])):lt("",!0),r.showToast?(re(),se("div",{key:3,class:He(["toast",r.toastType])},Ee(r.toastMessage),3)):lt("",!0)])}const SO=fn(K2,[["render",AO],["__scopeId","data-v-ec0d919f"]]),CO={name:"NotFound",methods:{goBack(){window.history.length>1?this.$router.go(-1):this.$router.push("/")}}},RO={class:"not-found"},kO={class:"error-container"},PO={class:"actions"};function xO(t,e,n,r,s,i){const o=js("router-link");return re(),se("div",RO,[m("div",kO,[e[3]||(e[3]=m("div",{class:"error-code"},"404",-1)),e[4]||(e[4]=m("h1",null,"Page non trouve",-1)),e[5]||(e[5]=m("p",null,"Nous ne trouvons pas la page que vous recherchez.",-1)),m("div",PO,[Ze(o,{to:"/",class:"btn btn-primary"},{default:En(()=>e[1]||(e[1]=[m("i",{class:"fas fa-home"},null,-1),et(" Retour  l'accueil ")])),_:1}),m("button",{onClick:e[0]||(e[0]=(...a)=>i.goBack&&i.goBack(...a)),class:"btn btn-secondary"},e[2]||(e[2]=[m("i",{class:"fas fa-arrow-left"},null,-1),et(" Page prcdente ")]))])])])}const NO=fn(CO,[["render",xO],["__scopeId","data-v-ab29c3fe"]]),DO={setup(){const t=he(""),e=he(""),n=he(!1),r=he(""),s=he(!1),i=he(!1),o=Sl(),a=Al();return localStorage.getItem("savedEmail")&&(t.value=localStorage.getItem("savedEmail"),n.value=!0),{email:t,password:e,remember:n,error:r,loading:s,showPassword:i,handleLogin:async()=>{r.value="",s.value=!0;try{n.value?localStorage.setItem("savedEmail",t.value):localStorage.removeItem("savedEmail"),await o.dispatch("login",{email:t.value,password:e.value}),a.push("/")}catch(h){r.value=h.message||"Identifiants incorrects. Veuillez ressayer."}finally{s.value=!1}},forgotPassword:async()=>{if(!t.value){r.value="Veuillez saisir votre adresse email pour rinitialiser votre mot de passe";return}try{s.value=!0,await o.dispatch("resetPassword",t.value),r.value="",alert(`Un email de rinitialisation a t envoy  ${t.value}`)}catch(h){r.value=h.message||"Impossible d'envoyer l'email de rinitialisation"}finally{s.value=!1}}}}},OO={class:"login-container"},VO={class:"auth-card"},MO={key:0,class:"error-message"},LO={class:"form-group"},FO={class:"input-icon-wrapper"},UO={class:"form-group"},BO={class:"input-icon-wrapper"},$O=["type"],jO={class:"form-options"},qO={class:"remember-label"},zO={class:"form-actions"},HO=["disabled"],KO={key:0},GO={key:1},WO={class:"auth-links"};function QO(t,e,n,r,s,i){const o=js("router-link");return re(),se("div",OO,[m("div",VO,[e[15]||(e[15]=m("div",{class:"auth-header"},[m("i",{class:"fas fa-tools logo-icon"}),m("h1",null,"Tools")],-1)),e[16]||(e[16]=m("h2",null,"Connexion",-1)),r.error?(re(),se("div",MO,[e[6]||(e[6]=m("i",{class:"fas fa-exclamation-circle"},null,-1)),et(" "+Ee(r.error),1)])):lt("",!0),m("form",{onSubmit:e[5]||(e[5]=go((...a)=>r.handleLogin&&r.handleLogin(...a),["prevent"]))},[m("div",LO,[e[8]||(e[8]=m("label",{for:"email"},"Email",-1)),m("div",FO,[e[7]||(e[7]=m("i",{class:"fas fa-envelope input-icon"},null,-1)),Pe(m("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=a=>r.email=a),required:"",autocomplete:"email",placeholder:"Entrez votre email"},null,512),[[Xe,r.email]])])]),m("div",UO,[e[10]||(e[10]=m("label",{for:"password"},"Mot de passe",-1)),m("div",BO,[e[9]||(e[9]=m("i",{class:"fas fa-lock input-icon"},null,-1)),Pe(m("input",{type:r.showPassword?"text":"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),required:"",autocomplete:"current-password",placeholder:"Entrez votre mot de passe"},null,8,$O),[[Y0,r.password]]),m("button",{type:"button",class:"toggle-password",onClick:e[2]||(e[2]=a=>r.showPassword=!r.showPassword)},[m("i",{class:He(r.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),m("div",jO,[m("label",qO,[Pe(m("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>r.remember=a)},null,512),[[Ji,r.remember]]),e[11]||(e[11]=m("span",null,"Se souvenir de moi",-1))]),m("a",{href:"#",onClick:e[4]||(e[4]=go((...a)=>r.forgotPassword&&r.forgotPassword(...a),["prevent"])),class:"forgot-password"},"Mot de passe oubli ?")]),m("div",zO,[m("button",{type:"submit",class:"btn btn-primary",disabled:r.loading},[r.loading?(re(),se("span",KO,e[12]||(e[12]=[m("i",{class:"fas fa-circle-notch fa-spin"},null,-1),et(" Connexion en cours... ")]))):(re(),se("span",GO,e[13]||(e[13]=[m("i",{class:"fas fa-sign-in-alt"},null,-1),et(" Se connecter ")])))],8,HO)]),m("div",WO,[Ze(o,{to:"/register"},{default:En(()=>e[14]||(e[14]=[m("i",{class:"fas fa-user-plus"},null,-1),et(" Crer un compte ")])),_:1})])],32)])])}const JO=fn(DO,[["render",QO],["__scopeId","data-v-b715f233"]]),YO={setup(){const t=he(""),e=he(""),n=he(""),r=he(""),s=he(!1),i=Sl(),o=Al();return{email:t,password:e,confirmPassword:n,error:r,loading:s,handleRegister:async()=>{if(r.value="",e.value!==n.value){r.value="Les mots de passe ne correspondent pas";return}if(e.value.length<6){r.value="Le mot de passe doit contenir au moins 6 caractres";return}s.value=!0;try{await i.dispatch("register",{email:t.value,password:e.value}),o.push("/")}catch(c){c.message.includes("email-already-in-use")?r.value="Cette adresse email est dj utilise":r.value="Une erreur s'est produite lors de l'inscription",console.error(c)}finally{s.value=!1}}}}},XO={class:"register-container"},ZO={class:"auth-card"},eV={key:0,class:"error-message"},tV={class:"form-group"},nV={class:"form-group"},rV={class:"form-group"},sV={class:"form-actions"},iV=["disabled"],oV={key:0},aV={key:1},lV={class:"auth-links"};function cV(t,e,n,r,s,i){const o=js("router-link");return re(),se("div",XO,[m("div",ZO,[e[8]||(e[8]=m("h2",null,"Crer un compte",-1)),r.error?(re(),se("div",eV,Ee(r.error),1)):lt("",!0),m("form",{onSubmit:e[3]||(e[3]=go((...a)=>r.handleRegister&&r.handleRegister(...a),["prevent"]))},[m("div",tV,[e[4]||(e[4]=m("label",{for:"email"},"Email",-1)),Pe(m("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=a=>r.email=a),required:"",autocomplete:"email"},null,512),[[Xe,r.email]])]),m("div",nV,[e[5]||(e[5]=m("label",{for:"password"},"Mot de passe",-1)),Pe(m("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),required:"",autocomplete:"new-password"},null,512),[[Xe,r.password]])]),m("div",rV,[e[6]||(e[6]=m("label",{for:"confirm-password"},"Confirmer le mot de passe",-1)),Pe(m("input",{type:"password",id:"confirm-password","onUpdate:modelValue":e[2]||(e[2]=a=>r.confirmPassword=a),required:"",autocomplete:"new-password"},null,512),[[Xe,r.confirmPassword]])]),m("div",sV,[m("button",{type:"submit",class:"btn btn-primary",disabled:r.loading},[r.loading?(re(),se("span",oV,"Inscription en cours...")):(re(),se("span",aV,"S'inscrire"))],8,iV)]),m("div",lV,[Ze(o,{to:"/login"},{default:En(()=>e[7]||(e[7]=[et("Dj un compte ? Se connecter")])),_:1})])],32)])])}const uV=fn(YO,[["render",cV],["__scopeId","data-v-bae26140"]]),hV=[{path:"/login",name:"Login",component:JO,meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:uV,meta:{requiresGuest:!0}},{path:"/",name:"Dashboard",component:Yx,meta:{requiresAuth:!0}},{path:"/markdown",name:"MarkdownPreviewer",component:BN,meta:{requiresAuth:!0}},{path:"/qrcode",name:"QrCodeGenerator",component:AD,meta:{requiresAuth:!0}},{path:"/converter",name:"Converter",component:QD,meta:{requiresAuth:!0}},{path:"/calculator",name:"Calculator",component:g2,meta:{requiresAuth:!0}},{path:"/links",name:"LinkBoard",component:SO,meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:H2,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:NO}],sE=gI({history:zb("/"),routes:hV});sE.beforeEach((t,e,n)=>{const r=t.matched.some(a=>a.meta.requiresAuth),s=t.matched.some(a=>a.meta.requiresGuest),i=qi.getters.isLoggedIn;if(qi.state.authIsReady)o();else{const a=gr.onAuthStateChanged(c=>{qi.commit("setUser",c),qi.commit("setAuthIsReady",!0),a(),o()})}function o(){r&&!i?n("/login"):s&&i?n("/"):n()}});const Td=rb(hA);Td.use(sE);Td.use(qi);Td.mount("#app");
